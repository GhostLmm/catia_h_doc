<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SDMRuntime/PublicInterfaces/SdaiSelBodyMacro.h</title>
    <style>
        body {
            font-family: 'Consolas', 'Monaco', monospace;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .header {
            background-color: #2c3e50;
            color: white;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .navigation {
            display: flex;
            justify-content: space-between;
            margin: 15px 0;
            padding: 10px;
            background-color: #ecf0f1;
            border-radius: 5px;
        }
        .navigation a {
            color: #2980b9;
            text-decoration: none;
            padding: 5px 10px;
            background-color: white;
            border-radius: 3px;
            border: 1px solid #bdc3c7;
        }
        .navigation a:hover {
            background-color: #3498db;
            color: white;
        }
        .content {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            border: 1px solid #bdc3c7;
            white-space: pre-wrap;
            font-size: 14px;
            line-height: 1.4;
            overflow-x: auto;
        }
        .back-to-index {
            text-align: center;
            margin: 15px 0;
        }
        .back-to-index a {
            color: #27ae60;
            text-decoration: none;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>SDMRuntime/PublicInterfaces/SdaiSelBodyMacro.h</h1>
    </div>
    
    <div class="navigation">
        <div><a href="SdaiSelAttMacro.html">‚Üê ‰∏ä‰∏ÄÈ°µ: SdaiSelAttMacro.h</a></div>
        <div><a href="SdaiSelHeaderMacro.html">‰∏ã‰∏ÄÈ°µ: SdaiSelHeaderMacro.h ‚Üí</a></div>
    </div>
    
    <div class="back-to-index">
        <a href="index.html">üìÅ ËøîÂõûÁõÆÂΩï</a>
    </div>
    
    <div class="content">/** @CAA2Required */
/*---------------------------------------------------------------------*/
/* DON&#x27;T DIRECTLY INCLUDE THIS HEADER IN YOUR APPLICATION CODE. IT IS  */
/* REQUIRED TO BUILD CAA APPLICATIONS BUT IT MAY DISAPPEAR AT ANY TIME */
/*---------------------------------------------------------------------*/

// ------------------------------------------------------------------------------------------------
// COPYRIGHT DASSAULT SYSTEMES  2001
// ------------------------------------------------------------------------------------------------
// SDAI -- C++ Language Binding -- SdaiSelBodyMacro -- Header
// macros for body of select class
// ------------------------------------------------------------------------------------------------

#ifndef SDAI_SEL_BODY_MACRO_H
#define SDAI_SEL_BODY_MACRO_H

#include &lt;SdaiSelectType.h&gt;
#include &lt;SdaiSchema.h&gt;
#include &lt;SdaiDefinedType.h&gt;
#include &lt;SdaiUnderlyingTypeH.h&gt;
#include &lt;SdaiLogical.h&gt;
#include &lt;SdaiBoolean.h&gt;
// fix binary
#include &lt;SdaiBinary.h&gt; 
#undef CONST
//==========================================================================================================
// Sequence used to convert a primitiveH to a type
//
#if defined( _WINDOWS_SOURCE) || defined( _IRIX_SOURCE )  || (defined(_AIX_SOURCE) &amp;&amp; (__xlC__ &gt;= 0x0500))
// modif bmx0898 from vbd for CXR2
// modif JNI 11/04/2002 for compiler upgrade on AIX.
#define SDAI_SEL_CONV_SIMPLE(schema,value) (const Sdai##schema##value&amp;)
#else
#define SDAI_SEL_CONV_SIMPLE(schema,value)  (Sdai##schema##value)
#endif	
#define SDAI_SEL_CONV_ENUM(schema,value)		(Sdai##schema##value) (SdaiEnum)
#define SDAI_SEL_CONV_SELECT(schema,value)	(Sdai##schema##value) (SdaiSelectH)
#define SDAI_SEL_CONV_AGGR(schema,value)	(Sdai##schema##value) (SdaiAggrInstanceH)
#define SDAI_SEL_CONV_INSTANCE(schema,value)	(Sdai##schema##value) (SdaiEntityInstanceH)

#define SDAI_SEL_GEN_METH( schema, type, nb)	\
 Sdai##schema##type::Sdai##schema##type (): SdaiSelectH()   {		\
		SdaiSelectH::SetSelectType(_typ);		\
}               \
 Sdai##schema##type::Sdai##schema##type ( const Sdai##schema##type &amp; org) \
		: SdaiSelectH(org) {	\
}                   \
					\
 Sdai##schema##type::Sdai##schema##type ( const SdaiSelectH &amp; org) \
		: SdaiSelectH(org) {	\
}                   \
					\
Sdai##schema##type &amp;  Sdai##schema##type::operator= ( const Sdai##schema##type &amp; sel)   \
{											\
	SdaiSelectH::operator= (sel);		\
	return *this;							\
}											\
const SdaiString&amp; Sdai##schema##type::LeType()			        		   \
   {                          										   \
   static const SdaiString theType = #type;                    					   \
   return theType;                       								   \
   }                          											\
const SdaiSelectType* Sdai##schema##type::GetType()							\
   {                          										   \
   return _typ;                       								   \
   }                          										   \
 /* virtual */   const SdaiString&amp; Sdai##schema##type::GetInstanceTypeName()   const   	   \
   {                           										   \
   static const SdaiString &amp; theType = Sdai##schema##type::LeType();           			   \
   return theType;											   \
   }            											   \
 /* virtual */   const SdaiBoolean&amp; Sdai##schema##type::IsKindOf( const SdaiString&amp; iTypeName )  const \
   {            											   \
   static const SdaiString &amp;  letype = Sdai##schema##type::LeType();           			   \
   if (&amp;iTypeName == &amp;letype) return sdaiTRUE ;      							   \
   if(SdaiSelectH::IsKindOf(iTypeName)) return sdaiTRUE;       						   \
   if (iTypeName == letype) return sdaiTRUE ;      							   \
   return sdaiFALSE ;				      							   \
   }                                                                    \
		   \
	SdaiSelectH* Sdai##schema##type::Factory() {\
	return new Sdai##schema##type;    \
	}   \
	int Sdai##schema##type::InitDico() {  \
		/* if (_sch == NULL)*/    \
		{		\
			_sch = SdaiDictionaryRepo::TheOne()-&gt;GetSchemaDefinition(SdaiString(#schema)); \
			if (_sch == NULL) return 0;		\
			SdaiDefinedTypeH defType = _sch-&gt;GetDefinedType(SdaiString(#type));  \
			if (defType == NULL) return 0; 		\
			_typ = (const SdaiSelectTypeH) defType-&gt;Domain();	\
			if (_typ == NULL) return 0; 		\
		 }	\
		 _typ-&gt;InitFactory(Sdai##schema##type::Factory);  \
		 return 1; \
	}    \
SdaiSchemaH Sdai##schema##type::_sch = NULL; \
SdaiSelectTypeH Sdai##schema##type::_typ = NULL;

#define SDAI_SEL_SPEC_METH(schema,type, value, name, Generic)	\
Sdai##schema##type::Sdai##schema##type(const Sdai##schema##value &amp; val)	\
: SdaiSelectH()	\
{		\
		if (_sch == NULL)		\
 		{		\
 		   InitDico();		\
 		}		\
		SdaiSelectH::SetSelectType(_typ);		\
		SdaiPrimitiveH prim = val;		\
		SdaiSelectH::set(prim);				\
}			\
Sdai##schema##type::operator const Sdai##schema##value &amp; () const	\
  {                                                                       \
	static Sdai##schema##value tempo;		\
	if ( _Sdai##schema##value()== sdaiLTRUE )                   \
	{											\
		  tempo =   SDAI_SEL_CONV_##Generic(schema,value) SdaiSelectH::getValue() ;                             \
		  return tempo;					\
	}									\
	else											\
	{                                                                   \
		SDAI_RAISE_ERROR(sdaiEVALTYPER,  			           \
		&quot;Invalid conversion to underlying type &quot; #value &quot; in select &quot; #type) ; \
	}                                                                   \
		return tempo ;                                 \
}                                                                       \
																		\
Sdai##schema##type&amp; Sdai##schema##type::operator=(const Sdai##schema##value &amp;val )	\
{											\
	SdaiPrimitiveH prim = (Sdai##schema##value) val;	/* non const for SUN */			\
	SdaiSelectH::set(prim);					\
	return *this;							\
}											\
											\
const SdaiLogical&amp; Sdai##schema##type::_Sdai##schema##value() const 				\
{						\
      if ( !exists() ) return sdaiUNKNOWN;                 \
	if (SdaiSelectH::UnderlyingTypeName() == #name) return sdaiLTRUE;	\
	else return sdaiLFALSE;					\
}

#define SDAI_SEL_TEST_METH(schema,type, value, name, Generic)	\
const SdaiLogical&amp; Sdai##schema##type::_Sdai##schema##value() const 				\
{						\
      if ( !exists() ) return sdaiUNKNOWN;                 \
	if (SdaiSelectH::UnderlyingTypeName() == #name) return sdaiLTRUE;	\
	else return sdaiLFALSE;					\
}

#define SDAI_SEL_ATTR_BODY_SIMPLE(Schema, TypeSel,  AttrName, AttrType, FullType)	\
SDAI_SEL_METHOD(Schema,TypeSel,  AttrName, FullType, CONST, AttrType)		\
SDAI_SEL_METHOD(Schema,TypeSel,  Test##AttrName, const SdaiBoolean&amp;, CONST, SdaiBoolean)		\
SDAI_SEL_METHOD_ATT(Schema,TypeSel, AttrName, FullType )	\
SDAI_SEL_METHOD_VOID(Schema,TypeSel, Unset##AttrName, void )

#define SDAI_SEL_ATTR_BODY_ENUM(Schema, TypeSel, AttrName, AttrType, FullType)	\
	SDAI_SEL_ATTR_BODY_SIMPLE(Schema, TypeSel , AttrName, AttrType, FullType)

#define SDAI_SEL_ATTR_BODY_SEL(Schema, TypeSel , AttrName, AttrType, FullType)	\
	SDAI_SEL_ATTR_BODY_SIMPLE(Schema, TypeSel , AttrName, AttrType, FullType)

#define SDAI_SEL_ATTR_BODY_INST(Schema, TypeSel , AttrName, AttrType, FullType)	\
	SDAI_SEL_ATTR_BODY_SIMPLE(Schema, TypeSel , AttrName, AttrType, FullType)		\
	SDAI_SEL_METHOD_ATT(Schema,TypeSel, AttrName, SdaiEntityInstanceH )


#define SDAI_SEL_ATTR_BODY_AGGR(Schema, TypeSel , AttrName, AttrType, FullType)	\
	SDAI_SEL_ATTR_BODY_SIMPLE(Schema, TypeSel,  AttrName, AttrType, FullType)	\
	SDAI_SEL_METHOD(Schema,TypeSel,  CreateAggr##AttrName, FullType,NOCONST, AttrType)

#define SDAI_SEL_ATTR_BODY_INV(Schema, TypeSel,  AttrName, AttrType, FullType)	\
	SDAI_SEL_METHOD(Schema,TypeSel, AttrName, FullType, CONST, AttrType)		\
	SDAI_SEL_METHOD(Schema,TypeSel, Test##AttrName, const SdaiBoolean&amp;, CONST, SdaiBoolean)

#define SDAI_SEL_ATTR_BODY_INVAGGR(Schema, TypeSel,  AttrName, AttrType, FullType)	\
	SDAI_SEL_ATTR_BODY_INV(Schema, TypeSel,  AttrName, AttrType, FullType)

#define SDAI_SEL_METHOD_VOID_START(Schema, TypeSel, Method, AttrType)	\
void Sdai##Schema##TypeSel::Method() {		\
	if(_SDAI_SEL_ENTITY_1())	\
		((SDAI_SEL_ENTITY_1)(SdaiEntityInstanceH) getValue())-&gt;Method();
#define SDAI_SEL_METHOD_VOID_2(Schema, TypeSel,  Method, AttrType)	\
	else if(_SDAI_SEL_ENTITY_2())	\
		((SDAI_SEL_ENTITY_2)(SdaiEntityInstanceH) getValue())-&gt;Method();
#define SDAI_SEL_METHOD_VOID_3(Schema, TypeSel,  Method, AttrType)	\
	else if(_SDAI_SEL_ENTITY_3())	\
		((SDAI_SEL_ENTITY_3)(SdaiEntityInstanceH) getValue())-&gt;Method();
#define SDAI_SEL_METHOD_VOID_4(Schema, TypeSel,  Method, AttrType)	\
	else if(_SDAI_SEL_ENTITY_4())	\
		((SDAI_SEL_ENTITY_4)(SdaiEntityInstanceH) getValue())-&gt;Method();
#define SDAI_SEL_METHOD_VOID_END(Schema, TypeSel,  Method, AttrType)	\
	else	\
		SDAI_RAISE_ERROR(sdaiEVALTYPER,									\
		  &quot;Wrong underlying type in select &quot; #TypeSel &quot; for method &quot; #Method);	\
}
#define SDAI_CONST const
//#define SDAI_const const
#define SDAI_NOCONST

#define SDAI_SEL_METHOD_START(Schema, TypeSel, Method, AttrType, IsConst)	\
AttrType Sdai##Schema##TypeSel::Method()	SDAI_##IsConst {		\
	if(_SDAI_SEL_ENTITY_1())	\
		return ((SDAI_SEL_ENTITY_1)(SdaiEntityInstanceH) getValue())-&gt;Method();
#define SDAI_SEL_METHOD_2(Schema, TypeSel,  Method, AttrType)	\
	else if(_SDAI_SEL_ENTITY_2())	\
		return ((SDAI_SEL_ENTITY_2)(SdaiEntityInstanceH) getValue())-&gt;Method();
#define SDAI_SEL_METHOD_3(Schema, TypeSel,  Method, AttrType)	\
	else if(_SDAI_SEL_ENTITY_3())	\
		return ((SDAI_SEL_ENTITY_3)(SdaiEntityInstanceH) getValue())-&gt;Method();
#define SDAI_SEL_METHOD_4(Schema, TypeSel,  Method, AttrType)	\
	else if(_SDAI_SEL_ENTITY_4())	\
		return ((SDAI_SEL_ENTITY_4)(SdaiEntityInstanceH) getValue())-&gt;Method();

#define SDAI_SEL_METHOD_END(Schema, TypeSel, Method, AttrType)	\
	else	\
		SDAI_RAISE_ERROR(sdaiEVALTYPER,									\
		  &quot;Wrong underlying type in select &quot; #TypeSel &quot; for method &quot; #Method);	\
	static AttrType def_val;												\
	return def_val;	\
}

#define SDAI_SEL_METHOD_ATT_START(Schema, TypeSel, Method, AttrType)	\
void Sdai##Schema##TypeSel::Method(AttrType val) {		\
	if(_SDAI_SEL_ENTITY_1())	\
		((SDAI_SEL_ENTITY_1) (SdaiEntityInstanceH) getValue())-&gt;Method(val);

#define SDAI_SEL_METHOD_ATT_2(Schema, TypeSel, Method, AttrType)	\
	else if(_SDAI_SEL_ENTITY_2())	\
		((SDAI_SEL_ENTITY_2) (SdaiEntityInstanceH) getValue())-&gt;Method(val);

#define SDAI_SEL_METHOD_ATT_3(Schema, TypeSel, Method, AttrType)	\
	else if(_SDAI_SEL_ENTITY_2())	\
		((SDAI_SEL_ENTITY_2) (SdaiEntityInstanceH) getValue())-&gt;Method(val);

#define SDAI_SEL_METHOD_ATT_4(Schema, TypeSel, Method, AttrType)	\
	else if(_SDAI_SEL_ENTITY_2())	\
		((SDAI_SEL_ENTITY_2) (SdaiEntityInstanceH) getValue())-&gt;Method(val);

#define SDAI_SEL_METHOD_ATT_END(Schema, TypeSel,  Method, AttrType)	\
	else	\
		SDAI_RAISE_ERROR(sdaiEVALTYPER,									\
		  &quot;Wrong underlying type in select &quot; #TypeSel &quot; for method &quot; #Method);	\
}



#endif
</div>
    
    <div class="navigation">
        <div><a href="SdaiSelAttMacro.html">‚Üê ‰∏ä‰∏ÄÈ°µ: SdaiSelAttMacro.h</a></div>
        <div><a href="SdaiSelHeaderMacro.html">‰∏ã‰∏ÄÈ°µ: SdaiSelHeaderMacro.h ‚Üí</a></div>
    </div>
</body>
</html>