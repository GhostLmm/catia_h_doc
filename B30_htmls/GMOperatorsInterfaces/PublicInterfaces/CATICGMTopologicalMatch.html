<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GMOperatorsInterfaces/PublicInterfaces/CATICGMTopologicalMatch.h</title>
    <style>
        body {
            font-family: 'Consolas', 'Monaco', monospace;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .header {
            background-color: #2c3e50;
            color: white;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .navigation {
            display: flex;
            justify-content: space-between;
            margin: 15px 0;
            padding: 10px;
            background-color: #ecf0f1;
            border-radius: 5px;
        }
        .navigation a {
            color: #2980b9;
            text-decoration: none;
            padding: 5px 10px;
            background-color: white;
            border-radius: 3px;
            border: 1px solid #bdc3c7;
        }
        .navigation a:hover {
            background-color: #3498db;
            color: white;
        }
        .content {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            border: 1px solid #bdc3c7;
            white-space: pre-wrap;
            font-size: 14px;
            line-height: 1.4;
            overflow-x: auto;
        }
        .back-to-index {
            text-align: center;
            margin: 15px 0;
        }
        .back-to-index a {
            color: #27ae60;
            text-decoration: none;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>GMOperatorsInterfaces/PublicInterfaces/CATICGMTopologicalMatch.h</h1>
    </div>
    
    <div class="navigation">
        <div><a href="CATICGMTopologicalFillLight.html">‚Üê ‰∏ä‰∏ÄÈ°µ: CATICGMTopologicalFillLight.h</a></div>
        <div><a href="CATICGMWireExtrapolationOp.html">‰∏ã‰∏ÄÈ°µ: CATICGMWireExtrapolationOp.h ‚Üí</a></div>
    </div>
    
    <div class="back-to-index">
        <a href="index.html">üìÅ ËøîÂõûÁõÆÂΩï</a>
    </div>
    
    <div class="content">#ifndef CATICGMTopologicalMatch_h_
#define CATICGMTopologicalMatch_h_

// COPYRIGHT DASSAULT SYSTEMES 2006

/**
 * @CAA2Level L1
 * @CAA2Usage U1
*/

#include &quot;CATGMOperatorsInterfaces.h&quot;
#include &quot;CATICGMTopOperator.h&quot;
#include &quot;CATDataType.h&quot;
#include &quot;CATFreeFormDef.h&quot;
#include &quot;CATSkillValue.h&quot;

class CATBody;
class CATMathDirection;
class CATVertex;
class CATTopData;

extern ExportedByCATGMOperatorsInterfaces IID IID_CATICGMTopologicalMatch;

/**
 * Class defining the topological operator that matches parts of skin boundaries.
 * &lt;br&gt;The skins must be composed of one face, which boundaries are on the surface boundaries.
 * The matching operation is done with respect to continuity criteria along the
 * boundaries. If the G0 continuity is imposed on a boundary, the control points of this boundary
 * are taken into account. If the G1 continuity is imposed, the first rank (on the boundary) and
 * second rank of control points are taken into account. If the G2 continuity is imposed, 
 * three ranks of control points are taken into account. It is possible to optimize 
 * the modifications of these ranks (&lt;tt&gt;SetOptimization&lt;/tt&gt;), as well as diffuse the modifications
 * on the whole surface (&lt;tt&gt;SetDiffusion&lt;/tt&gt;).
 * The CATICGMTopologicalMatch operator can be used in two different match configurations:
 * &lt;ul&gt;
 *   &lt;li&gt;The matching operator deforms the selected boundary edges of the first skin, to be 
 * coincident with boundary edges of other skins, with respect to a given continuity criteria
 * (&quot;multiple sides matching&quot;). 
 *   &lt;li&gt;The matching operator deforms both skins that must match along a given edge 
 * (&quot;both&quot; matching).
 * &lt;/ul&gt;
 * The operator follows the use frame of all operator. It satisfies to the smart mechanism: the
 * input bodies are not modified. New one are created, possibly sharing data with the input ones.
 *&lt;ul&gt;
 * A CATICGMTopologicalMatch operator is created with the &lt;tt&gt;CATCGMCreateTopologicalMatch&lt;/tt&gt; global function 
 * for the multiple sides matching
 * and the &lt;tt&gt;CATCGMCreateTopologicalMatchBoth&lt;/tt&gt; global function for the both matching; it must be
 * directly released with the &lt;tt&gt;Release&lt;/tt&gt; method after use.
 * It is is not streamable. 
 *&lt;li&gt;In case of &lt;tt&gt;BASIC&lt;/tt&gt;
 * mode, the operation is automatically performed at the operator creation. 
 * In case of &lt;tt&gt;ADVANCED&lt;/tt&gt;
 * mode, options can be precised with the &lt;tt&gt;SetXxx&lt;/tt&gt; methods, before
 * asking for the computation with the &lt;tt&gt;Run&lt;/tt&gt; method. The advanced mode also allows you to
 * run the same operator with additional continuity constraints.
 *&lt;li&gt;In both cases, the result is accessed with the &lt;tt&gt;GetResult&lt;/tt&gt; method. If you do not want 
 * to keep the resulting body, use the @href CATICGMContainer#Remove method to remove it from the 
 * geometric factory.
 *&lt;/ul&gt;
 *
 */
class ExportedByCATGMOperatorsInterfaces CATICGMTopologicalMatch: public CATICGMTopOperator
{
public:
  /**
   * Constructor
   */
  CATICGMTopologicalMatch();

  /**
 * Returns the result of &lt;tt&gt;this&lt;/tt&gt; operator.
 * &lt;br&gt;The bodies are created by the operator. 
 * You must delete them with the @href CATICGMContainer#Remove 
 * method if you do not want to keep them.
 * @param iSkinIndex
 * The index of the input surface.
 * &lt;br&gt;&lt;b&gt;Legal values&lt;/b&gt;:
 * &lt;ul&gt;&lt;li&gt;In case of multiple sides matching, only the first skin is modified, such that &lt;tt&gt;iSkinIndex=0&lt;/tt&gt;.
 * &lt;li&gt;In case of both matching,&lt;tt&gt;iSkinIndex=0&lt;/tt&gt; is set for the first input skin,
 * &lt;tt&gt;iSkinIndex=1&lt;/tt&gt; is set for the second one.
 * &lt;/ul&gt;
 * @return
 * The pointer to the created body corresponding to the deformation of the &lt;tt&gt;iSkinIndex&lt;/tt&gt; surface.  
 */
  virtual CATBody *GetResult(CATLONG32 iSkinIndex) const = 0;

  /**
 * Runs &lt;tt&gt;this&lt;/tt&gt; operator (&lt;tt&gt;ADVANCED&lt;/tt&gt; mode).
 */
  virtual int Run() = 0;

  /**
 * Defines a new matching operation (&lt;tt&gt;ADVANCED&lt;/tt&gt; mode).
 * &lt;br&gt;The result of the preceeding &lt;tt&gt;Run&lt;/tt&gt; is set for the next run. This allows you to refine the continuity 
 * criteria of the matching. Use the &lt;tt&gt;Setxxx&lt;/tt&gt; methods to tune the criteria, and &lt;tt&gt;Run&lt;/tt&gt; again
 * the operator. New resulting bodies are created.
 */
  virtual void UseTheLastRunResult() = 0;

  /**
 * Defines the continuity criteria for &lt;tt&gt;this&lt;/tt&gt; matching operation (&lt;tt&gt;ADVANCED&lt;/tt&gt; mode).
 * @param iWireIndex
 * The index (beginning at 0) of the wire on which the continuity criteria is defined.
 * @param iContinuity
 * The type of continuity for &lt;tt&gt;iWireIndex&lt;/tt&gt;. Set to &lt;tt&gt;CATFrFPointCont&lt;/tt&gt; (G0 continuity), in default mode.
 */
  virtual void SetConnectionContinuity(
    CATLONG32 iWireIndex,
    CATFrFContinuity iContinuity) = 0;

  /**
 * Returns the continuity criteria for &lt;tt&gt;this&lt;/tt&gt; matching operation (&lt;tt&gt;ADVANCED&lt;/tt&gt; mode).
 * @param iWireIndex
 * The index (beginning at 0) of the wire on which the continuity criteria is defined.
 * @return
 * The type of continuity for &lt;tt&gt;iWireIndex&lt;/tt&gt;.
 */
  virtual CATFrFContinuity GetConnectionContinuity(CATLONG32 iWireIndex) const = 0;

  /**
 * Defines a continuity criteria on the boundaries that are not part of the boundaries to match (&lt;tt&gt;ADVANCED&lt;/tt&gt; mode).
 * &lt;br&gt;In case of conflict with the connection continuity, the priority is given to the connection
 * continuity.
 * @param iWireIndex
 * The index (beginning at 0) of the wire to match. The continuity  will be defined on the opposite wire.
 * Remember that the only works on faces with four edges defined on the surface coundaries.
 * @param iSkinIndex
 * The index of the input surface.
 * &lt;br&gt;&lt;b&gt;Legal values&lt;/b&gt;:
 * &lt;ul&gt;&lt;li&gt;In case of multiple sides matching, only the first skin is modified, such that &lt;tt&gt;iSkinIndex=0&lt;/tt&gt;.
 * &lt;li&gt;In case of both matching,&lt;tt&gt;iSkinIndex=0&lt;/tt&gt; is set for the first input skin,
 * &lt;tt&gt;iSkinIndex=1&lt;/tt&gt; is set for the second one.
 * &lt;/ul&gt;
 * @param iContinuity
 * The type of continuity for &lt;tt&gt;iWireIndex&lt;/tt&gt;. Set to &lt;tt&gt;CATFrFPointCont&lt;/tt&gt; (G0 continuity), in default mode.
 */
  virtual void SetOppositeSideContinuity(
    CATLONG32 iWireIndex,
    CATLONG32 iSkinIndex,
    CATFrFContinuity iContinuity) = 0;

  /**
 * Returns the continuity criteria on the boundaries that are not part of the boundaries to match (&lt;tt&gt;ADVANCED&lt;/tt&gt; mode).
 * &lt;br&gt;In case of conflict with the connection continuity, the priority is given to the connection
 * continuity.
 * @param iWireIndex
 * The index (beginning at 0) of the wire to match. The continuity  will be defined on the opposite wire.
 * Remember that the only works on faces with four edges defined on the surface coundaries.
 * @param iSkinIndex
 * The index of the input surface.
 * &lt;br&gt;&lt;b&gt;Legal values&lt;/b&gt;:
 * &lt;ul&gt;&lt;li&gt;In case of multiple sides matching, only the first skin is modified, such that &lt;tt&gt;iSkinIndex=0&lt;/tt&gt;.
 * &lt;li&gt;In case of both matching,&lt;tt&gt;iSkinIndex=0&lt;/tt&gt; is set for the first input skin,
 * &lt;tt&gt;iSkinIndex=1&lt;/tt&gt; is set for the second one.
 * &lt;/ul&gt;
 * @return
 * The type of continuity for &lt;tt&gt;iWireIndex&lt;/tt&gt;. Set to &lt;tt&gt;CATFrFPointCont&lt;/tt&gt; (G0 continuity), in default mode.
 */
  virtual CATFrFContinuity GetOppositeSideContinuity(
    CATLONG32 iWireIndex,
    CATLONG32 iSkinIndex) const = 0;

  //======================
  //  Orientation Methods
  //======================
  /**
 * Asks for the default choice of the relative orientation of the wires to match (&lt;tt&gt;ADVANCED&lt;/tt&gt; mode).
 */
  virtual void SetDefaultRelativeWireOrientation() = 0;

  /**
 * Asks for reversing the default relative orientation of the wires to match (&lt;tt&gt;ADVANCED&lt;/tt&gt; mode).
 * &lt;br&gt; This can used to manualy manage the twist.
 */
  virtual void ReverseRelativeWireOrientation() = 0;

  /**
 * Asks for the default choice of the transition between the surface to match (&lt;tt&gt;ADVANCED&lt;/tt&gt; mode). 
 */
  virtual void SetDefaultTransitionOrientation() = 0;

  /**
 * Asks for reversing the default transition between the surface to match (&lt;tt&gt;ADVANCED&lt;/tt&gt; mode).
 */
  virtual void ReverseTransitionOrientation(CATLONG32 iSkinIndex) = 0;

  //==================
  // Diffusion  
  //==================
  /**
 * Defines the diffusion of the deformation on the whole surface (&lt;tt&gt;ADVANCED&lt;/tt&gt; mode).
 * @param iSkinIndex
 * The index of the input surface.
 * &lt;br&gt;&lt;b&gt;Legal values&lt;/b&gt;:
 * &lt;ul&gt;&lt;li&gt;In case of multiple sides matching, only the first skin is modified, such that &lt;tt&gt;iSkinIndex=0&lt;/tt&gt;.
 * &lt;li&gt;In case of both matching,&lt;tt&gt;iSkinIndex=0&lt;/tt&gt; is set for the first input skin,
 * &lt;tt&gt;iSkinIndex=1&lt;/tt&gt; is set for the second one.
 * &lt;/ul&gt;
 * @param iDiffusion
 * The diffusion.
 * &lt;br&gt;&lt;b&gt;Legal values&lt;/b&gt;&lt;/tt&gt;: 0 for only deform the control points impacted by the continuity criteria
 * (default value), 1 to diffuse the modifiations on the whole surface.
 */
  virtual void SetDiffusion(CATLONG32 iSkinIndex, CATLONG32 iDiffusion) = 0;

  /** 
 * Returns the level of diffusion of the deformation on the whole surface (&lt;tt&gt;ADVANCED&lt;/tt&gt; mode).
 * @param iSkinIndex
 * The index of the input surface.
 * &lt;br&gt;&lt;b&gt;Legal values&lt;/b&gt;:
 * &lt;ul&gt;&lt;li&gt;In case of multiple sides matching, only the first skin is modified, such that &lt;tt&gt;iSkinIndex=0&lt;/tt&gt;.
 * &lt;li&gt;In case of both matching,&lt;tt&gt;iSkinIndex=0&lt;/tt&gt; is set for the first input skin,
 * &lt;tt&gt;iSkinIndex=1&lt;/tt&gt; is set for the second one.
 * &lt;/ul&gt;
 * @return
 * The diffusion.
 * &lt;br&gt;&lt;b&gt;Legal values&lt;/b&gt;&lt;/tt&gt;: 0 for only deform the control points impacted by the continuity criteria, 1 to diffuse
 * the modifiations on the whole surface.
 */
  virtual CATLONG32 GetDiffusion(CATLONG32 iSkinIndex) const = 0;

  /**
 * Asks fot the optimization of the local deformation (&lt;tt&gt;ADVANCED&lt;/tt&gt; mode).
 * @param iOptimization
 * The optimization is set with 1  (default mode) and unset with 0.
 */
  virtual void SetOptimization(CATLONG32 iOptimization) = 0;

  //=============================
  //  Both Configuration Methods
  //=============================
  /**
 * Sets the match factor in case of both matching and &lt;tt&gt;ADVANCED&lt;/tt&gt; mode.
 * @param iContinuity
 * The continuity order on the boundary
 * @param iFactor
 * The relative influence of each surface.
 * &lt;br&gt;&lt;b&gt;Legal values&lt;/b&gt;: &lt;tt&gt;0 &lt;= iFactor &lt;= 1 &lt;/tt&gt;, &lt;tt&gt;0&lt;= iFactor &lt;=0.5 &lt;/tt&gt; to enhance the influence
 * the first surface, &lt;tt&gt;0&lt;= iFactor &lt;=0.5 &lt;/tt&gt; to enhance the influence of the second surface. 
 * Set to &lt;tt&gt;0.5&lt;/tt&gt; by default.
 */
  virtual void SetMatchFactor(CATFrFContinuity iContinuity, double iFactor) = 0;

  /**
 * Returns the match factor.
 * @return
 * The relative influence of each surface.
 * &lt;br&gt;&lt;b&gt;Legal values&lt;/b&gt;: &lt;tt&gt;0 &lt;= iFactor &lt;= 1 &lt;/tt&gt;, &lt;tt&gt;0&lt;= iFactor &lt;=0.5 &lt;/tt&gt; to enhance the influence
 * the first surface, &lt;tt&gt;0&lt;= iFactor &lt;=0.5 &lt;/tt&gt; to enhance the influence of the second surface. 
 */
  virtual double GetMatchFactor(CATFrFContinuity iContinuity) const = 0;

  /**
 * Defines a stiffness on the matching zone in case of both matching and &lt;tt&gt;ADVANCED&lt;/tt&gt; mode.
 * @param iSkinIndex
 * The index of the input surface.
 * &lt;br&gt;&lt;b&gt;Legal values&lt;/b&gt;:
 * &lt;ul&gt;&lt;li&gt;In case of multiple sides matching, only the first skin is modified, such that &lt;tt&gt;iSkinIndex=0&lt;/tt&gt;.
 * &lt;li&gt;In case of both matching,&lt;tt&gt;iSkinIndex=0&lt;/tt&gt; is set for the first input skin,
 * &lt;tt&gt;iSkinIndex=1&lt;/tt&gt; is set for the second one.
 * &lt;/ul&gt;
 * @param iTangentRatio
 * The global tangent parameter ratio. Can be used for connection continuity greater or equal to G1.
 * &lt;br&gt;&lt;b&gt;Legal values&lt;/b&gt;: &lt;tt&gt;0. &lt;= iTangentRatio &lt;= 1.&lt;/tt&gt;. Set by default to &lt;tt&gt;1.&lt;/tt&gt;.
 */
  virtual void SetGlobalTangentParameter(
    CATLONG32 iSkinIndex,
    double iTangentRatio) = 0;

  /**
 * Retrieves the stiffness on the matching zone in case of both matching and &lt;tt&gt;ADVANCED&lt;/tt&gt; mode.
 * @param iSkinIndex
 * The index of the input surface.
 * &lt;br&gt;&lt;b&gt;Legal values&lt;/b&gt;:
 * &lt;ul&gt;&lt;li&gt;In case of multiple sides matching, only the first skin is modified, such that &lt;tt&gt;iSkinIndex=0&lt;/tt&gt;.
 * &lt;li&gt;In case of both matching,&lt;tt&gt;iSkinIndex=0&lt;/tt&gt; is set for the first input skin,
 * &lt;tt&gt;iSkinIndex=1&lt;/tt&gt; is set for the second one.
 * &lt;/ul&gt;
 * @param ioTangentRatio
 * The global tangent parameter. Can be used for connection continuity greater or equal to G1.
 * &lt;br&gt;&lt;b&gt;Legal values&lt;/b&gt;: &lt;tt&gt;0. &lt;= iTangentRatio &lt;= 1.&lt;/tt&gt;.
 */
  virtual void GetGlobalTangentParameter(
    CATLONG32 iSkinIndex,
    double &amp;ioTangentRatio) const = 0;

  /**
 * Defines a stiffness on the matching zone in case of both matching and &lt;tt&gt;ADVANCED&lt;/tt&gt; mode.
 * @param iSkinIndex
 * The index of the input surface.
 * &lt;br&gt;&lt;b&gt;Legal values&lt;/b&gt;:
 * &lt;ul&gt;&lt;li&gt;In case of multiple sides matching, only the first skin is modified, such that &lt;tt&gt;iSkinIndex=0&lt;/tt&gt;.
 * &lt;li&gt;In case of both matching,&lt;tt&gt;iSkinIndex=0&lt;/tt&gt; is set for the first input skin,
 * &lt;tt&gt;iSkinIndex=1&lt;/tt&gt; is set for the second one.
 * &lt;/ul&gt;
 * @param iCurvatureRatio
 * The global curvature parameter ratio. Can be used for connection continuity greater or equal to G2.
 * &lt;br&gt;&lt;b&gt;Legal values&lt;/b&gt;: &lt;tt&gt;0. &lt;= iCurvatureRatio &lt;= 1.&lt;/tt&gt;. Set by default to &lt;tt&gt;1.&lt;/tt&gt;.
 */
  virtual void SetGlobalCurvatureParameter(
    CATLONG32 iSkinIndex,
    double iCurvatureRatio) = 0;

  /**
 * Retrieves the stiffness on the matching zone in case of both matching and &lt;tt&gt;ADVANCED&lt;/tt&gt; mode.
 * @param iSkinIndex
 * The index of the input surface.
 * &lt;br&gt;&lt;b&gt;Legal values&lt;/b&gt;:
 * &lt;ul&gt;&lt;li&gt;In case of multiple sides matching, only the first skin is modified, such that &lt;tt&gt;iSkinIndex=0&lt;/tt&gt;.
 * &lt;li&gt;In case of both matching,&lt;tt&gt;iSkinIndex=0&lt;/tt&gt; is set for the first input skin,
 * &lt;tt&gt;iSkinIndex=1&lt;/tt&gt; is set for the second one.
 * &lt;/ul&gt;
 * @param ioCurvatureRatio
 * The global curvature parameter ratio. Can be used for connection continuity greater or equal to G2.
 * &lt;br&gt;&lt;b&gt;Legal values&lt;/b&gt;: &lt;tt&gt;0. &lt;= iCurvatureRatio &lt;= 1.&lt;/tt&gt;. Set by default to &lt;tt&gt;1.&lt;/tt&gt;.
 */
  virtual void GetGlobalCurvatureParameter(
    CATLONG32 iSkinIndex,
    double &amp;ioCurvatureRatio) const = 0;

protected:
  /**
   * Destructor
   */
  virtual ~CATICGMTopologicalMatch(); // -&gt; delete can&#x27;t be called
};

/*
protected :
  virtual CATTopologicalMatch(CATTopologicalMatch &amp;);
*/
/**
 * Creates a topological operator of multiple sides matching.
 * @param iFactory
 * The pointer to the factory of the geometry.
 * @param iTopData
 * The pointer to the data defining the software configuration and the journal. If the journal inside &lt;tt&gt;iTopData&lt;/tt&gt; 
 * is &lt;tt&gt;NULL&lt;/tt&gt;, it is not filled.
 * @param iWire1
 * The array &lt;tt&gt;[NbWires]&lt;/tt&gt; of pointers to wire body on the first same surface. 
 * Each body only contains one wire with one edge. The geometry of the edge must
 * be a boundary of &lt;tt&gt;iSupport1&lt;/tt&gt;.
 * @param iWire2
 * The array &lt;tt&gt;[NbWires]&lt;/tt&gt; of pointers to the corresponding wire bodies to match.
 * Each body only contains one wire with one edge. The geometry of the edge must
 * be a boundary of the corresponding surface in &lt;tt&gt;iSupport2&lt;/tt&gt;. 
 * @param iNbWires
 * The number of wires to match.
 * @param iSupport1
 * The pointer to the common surface of the wire bodies of &lt;tt&gt;iWire1&lt;/tt&gt;.
 * @param iSupport2
 * The array &lt;tt&gt;[NbWires]&lt;/tt&gt; pointers to the corresponding surfaces of the wire bodies of &lt;tt&gt;iWire2&lt;/tt&gt;.
 * @param iMode
 * The mode of use.
 * @return [out, IUnknown#Release]
 * The pointer to the created operator. To be released with the &lt;tt&gt;Release&lt;/tt&gt; method after use.
 * @see CATICGMTopologicalMatch
 */
ExportedByCATGMOperatorsInterfaces CATICGMTopologicalMatch *CATCGMCreateTopologicalMatch(
  CATGeoFactory *iFactory,
  CATTopData *iTopData,
  CATBody **iWire1,
  CATBody **iWire2,
  CATLONG32 iNbWires,
  CATBody *iSupport1,
  CATBody **iSupport2,
  CATSkillValue iMode = BASIC);

#endif /* CATICGMTopologicalMatch_h_ */
</div>
    
    <div class="navigation">
        <div><a href="CATICGMTopologicalFillLight.html">‚Üê ‰∏ä‰∏ÄÈ°µ: CATICGMTopologicalFillLight.h</a></div>
        <div><a href="CATICGMWireExtrapolationOp.html">‰∏ã‰∏ÄÈ°µ: CATICGMWireExtrapolationOp.h ‚Üí</a></div>
    </div>
</body>
</html>