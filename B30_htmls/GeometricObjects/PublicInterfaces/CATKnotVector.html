<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GeometricObjects/PublicInterfaces/CATKnotVector.h</title>
    <style>
        body {
            font-family: 'Consolas', 'Monaco', monospace;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .header {
            background-color: #2c3e50;
            color: white;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .navigation {
            display: flex;
            justify-content: space-between;
            margin: 15px 0;
            padding: 10px;
            background-color: #ecf0f1;
            border-radius: 5px;
        }
        .navigation a {
            color: #2980b9;
            text-decoration: none;
            padding: 5px 10px;
            background-color: white;
            border-radius: 3px;
            border: 1px solid #bdc3c7;
        }
        .navigation a:hover {
            background-color: #3498db;
            color: white;
        }
        .content {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            border: 1px solid #bdc3c7;
            white-space: pre-wrap;
            font-size: 14px;
            line-height: 1.4;
            overflow-x: auto;
        }
        .back-to-index {
            text-align: center;
            margin: 15px 0;
        }
        .back-to-index a {
            color: #27ae60;
            text-decoration: none;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>GeometricObjects/PublicInterfaces/CATKnotVector.h</h1>
    </div>
    
    <div class="navigation">
        <div><a href="CATIsoParameter.html">‚Üê ‰∏ä‰∏ÄÈ°µ: CATIsoParameter.h</a></div>
        <div><a href="CATLaw.html">‰∏ã‰∏ÄÈ°µ: CATLaw.h ‚Üí</a></div>
    </div>
    
    <div class="back-to-index">
        <a href="index.html">üìÅ ËøîÂõûÁõÆÂΩï</a>
    </div>
    
    <div class="content">#ifndef CATKNOTVECTOR_H
#define CATKNOTVECTOR_H

// COPYRIGHT DASSAULT SYSTEMES  1999

/**
 * @CAA2Level L1
 * @CAA2Usage U1
 */ 
#include &lt;stdio.h&gt; 
#include &quot;YP00IMPL.h&quot;

#include &quot;CATIACGMLevel.h&quot;

#include &quot;CATCGMVirtual.h&quot;
#include &quot;CATCGMNewArray.h&quot;
#include &quot;CATTolerance.h&quot;

#include &quot;CATMathDef.h&quot;
#include &quot;CATMathInline.h&quot;

class     CATMathPolynomX ;
class     CATCGMStream; 
class     CATError;

#define CATKnotVectorWithTolerance
#define CATKnotVectorNewConstructorR18

/**
 * Class containing all the data necessary to define 
 * a uniform or non uniform, non periodic basis. PERIODIC NURBS ARE NOT SUPPORTED.
 * The maximum degree of a NURBS is 15.
 * &lt;br&gt; A &lt;b&gt;basis&lt;/b&gt; is a set of piecewise polynomial functions
 * (of a given &lt;b&gt; degree&lt;/b&gt;), called 
 * &lt;b&gt;basis functions&lt;/b&gt;. The pieces are the &lt;b&gt;arcs&lt;/b&gt;. 
 * They  define the parameter domains between
 * two distincts successive &lt;b&gt; knot values&lt;/b&gt; (global parameters at the
 * arc extremities). Then, the number of knots is the number of arcs plus 1.
 * The matching between arc number and Knot vector rank follows the rules ;
 *  &lt;tt&gt;(i - IndexOffset)-th Arc starts at Knots(i-1) and ends at Knots(i) &lt;/tt&gt;,
 * There is one polynom per arc for each basis function.  
 * The &lt;b&gt;continuity order&lt;/b&gt; between arcs is equal to the degree minus the
 * multiplicity of the corresponding knot value.
 * &lt;table&gt;
 * &lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;Multiplicity&lt;/td&gt;&lt;td&gt;Continuity order&lt;/td&gt;&lt;/tr&gt;
 * &lt;tr&gt;&lt;td&gt;single knot value&lt;/td&gt;&lt;td&gt;&lt;tt&gt;1&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;&lt;tt&gt;Degree-1&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
 * &lt;tr&gt;&lt;td&gt;internal knot values&lt;/td&gt;&lt;td&gt;&lt;tt&gt;1&lt;=m&lt;=degree&lt;/tt&gt;&lt;/td&gt;
 *     &lt;td&gt;&lt;tt&gt;Degree-m&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
 * &lt;tr&gt;&lt;td&gt;extreme knot values for a non periodic basis&lt;/td&gt;
 *     &lt;td&gt;&lt;tt&gt;degree+1 &lt;/tt&gt;(by convention)&lt;/td&gt;&lt;td&gt;&lt;tt&gt;(-1)&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
 * &lt;tr&gt;&lt;td&gt;same first and last knot values for a periodic basis&lt;/td&gt;
 *     &lt;td&gt;&lt;tt&gt;1&lt;=m&lt;=degree&lt;/tt&gt;&lt;/td&gt;&lt;td&gt;&lt;tt&gt;Degree-m &lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
 * &lt;/table&gt;
 * The number of arcs where 
 * the polynom is not null depends on the knot vector mutiplicities.
 * &lt;br&gt;Associating each basis
 * function to a &lt;b&gt; control point&lt;/b&gt; (also called &lt;b&gt;vertex&lt;/b&gt;),
 * allows the definition of Nurbs geometric
 * elements. A basis function represents the influence of one control point.
 * Note that vertices are not data of the knot vector, but of
 * the Nurbs polynomial element. Nevertheless, vertex ranks are handled in
 * methods of this class, because they are equivalent to the polynomial
 * basis ranks.
 * &lt;br&gt;A CATKnotVector is a transient object, it can be  saved as private data of a
 *  curve or a surface. 
 * A CATKnotVector is defined with:
 * &lt;table&gt;
 * &lt;tr&gt;&lt;td&gt;CATLONG32&lt;/td&gt; &lt;td&gt;Degree&lt;/td&gt;
 *        &lt;td&gt; The degree of the B-Spline basis functions&lt;/td&gt;&lt;/tr&gt;
 * &lt;tr&gt;&lt;td&gt;CATBoolean&lt;/td&gt; &lt;td&gt;IsPeriodic&lt;/td&gt;
 *        &lt;td&gt; 1 for a periodic basis: the parameter domain is unlimited.
 * If &lt;tt&gt;Delta= LastKnotValue - FirstKnotValue&lt;/tt&gt;,
 * the evaluations at &lt;tt&gt;Parameter + Delta&lt;/tt&gt; and &lt;tt&gt;Parameter&lt;/tt&gt; are
 * the same.
 *        &lt;br&gt; 0 otherwise&lt;/td&gt;&lt;/tr&gt;
 * &lt;tr&gt;&lt;td&gt;CATBoolean&lt;/td&gt; &lt;td&gt;IsUniform&lt;/td&gt;
 *        &lt;td&gt; 1 in case of equally spaced knot values.
 *         &lt;br&gt;0 otherwise.&lt;/td&gt;&lt;/tr&gt;
 * &lt;tr&gt;&lt;td&gt;CATLONG32&lt;/td&gt; &lt;td&gt;NbOfKnots&lt;/td&gt;
 *        &lt;td&gt; The number of knot values ( &lt;tt&gt;=NbOfArcs + 1&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
 * &lt;tr&gt;&lt;td&gt;CATLONG32&lt;/td&gt; &lt;td&gt;Knots&lt;/td&gt;
 *        &lt;td&gt; The array of the knots values &lt;/td&gt;&lt;/tr&gt;
 * &lt;tr&gt;&lt;td&gt;CATLONG32&lt;/td&gt; &lt;td&gt;Multiplicities&lt;/td&gt;
 *        &lt;td&gt; The array of the multiplicity of a knot value&lt;/td&gt;&lt;/tr&gt;
 * &lt;/table&gt;
 * &lt;br&gt;Sample of a non periodic non uniform knot vector, with C2 continuity:
 * &lt;table&gt;
 * &lt;tr&gt;&lt;td&gt;CATLONG32&lt;/td&gt; &lt;td&gt;Degree&lt;/td&gt;
 *        &lt;td&gt; 3 &lt;/td&gt;&lt;/tr&gt;
 * &lt;tr&gt;&lt;td&gt;CATBoolean&lt;/td&gt; &lt;td&gt;IsPeriodic&lt;/td&gt;
 *        &lt;td&gt;  0 &lt;/td&gt;&lt;/tr&gt;
 * &lt;tr&gt;&lt;td&gt;CATBoolean&lt;/td&gt; &lt;td&gt;IsUniform&lt;/td&gt;
 *        &lt;td&gt; 0 &lt;/td&gt;&lt;/tr&gt;
 * &lt;tr&gt;&lt;td&gt;CATLONG32&lt;/td&gt; &lt;td&gt;NbOfKnots&lt;/td&gt;
 *        &lt;td&gt; 4&lt;/td&gt;&lt;/tr&gt;
 * &lt;tr&gt;&lt;td&gt;CATLONG32&lt;/td&gt; &lt;td&gt;Knots&lt;/td&gt;
 *        &lt;td&gt; 0 , 2 , 8 , 9 &lt;/td&gt;&lt;/tr&gt;
 * &lt;tr&gt;&lt;td&gt;CATLONG32&lt;/td&gt; &lt;td&gt;Multiplicities&lt;/td&gt;
 *        &lt;td&gt; 4 , 1 , 1 , 4&lt;/td&gt;&lt;/tr&gt;
 * &lt;/table&gt;
 */
class ExportedByYP00IMPL CATKnotVector : public CATCGMVirtual
{
public:

  /** @nodoc */
  CATCGMNewClassArrayDeclare;
 
  //&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
  //
  //            C A A             M E T H O D S
  //
  //&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;

//
//- Constructors
//
/**
 * Constructs a Bezier CATKnotVector.
 * &lt;br&gt;It corresponds to one arc of degree &lt;tt&gt;iDegree&lt;/tt&gt;.
 * &lt;br&gt;Parameterization on [0.0, 1.0], not Extreme Scale compliant.
 * @param iDegree
 * The degree of the polynomial basis.
 */
                                       CATKnotVector           (const CATLONG32                   iDegree            = 3);

/**
 * Constructs a Bezier CATKnotVector.
 * &lt;br&gt;It corresponds to one arc of degree &lt;tt&gt;iDegree&lt;/tt&gt;.
 * &lt;br&gt;Parameterization on [0.0, Scale], Extreme Scale compliant (Scale being factory scale, read in &lt;tt&gt;iTolObject&lt;/tt&gt;).
 * @param iTolObject
 * The set of geometric and mathematical tolerances.
 * @param iDegree
 * The degree of the polynomial basis.
 */
                                       CATKnotVector           (const CATTolerance              &amp; iTolObject         ,
                                                                const CATLONG32                   iDegree            = 3);


/**
 * Constructs a uniform CATKnotVector.
 * @param iTolObject
 * The set of geometric and mathematical tolerances.
 * @param oError
 * (output argument) The Error to raise if invalid data given to constructor.
 * @param iDegree
 * The degree of the polynomial basis.
 * @param iIsPeriodic
 * The periodicity. So far, periodic basis are not supported.
 * &lt;br&gt;&lt;b&gt;Legal values&lt;/b&gt;  0.
 * @param iNbOfArcs
 * The number of arcs.
 * @param iKnotStart
 * The parameter value of the first knot.
 * @param iStep
 * The uniform step value between two knots.
 * @param iIndexOffset
 * The index for the first arc.
 */
                                       CATKnotVector           (const CATTolerance              &amp; iTolObject         ,
                                                                      CATError                 *&amp; oError             ,
                                                                const CATLONG32                 &amp; iDegree            ,
                                                                const CATLONG32                 &amp; iIsPeriodic        ,
                                                                const CATLONG32                 &amp; iNbOfArcs          ,
                                                                const double                      iKnotStart         = 0.,
                                                                const double                      iStep              = 1.,
                                                                const CATLONG32                   iIndexOffset       = 0
                                                               );

/**
 * Constructs a uniform CATKnotVector.
 * @param iDegree
 * The degree of the polynomial basis.
 * @param iIsPeriodic
 * The periodicity. So far, periodic basis are not supported.
 * &lt;br&gt;&lt;b&gt;Legal values&lt;/b&gt;  0.
 * @param iNbOfArcs
 * The number of arcs.
 * @param iKnotStart
 * The parameter value of the first knot.
 * @param iStep
 * The uniform step value between two knots.
 * @param iIndexOffset
 * The index for the first arc.
 */
                                       CATKnotVector           (const CATLONG32                 &amp; iDegree            ,
                                                                const CATLONG32                 &amp; iIsPeriodic        ,
                                                                const CATLONG32                 &amp; iNbOfArcs          ,
                                                                const double                      iKnotStart         = 0.,
                                                                const double                      iStep              = 1.,
                                                                const CATLONG32                   iIndexOffset       = 0
                                                               );
/**
 * Constructs a non-uniform CATKnotVector.
 * @param iTolObject
 * The set of geometric and mathematical tolerances.
 * @param oError
 * (output argument) The Error to raise if invalid data given to constructor.
 * @param iDegree
 * The degree of the polynomial basis.
 * @param iIsPeriodic
 * The periodicity.
 * &lt;br&gt;&lt;b&gt;Legal values&lt;/b&gt; 0. 
 * @param iNbOfKnots
 * The number of knot values specified for the knot vector. The number of arcs
 * is &lt;tt&gt;iNbOfKnots - 1&lt;/tt&gt;.
 * @param iKnots
 * The array of the global parameter values at the end of each arc.
 * @param iMultiplicities
 * The array of the corresponding multiplicities.
 * @param iIndexOffset
 * The index for the first arc. 
 */
                                       CATKnotVector           (const CATTolerance              &amp; iTolObject         ,
                                                                      CATError                 *&amp; oError             ,
                                                                const CATLONG32                 &amp; iDegree            ,
                                                                const CATLONG32                 &amp; iIsPeriodic        ,
                                                                const CATLONG32                 &amp; iNbOfKnots         ,
                                                                const double                   *  iKnots             ,
                                                                const CATLONG32                *  iMultiplicities    ,
                                                                const CATLONG32                   iIndexOffset       = 0
                                                               );

/**
 * Constructs a non-uniform CATKnotVector.
 * @param iDegree
 * The degree of the polynomial basis.
 * @param iIsPeriodic
 * The periodicity.
 * &lt;br&gt;&lt;b&gt;Legal values&lt;/b&gt; 0. 
 * @param iNbOfKnots
 * The number of knot values specified for the knot vector. The number of arcs
 * is &lt;tt&gt;iNbOfKnots - 1&lt;/tt&gt;.
 * @param iKnots
 * The array of the global parameter values at the end of each arc.
 * @param iMultiplicities
 * The array of the corresponding multiplicities.
 * @param iIndexOffset
 * The index for the first arc. 
 */
                                       CATKnotVector           (const CATLONG32                 &amp; iDegree            ,
                                                                const CATLONG32                 &amp; iIsPeriodic        ,
                                                                const CATLONG32                 &amp; iNbOfKnots         ,
                                                                const double                   *  iKnots             ,
                                                                const CATLONG32                *  iMultiplicities    ,
                                                                const CATLONG32                   iIndexOffset       = 0
                                                               );

/**
 * Constructs a non-uniform CATKnotVector from a parameter array and 
 * a general continuity order.
 * @param iIsPeriodic
 * The periodicity.
 * &lt;br&gt;&lt;b&gt;Legal values&lt;/b&gt;0.
 * @param iNbOfParameters
 * The number of knot values specified for the knot vector. The number of arcs
 * is &lt;tt&gt;iNbOfParameters - 1&lt;/tt&gt;.
 * @param iParameters
 * The array of the global parameter values at the end of each arc.
 * @param iContinuityOrder
 * The global continuity (0,1,2) of the curve. The degree of the polynomial basis
 * is &lt;tt&gt;iContinuityOrder + 1&lt;/tt&gt;.
 * @param iIndexOffset
 * The index for the first arc.
 * @param iTolObject
 * The set of geometric and mathematical tolerances.
 */
                                       CATKnotVector           (const CATLONG32                 &amp; iIsPeriodic        ,
                                                                const CATLONG32                 &amp; iNbOfParameters    ,
                                                                const double                   *  iParameters        ,
                                                                const CATLONG32                 &amp; iContinuityOrder   ,
                                                                const CATLONG32                   iIndexOffset       = 0,
                                                                const CATTolerance              &amp; iTolObject         = CATGetDefaultTolerance()
                                                               );
/**
 * Copy Constructor.
 * &lt;br&gt;A linear transformation of the parameterization can be applied (optional)
 *  &lt;tt&gt;New parameter= iCoefficient * Old parameter + iShift&lt;/tt&gt;,
 * @param iKnotVectorToCopy
 * The knot vector to copy.
 * @param iCoefficient
 * The coeficient of the transformation.
 * @param iShift
 * The shift of the transformation.
 * @param iTolObject
 * The set of geometric and mathematical tolerances.
 */
                                       CATKnotVector           (const CATKnotVector             &amp; iKnotVectorToCopy  ,
                                                                      double                      iCoefficient       = 1.,
                                                                      double                      iShift             = 0.,
                                                                const CATTolerance              &amp; iTolObject         = CATGetDefaultTolerance()
                                                               ); 

/** 
 * Assignment operator.
 *&lt;br&gt;Desallocates and reallocates the left operand, except if it is the
 * same object as the right operand (&lt;tt&gt;iKnotVectorToAffect&lt;/tt&gt;).
 */
                       CATKnotVector &amp; operator =              (const CATKnotVector             &amp; iKnotVectorToAffect);

/**
 * Destructor.
 */
    virtual                           ~CATKnotVector           ();

//
//-----Read
//
/**
 * Tests if a CATKnotVector defines a periodic basis.
 * @return
 * &lt;dl&gt; &lt;dt&gt; &lt;tt&gt;FALSE&lt;/tt&gt;&lt;dd&gt; if the basis is not periodic
 *      &lt;dt&gt; &lt;tt&gt;TRUE&lt;/tt&gt; &lt;dd&gt; if the basis is periodic (NOT SUPPORTED)&lt;/dl&gt;
 */
    INLINE CATBoolean                  IsPeriodic              ()                                                      const ;

/**
 * Tests if a CATKnotVector defines a uniform basis.
 * @return
 * &lt;dl&gt; &lt;dt&gt; &lt;tt&gt;FALSE&lt;/tt&gt; &lt;dd&gt; if the basis is not uniform
 *      &lt;dt&gt; &lt;tt&gt;TRUE&lt;/tt&gt; &lt;dd&gt; if the basis is uniform &lt;/dl&gt;
 */
    INLINE CATBoolean                  IsUniform               ()                                                      const ;

/**
 * Returns the degree of the basis defined by &lt;tt&gt;this&lt;/tt&gt; CATKnotVector.
 * @return
 * The degree.
 */
    INLINE short                       GetDegree               ()                                                      const ;

/**
 * Returns the number of necessary control points for a nurbs using &lt;tt&gt;this&lt;/tt&gt;
 * CATKnotVector.
 * @return
 * The number of control points.
 */
    INLINE short                       GetNumberOfControlPoints()                                                      const ;

/**
 * Returns the number of arcs of a nurbs using &lt;tt&gt;this&lt;/tt&gt; CATKnotVector.
 * @return
 * The number of arcs.
 */
    INLINE short                       GetNumberOfArcs         ()                                                      const ;

/**
 * Returns the number of distinct knot values of &lt;tt&gt;this&lt;/tt&gt; CATKnotVector.
 * @return
 * The number of distinct knot values.
 */
    INLINE short                       GetNumberOfKnots        ()                                                      const ;

/**
 * Returns the multiplicity of &lt;tt&gt;this&lt;/tt&gt; CATKnotVector knot value.
 * @param iKnotNum
 * The knot number ( from 1 to &lt;tt&gt;KnotVector.GetNumberOfKnots &lt;/tt&gt;)
 */
           CATLONG32                   GetKnotMultiplicity     (const CATLONG32                 &amp; iKnotNum           ) const ;

/**
 * Returns the pointer to the knot values array of &lt;tt&gt;this&lt;/tt&gt; CATKnotVector.
 * @param oKnots
 * The array of the knots. As part of the knot vector, it is deleted at the knot vector deletion.
 */
     INLINE void                       GetKnots                (const double                   *&amp; oKnots             ) const ;

/** 
 * Returns the arc index offset.
 * @return
 * The arc index offset.
 */
     INLINE short                      GetIndexOffset          ()                                                      const;


/**
 * Returns the local parameters on the arc &lt;tt&gt;iArc&lt;/tt&gt;.
 * @param iArc
 * The arc number. Begins at &lt;tt&gt;CATKnotVector::GetIndexOffset&lt;/tt&gt;.
 * @param ioLocalStart
 * The parameter value at the begining of the arc.
 * @param ioLocalEnd
 * The parameter value at the end of the arc.
 */
            void                       GetInternalExtremities  (const CATLONG32                   iArc               ,
                                                                      double                    &amp; ioLocalStart       ,
                                                                      double                    &amp; ioLocalEnd         ) const;

/**
 * Returns the maximum local parameters and arc number of &lt;tt&gt;this&lt;/tt&gt; Knot vector.
 * @param ioStartArc
 * The start arc. 
 * @param ioLocalStart
 * The parameter value at the begining of &lt;tt&gt;ioStartArc&lt;/tt&gt;.
 * @param ioEndArc
 * The end arc. 
 * @param ioLocalEnd
 * The parameter value at the end of the arc of &lt;tt&gt;ioEndArc&lt;/tt&gt;. 
 */
            void                       GetMaxExtremities       (      CATLONG32                 &amp; ioStartArc         ,
                                                                      double                    &amp; ioLocalStart       ,
                                                                      CATLONG32                 &amp; ioEndArc           ,
                                                                      double                    &amp; ioLocalEnd         ) const;


//
//- Set
//

            void                       SetTolerance            (const CATTolerance              &amp; iTolObject          =CATGetDefaultTolerance());

/**
 * Copies a knot vector.
 * &lt;br&gt;Optionally, redefines the parameterization by a linear transformation:
 *  &lt;tt&gt;New parameter= iCoefficient * Old parameter + iShift&lt;/tt&gt;.
 * @param iKnotVectorToCopy
 * The knot vector to copy.
 * @param iCoefficient
 * The coefficient of the transformation.
 * @param iShift
 * The shift of the transformation.
 */
            void                       Set                     (const CATKnotVector             &amp; iKnotVectorToCopy  ,
                                                                      double                      iCoefficient       = 1.,
                                                                      double                      iShift             = 0.,
                                                                const CATTolerance              &amp; iTolObject         = CATGetDefaultTolerance()
                                                               ); 

/**
 * Redefines &lt;tt&gt;this&lt;/tt&gt; as a non uniform CATKnotVector.
 * @param iDegree
 * The new degree of the polynomial basis.
 * @param iIsPeriodic
 * The new periodicity.
 * &lt;br&gt;&lt;b&gt;legal values&lt;/b&gt;0.
 * @param iKnotsCount
 * The new number of knot values specified for the knot vector. The number of arcs
 * is &lt;tt&gt;iKnotsCount - 1&lt;/tt&gt;.
 * @param iKnots
 * The array of the new global parameter values at the end of each arc.
 * @param iMultiplicities
 * The array of the new corresponding multiplicities.
 * @param iIndexOffset
 * The new index for the first arc. 
 */
             void                      SetNonUniformKnotVector (const CATLONG32                 &amp; iDegree            ,
                                                                const CATLONG32                 &amp; iIsPeriodic        ,
                                                                const CATLONG32                 &amp; iKnotsCount        ,
                                                                const double                   *  iKnots             ,
                                                                const CATLONG32                *  iMultiplicities    ,
                                                                const CATLONG32                   iIndexOffset       = 0);

/**
 * Redefines &lt;tt&gt;this&lt;/tt&gt; as a uniform CATKnotVector .
 * @param iDegree
 * The new degree of the polynomial basis.
 * @param iIsPeriodic
 * The new periodicity.
 * &lt;br&gt;&lt;b&gt;legal values&lt;/b&gt;0.
 * @param iArcsCount
 * The new number of arcs.
 * @param iKnotStart
 * The new parameter value of the first knot.
 * @param iStep
 * The new uniform step value between two knots.
 * @param iIndexOffset
 * The new index for the first arc.
 */
            void                       SetUniformKnotVector    (const CATLONG32                 &amp; iDegree            ,
                                                                const CATLONG32                 &amp; iIsPeriodic        ,
                                                                const CATLONG32                 &amp; iArcsCount         ,
                                                                const double                      iKnotStart         = 0.,
                                                                const double                      iStep              = 1.,
                                                                const CATLONG32                   iIndexOffset       = 0
                                                               );

/**
 * Modifies a knot value of &lt;tt&gt;this&lt;/tt&gt; CATKnotVector.
 * @param iKnotNum
 * The knot number ( from 1 to &lt;tt&gt;KnotVector.GetNumberOfKnots&lt;/tt&gt; )
 * @param iNewKnotValue
 * The new knot value.
 */
            void                       SetKnotValue            (const CATLONG32                 &amp; iKnotNum           ,
                                                                const double                    &amp; iNewKnotValue      ,
                                                                const CATTolerance              &amp; iTolObject         = CATGetDefaultTolerance()
                                                               );

/**
 * Modifies a knot value multiplicity of &lt;tt&gt;this&lt;/tt&gt; CATKnotVector.
 * @param iKnotNum
 * The knot number ( from 1 to &lt;tt&gt;KnotVector.GetNumberOfKnots&lt;/tt&gt; ).
 * @param iNewKnotMultiplicity
 * The new knot multiplicity.
 */
            void                       SetKnotMultiplicity     (const CATLONG32                 &amp; iKnotNum           ,
                                                                const CATLONG32                 &amp; iNewKnotMultiplicity);

/**
 * Modifies the degree.
 * @param iDegree
 * The new degree value. If it is
 * higher, the continuity order between arcs remains unchanged.
 * If it is lower, the continuity order between arcs is limited to &lt;tt&gt;Degree -1&lt;/tt&gt;.
 */
            void                       SetDegree               (const CATLONG32                 &amp; iDegree            );

/** 
 * Modifies the arc index offset.
 * @param iOffset
 * The new value of the arc offset.
 */
     INLINE void                       SetIndexOffset          (const CATLONG32                 &amp; iOffset            );

/**
 * Adds knots at the left or the right of &lt;tt&gt;this&lt;/tt&gt; KnotVector.
 * @param iNbOfParameters
 * The number of knots to add.
 * @param iParameters
 * The array of parameters to add. These parameters must be either all strictly lower than the first knot, 
 * or all strictly  greater than the last knot.
 * @param iContinuityOrders
 * The &lt;tt&gt;iContinuityOrders&lt;/tt&gt; at the additionnal arc limits ( shift of one with the parameters array)
 * This method returns an error when &lt;tt&gt;this&lt;/tt&gt; is periodic.
 */
            void                       Extrapol                (const CATLONG32                 &amp; iNbOfParameters    ,
                                                                const double                   *  iParameters        ,
                                                                const CATLONG32                *  iContinuityOrders  = 0
                                                               );


//
//- Utilities
//
//
//---&gt;  positionning of one general parameter in knot vector interval
/**
 * Returns the arc number of this CATKnotVector global parameter.
 * @return
 * The arc numbers start at 1.
 */
            CATLONG32                  SearchArcFromParameter  (const double                    &amp; iGlobalParameter   )       const;
//---&gt;  convert Global parameter to local parameter ( each arc has
//              Local parameter between [0 and 1] ) 
/**
 * Retrieves the local parameter and the arc number of
 * this CATKnotVector global parameter.
 * @param ioLocalParameter
 * The local parameter on &lt;tt&gt;oArcNum&lt;/tt&gt;.
 * @param ioArcNum
 * The arc number starting at 1.
 */
    virtual void                       ConvertGlobalToLocalParameter
                                                               (const double                    &amp; iGlobalParameter   ,
                                                                      double                    &amp; ioLocalParameter   ,
                                                                      CATLONG32                 &amp; ioArcNum           )       const  ;
//---&gt;  convert Local parameter to global parameter ( each arc has
//              Local parameter between [0 and 1] ) 
 /**
 * Retrieves the global parameter associated with a local parameter and an
 * arc number of &lt;tt&gt;this&lt;/tt&gt; CATKnotVector.
 * @param iLocalParameter
 * The local parameter on &lt;tt&gt;iArcNum&lt;/tt&gt;.
 * @param iArcNum
 * The arc number.
 * @param ioGlobalParameter
 * The corresponding global parameter.
 */
    virtual void                       ConvertLocalToGlobalParameter
                                                               (const double                    &amp; iLocalParameter    ,
                                                                const CATLONG32                 &amp; iArcNum            ,
                                                                      double                    &amp; ioParameter        )       const;
//
//---&gt;  Give minimum continuity on a domain
/**
 * Tests whether a given continuity order of the related basis
 * is garanteed on a subparameter domain.
 * @param iContinuityOrder
 * The global continuity (0,1,2) to test.
 * @param iStartArcNum
 * The number of the first arc of the domain.
 * @param iEndArcNum
 * The number of the last arc of the domain.
 * @return
 * The result of the test.
 * &lt;br&gt;&lt;b&gt;Legal values&lt;/b&gt;: &lt;tt&gt;TRUE&lt;/tt&gt; if the continuity is garanteed, &lt;tt&gt;FALSE&lt;/tt&gt; otherwise.
 */
            CATBoolean                 IsContinuousOnDomain    (const CATLONG32                 &amp; iContinuityOrder   ,
                                                                const CATLONG32                 &amp; iStartArcNum       ,
                                                                const CATLONG32                 &amp; iEndArcNum         )       const;
//
// Advanced Utilities
//
/**
 * Retrieves an array of pointers on the polynoms defined by &lt;tt&gt;this&lt;/tt&gt; CATKnotVector
 * involved in one arc.
 *&lt;br&gt;For advanced use.
 * @param iArcNum
 * The arc number.
 * @param ioPolynom
 * The array of &lt;tt&gt;KnotVector.GetDegree + 1&lt;/tt&gt;
 * pointers on polynoms of degree &lt;tt&gt;KnotVector.GetDegree&lt;/tt&gt;.
 * These polynoms are reparametrized in &lt;tt&gt;[0,Knots[iArcNum +IndexOffset-1]-Knots[iArcNum +IndexOffset]]&lt;/tt&gt;
 * If a pointer is NULL in the array, the polynom is created and you then have to deleted it after use. 
 */
            void                       PolynomialBasisForOneArc(const CATLONG32                 &amp; iArcNum            ,
                                                                      CATMathPolynomX         **  ioPolynom          )       const;

/**
 * Retrieves a bi-dimensional array of pointers on the polynoms defined by
 * &lt;tt&gt;this&lt;/tt&gt; CATKnotVector.
 *&lt;br&gt;For advanced use.
 * @param ioPolynom
 * The array of &lt;tt&gt;KnotVector.GetNumberOfArcs&lt;/tt&gt;
 * pointers on array of &lt;tt&gt;KnotVector.GetDegree + 1&lt;/tt&gt;
 * pointers on polynoms of degree &lt;tt&gt;KnotVector.GetDegree&lt;/tt&gt;.
 * These polynoms are reparametrized in &lt;tt&gt;[0,Knots[ArcNum]-Knots[ArcNum-1]]&lt;/tt&gt; where Arcnum
 * is the current arc number in array.
 * If a pointer is NULL in the array, the polynom is created and you then have to deleted it after use.
 */
            void                       PolynomialBasisForAllArcs(     CATMathPolynomX        ***  ioPolynom          )       const;

/**
 * Returns the array of pointers on the polynoms defined by &lt;tt&gt;this&lt;/tt&gt; CATKnotVector
 * involved in one arc.
 *&lt;br&gt;For advanced use.
 * @param iArcNum
 * The arc number starting at 1.
 *&lt;br&gt;The returned array pointer is part of  CATKnotVector local data.
 *&lt;br&gt;This method must be recalled after any non const method applied on the CATKnotvector
 *&lt;br&gt;The array consists of &lt;tt&gt;KnotVector.GetDegree + 1&lt;/tt&gt;
 * pointers on polynoms of degree &lt;tt&gt;KnotVector.GetDegree&lt;/tt&gt;.
 * These polynoms are reparametrized in &lt;tt&gt;[0,Knots[iArcNum +IndexOffset-1]-Knots[iArcNum +IndexOffset]]&lt;/tt&gt;.
 */
      const CATMathPolynomX* const * GetPolynomialBasisForOneArc(const CATLONG32                &amp; iArcNum            )       const;

/**
 * Returns the array of pointers on the polynoms defined by &lt;tt&gt;this&lt;/tt&gt; CATKnotVector.
 *&lt;br&gt;For advanced use.
 *&lt;br&gt;The returned array pointer is part of  CATKnotVector local data.
 *&lt;br&gt;This method must be recalled after any non const method applied on the CATKnotvector
 * The array consists of  &lt;tt&gt;KnotVector.GetNumberOfArcs *( KnotVector.GetDegree + 1)&lt;/tt&gt;
 * pointers on polynoms of degree &lt;tt&gt;KnotVector.GetDegree&lt;/tt&gt;.
 * These polynoms are reparametrized in &lt;tt&gt;[0,Knots[ArcNum]-Knots[ArcNum-1]]&lt;/tt&gt; where Arcnum
 * is the current arc number in array.
 */
      const CATMathPolynomX* const * GetPolynomialBasisForAllArcs()                                                          const;

/**
 * Shifts a position into the expanded CATKnotVector.
 *&lt;br&gt;For advanced use.
 *&lt;br&gt;The extented knot vector is the array of knot values as many repeated as
 * the multiplicity order. The expanded vector of the introduction sample is
 * the following series:
 *&lt;dl&gt;&lt;dt&gt;expanded knot&lt;dd&gt;&lt;tt&gt; 0, 0, 0, 0, 2, 8, 9, 9, 9, 9&lt;/tt&gt;
 *    &lt;dt&gt;knot repetition&lt;dd&gt;&lt;tt&gt; 1, 2, 3, 4, 1, 1, 1, 2, 3, 4&lt;/tt&gt;&lt;/dl&gt;
 * @param ioKnotIndex
 * The index (starting at 0) of the knot value of a CATKnotVector to shift 
 *(resp being shifted).
 * @param ioKnotRep
 * The corresponding knot repetition value to shift (resp being shifted).
 * @param iMove
 * The shift to operate to the corresponding point into the expanded knot
 * vector.
 *&lt;pre&gt;
 * CATLONG32 ioKnotIndex = 0, ioKnotRep = 2, iMove = 5;
 * KnotVector.MoveInExtendedKnotVector(ioKnotIndex,ioKnotRep,iMove)
 * cout &lt;&lt; &quot;new knot index=&quot; &lt;&lt; ioKnotIndex &lt;&lt; endl; 
 * cout &lt;&lt; &quot;corresponding knot repetition=&quot; &lt;&lt; ioKnotRep &lt;&lt; endl;&lt;/pre&gt;
 * gives
 * &lt;pre&gt;&lt;i&gt;
 * new knot index= 3
 * corresponding knot repetition= 1&lt;/i&gt;&lt;/pre&gt;
 */
            void                       MoveInExtendedKnotVector(      CATLONG32                 &amp; ioKnotIndex        ,
                                                                      CATLONG32                 &amp; ioKnotRep          ,
                                                                const CATLONG32                 &amp; iMove              )       const;




  //&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
  //
  //               N O N - C A A             M E T H O D S
  //
  //&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
/** 
 * @nodoc
 * Returns the right index offset.
 * @return
 * The value of the right index offset.
 * WARNING : this data is not streamed.
 */
    INLINE  short                      GetRightIndexOffset     ()                                                            const;

/** 
 * @nodoc
 * Returns the original degree.
 * @return
 * The value of the original degree.
 * WARNING : this data is not streamed.
 */
    INLINE  short                      GetOriginalDegree       ()                                                            const;

/** 
 * @nodoc
 * Modifies the right index offset.
 * @param iRightOffset
 * The new value of the right index offset.
 * WARNING : this data is not streamed.
 */
    INLINE void                        SetRightIndexOffset     (      short                       iRightOffset       );

/** 
 * @nodoc
 * Modifies the original degree.
 * @param iOriginalDegree
 * The new value of the Original Degree.
 * WARNING : this data is not streamed.
 */
    INLINE  void                       SetOriginalDegree       (      short                       iOriginalDegree    );


/**
 * @nodoc
 * Returns the array of pointers on the Shifted polynoms defined by this CATKnotVector
 * involved in one arc.
 *&lt;br&gt;For advanced use.
 * It works exactely as equivalent non shifted method except the output type
 * The advantage of shifted polynom is a more accurate evaluation .  
 */
     const  CATMathPolynomX * const *  GetShiftedPolynomialBasisForOneArc (const CATLONG32      &amp; iArcNum             )      const;

/**
 * @nodoc
 * Returns the array of pointers on the Shifted polynoms defined by this CATKnotVector.
 *&lt;br&gt;For advanced use.
 * It works exactely as equivalent non shifted method except the output type
 * The advantage of shifted polynom is a more accurate evaluation .  
 */ 
    const   CATMathPolynomX * const *  GetShiftedPolynomialBasisForAllArcs()                                                 const;

/**
 * @nodoc
 * Returns the global parameter corresponding approximatively to
 * a control point.
 *&lt;br&gt;For advanced use. A control point does not belong to the curve, it is the
 * raison why the parameter is approximated.
 *&lt;br&gt;The number of the control point starts from 1.
 */
            double                     ParameterAssociatedToVertexRank (const CATLONG32         &amp; iExpandedKnotNum   )       const;

/**
 * @nodoc
 * Retrieves the arcs where a basis function is not equal to 0.
 *&lt;br&gt;The numbers start at 1.
 *&lt;br&gt;For advanced use.
 */
            void                       ArcsDependingOnOneVertex        (const CATLONG32         &amp; iExpandedKnotNum   ,
                                                                              CATLONG32         &amp; oFirstArcNum       ,
                                                                              CATLONG32         &amp; oLastArcNum        )       const;

/**
 * Retrieves the first control point which acts on an arc.
 *&lt;br&gt;There is always &lt;tt&gt;Degree+1&lt;/tt&gt; control points acting on one arc. The
 * last point to act is then &lt;tt&gt;FirstVertexNum+Degree&lt;/tt&gt;.
 *&lt;br&gt;For advanced use.
 *&lt;br&gt;The numbers start at 1.
 */
            void                       FirstVertexForOneArc            (const CATLONG32         &amp; iArcNum            ,
                                                                              CATLONG32         &amp; oFirstVertexNum    )       const;

/**
 * @nodoc
 * Returns the knot index from the virtual knot index.
 *&lt;br&gt;For advanced use.This method allows to access actual storage index when 
 * working in periodic case. In this case, the knots values are periodic, 
 * but only  one period is stored.
 * @param iVirtualKnotIndex
 * The index (starting at 0) into the virtual knot values array. 
 * @return 
 * The real index (starting start at 0) of the knot value .
 */
            CATLONG32                  VirtualToReal           (const CATLONG32                 &amp; iVirtualKnotIndex  )       const;
//---&gt;  Give real Vertex Index from Virtual Vertex index
/**
 * @nodoc
 * Returns the vertex index from the expanded virtual vertex index
 *&lt;br&gt;For advanced use. This method allows to access actual storage index when 
 * working in periodic case. In this case, the control points are periodic, 
 * but only  one period is stored.
 * @param iExpandedVirtualKnotIndex
 * The index (starting at 0) into the expanded virtual vertices array.
 * @return 
 * The real index (starting at 0) of the vertex.
 */
            CATLONG32                  VirtualToRealVertex     (const CATLONG32                 &amp; iExpandedVirtualKnotIndex) const;

/**
 * @nodoc
 * This is a service method to the method &quot;PolynomialsDiffByKnots&quot;. 
 * oSmallSize: Tells the needed size for each of ioKnotIndices,
 *             ioVertIndices and ioLocalNrOfPoly.
 * oBigSize:   Tells the number of differentiated polynomials. 
 */

            void                       SizeOfDiffByKnots       (      CATLONG32                 &amp; oSmallSize         ,
                                                                      CATLONG32                 &amp; oBigSize           ,
                                                                const CATLONG32                *  iVariableKnots     = NULL,
                                                                const CATLONG32                *  iArcs              = NULL ) const ;

/**
 * @nodoc
 * Polynomials (Poly) differentiated with respect to knots (Knot).
 * (Conceptually: D(Poly)/D(Knot).) 
 * 
 * GENERAL:         Arc, vertex and knot indices are supposed to 
 *                  start at zero, both at input and output!
 *                  The shift value, at reulting polynomials, are
 *                  set to the centre of the parameter inteval of
 *                  the corresponding arc.
 *
 * IN ( optional ):
 * 
 * iArcs:           The arcs where the polynomials are calculated. 
 *                  If not given we consider all = 1, 1, ..., 1.
 *
 * iVariableKnots:  The variable knots. If not given we consider 
 *                  all except the ends = 0, 1, 1, ..., 1, 0.
 * 
 * OUT ( allocate all objects first! See the method
 *                  &quot;SizeOfDiffByKnots&quot; ) :
 *     
 * ioDPolyDKnot:    The differentiated polynoms.
 * 
 * For variable knots, not being at the arc end points, less than 
 * _degree+1 poynomials and vertices are relevant. To store only 
 * non zero polynomials and keep order, we use the following 
 * arrays. To examplify, we suppose that iArc[i] = 1:
 *
 * ioLocalNrAtArc:  At the i:th arc this tells the number of 
 *                  relevant knots. The succesive acumulation of
 *                  these numbers tells, for this arc, the start 
 *                  and end index in the following three arrays:
 * 
 * ioKnotIndices    The indices of the relevant knots at this arc. 
 *                  
 * ioLocalNrOfPoly: The number of non zero polynomials for each
 *                  knot at this arc.
 *
 * ioVertIndices:   The indices of the first vertices related to   
 *                  each knot at this arc.
 * 
 * OPTIONS: ioPoly: During the differentiation, also all steps in
 *                  the calculation of the non differentiated 
 *                  polynomials must be done. However, this do not
 *                  update the private data of &quot;this&quot; knot vector. 
 *
 *      iWorkArray: For repeated use a repeated internal allocation 
 *                  may be avoided by supporting this array. A safe 
 *                  size is: ( order*order + 1 )*( 2*order - 1 ).
 *
 */

             void                      PolynomialsDiffByKnots  (      CATMathPolynomX         **  ioDPolyDKnot       ,
                                                                      CATLONG32                *  ioLocalNrAtArc     ,
                                                                      CATLONG32                *  ioKnotIndices      ,
                                                                      CATLONG32                *  ioLocalNrOfPoly    ,
                                                                      CATLONG32                *  ioVertIndices      ,
                                                                      CATLONG32                *  iVariableKnots     = NULL,
                                                                      CATLONG32                *  iArcs              = NULL,
                                                                      CATMathPolynomX         **  ioPoly             = NULL,
                                                                      double                   *  iWorkArray         = NULL ) const ;

/** @nodoc */
     INLINE  CATULONG32                GetSize                 ()                                                             const;

/** @nodoc  */
             size_t                    GetEstimatedMemoryBytes ()                                                             const;

/** @nodoc  */
    virtual  size_t                    GetDynamicMemoryBytes   ()                                                             const;

/** @nodoc  */
    virtual size_t                     GetStaticMemoryBytes    ()                                                             const;

// Pour stream compact

/** @nodoc  */
            int                        GetStreamSortingKey     (      CATCGMStream              &amp; Str                )        const;

/** @nodoc  */
            int                        HasCommonStreamData     (const CATKnotVector            *  ipKVToCompare      ,
                                                                      CATCGMStream              &amp; Str                )        const;

/** @nodoc  */
            size_t                     EstimateCommonStreamDataSize(  int                         iSimilarityLevel   ,
                                                                      CATCGMStream              &amp; Str                )        const;

/** @nodoc  */
            void                       CopyCommonStreamData    (const CATKnotVector            *  ipKVToCompare      ,
                                                                      int                         iSimilarityLevel   ,
                                                                      CATCGMStream              &amp; Str                );


private:

//========Data==================
            short                      _Degree            ;
            CATBoolean                 _IsPeriodic        ;
            CATBoolean                 _IsUniform         ;
            short                      _KnotsCount        ;
            short                      _VerticesCount     ;
            short                      _CurrentLoop       ;
            short                      _CurrentArcRank    ;
            double                   * _Knots             ; // [KnotsCount]
            short                    * _Multiplicities    ; // [KnotsCount]
            short                      _Offset            ; //
            short                      _RightOffset       ; // (Not streamed)
            short                      _OriginalDegree    ; // (Not streamed)
            //                         ---&gt; Optimization data (Not streamed)
            short                      _Optimization_Data ; // =1 if Optimization data allocated and initialized
            short                    * _IsUpToDate        ; // basis for arc are up to date
            CATMathPolynomX         ** _Polynoms          ; // basis for arc (_Polynoms[ArcsCount*Order])
            short                    * _IsUpToDateShifted ; // basis for arc are up to date
            CATMathPolynomX         ** _ShiftedPolynoms   ; // basis for arc (_Polynoms[ArcsCount*Order])

    const   CATTolerance             * _TolObject         ;

  // Debug and management. Do not move this data *_R18Restricted in R18:
  // must be extraneous data at the end of the class, after all old data already used in CAA applications
            int                        _KnotVectorNumber_R18Restricted ;
            int                        _InternalUse_R18Restricted ;
public:
            int                        _PrivateDoNotUseNotScaled_R18Restricted ;

private:

  //int _SpecialCaseStandardScaleAssumed ; //NLD180108
//========Private Methods==================
  //---&gt;  Control of data consistency.
            CATError*                  ControlKnotVector       (      int                         iFreeDataIfError   ,
                                                                const CATTolerance             *  iTolObject         = 0,
                                                                      int                         iSpecialCaseStandardScaleAssumed = 0);

  //---&gt;  Optimization Data Management
            void                       InitOptimizationData    ();

            void                       DelOptimizationData     (); // CAUTION: direct call from some friend classes

            void                       UpdatePolynomsForOneArc (      CATLONG32                   iIsShifted         ,
                                                                      CATLONG32                   iArcIndex          )       const;

            void                       UpdatePolynomsForAllArcs(      CATLONG32                   iIsShifted         )       const;

            void                       InitData                ();

            // Set Data for Uniform KnotVector
            void                       SetData                 (const CATTolerance              &amp; iTolObject         ,
                                                                      CATError                 *&amp; oError             ,
                                                                const CATLONG32                 &amp; iDegree            ,
                                                                const CATLONG32                 &amp; iIsPeriodic        ,
                                                                const CATLONG32                 &amp; iArcsCount         ,
                                                                const double                      iKnotStart         ,
                                                                const double                      iStep              ,
                                                                const CATLONG32                   iIndexOffset       );

            // Set Data for NonUniform KnotVector
            void                       SetData                 (const CATTolerance              &amp; iTolObject         ,
                                                                      CATError                 *&amp; oError             ,
                                                                const CATLONG32                 &amp; iDegree            ,
                                                                const CATLONG32                 &amp; iIsPeriodic        ,
                                                                const CATLONG32                 &amp; iKnotsCount        ,
                                                                const double                   *  iKnots             ,
                                                                const CATLONG32                *  iMultiplicities    ,
                                                                const CATLONG32                   iIndexOffset
                                                               );



//---&gt;  Initialize the number of control points.
            void                       ComputeNumberOfControlPoints ();


//////////////////////////////////////////////////////////////////////
// deBoor-Cox metod generalized to differentiation. Calculates 
// differentiated polynomials at one arc.
//
// Input:
// iK:       Let r be the degree. iK is a part of an extended knot 
//           vector such that [iK[r], iK[r+1]] is the relevant interval 
//           of evaluation. For optimal precision, iK is recomended to 
//           be &quot;shifted&quot;, i.e. moved such that iK[r] = -iK[r+1].
// iNr:      The number of relevant indices in &quot;iDiffInd&quot; next.
// iDiffInd: The indices of variable knots in iK.
//
// Output:
// ioPoly:   The B-spline basis functions.
// ioDpol:   The basis functiond differentiated with respedt to the 
//           variable knots in iK.      
//////////////////////////////////////////////////////////////////////

            void                       DiffOfBasePolynomials   (const double                   *  iK                 ,
                                                                const CATLONG32                   iNr                ,
                                                                const CATLONG32                *  iDiffInd           ,
                                                                      double                   *  ioPoly             ,
                                                                      double                   *  ioDpol             )       const ;

//////////////////////////////////////////////////////////////////
// Administrates the calculation of differentiated polynomials
// at one arc. 
// Interfaces between the public method &quot;PolynomialsDiffByKnots&quot; 
// and the private method &quot;DiffOfBasePolynomials&quot;
//
// iVariableKnots:   See &quot;PolynomialsDiffByKnots&quot;.
// iArcNr:           Obvious.
// ioPoly &amp; ioDpoly: See &quot;DiffOfBasePolynomials&quot;
// ioKnot:           Work area vector of size 2*_Degree 
// ioVariKnot:       Work area vector of size 2*_Degree 
//////////////////////////////////////////////////////////////////

            void                       DiffPolynomials         (const CATLONG32                *  iVariableKnots     ,
                                                                const CATLONG32                   iArcNr             ,
                                                                      double                   *  ioPoly             ,
                                                                      double                   *  ioDpoly            ,
                                                                      double                   *  ioKnot             ,
                                                                      CATLONG32                *  ioVariKnot         ) const ;


//friend class CATSurfaceCGM;
//friend class CATCurveCGM;
//friend class CATCGMDebugImpl;
  friend class CATKnotVectorInternal;

};

//
// ------------------------------------------------------------------------------
//
// Inlines
//
// ------------------------------------------------------------------------------
//
INLINE CATBoolean CATKnotVector::IsPeriodic               ()                                                      const
{
 return _IsPeriodic;
}
//
// ------------------------------------------------------------------------------
INLINE CATBoolean CATKnotVector::IsUniform                ()                                                      const
{
 return _IsUniform;
}
//
// ------------------------------------------------------------------------------
INLINE short      CATKnotVector::GetDegree                ()                                                      const
{
 return _Degree;
}
//
// ------------------------------------------------------------------------------
INLINE short      CATKnotVector::GetNumberOfControlPoints ()                                                      const
{
 return  _VerticesCount;
}
//
// ------------------------------------------------------------------------------
INLINE short      CATKnotVector::GetNumberOfArcs          ()                                                      const
{
 return _KnotsCount - 1;
}
//
// ------------------------------------------------------------------------------
INLINE short      CATKnotVector::GetNumberOfKnots         ()                                                      const
{
 return _KnotsCount;
}
//
// ------------------------------------------------------------------------------
INLINE void       CATKnotVector::GetKnots                 ( const double *&amp;ioKnots)                               const
{
 ioKnots = _Knots;
}
// 
//---------------------------------------------
INLINE short      CATKnotVector::GetIndexOffset           ()                                                      const
{
 return _Offset;
}
// 
//--------------------------------------------------------------------------------
INLINE void       CATKnotVector::SetIndexOffset           (const CATLONG32 &amp;iIndexOffset) 
{
 _Offset = (short)iIndexOffset;
}
//
//---------------------------------------------
INLINE short      CATKnotVector::GetRightIndexOffset      ()                                                      const
{
  return _RightOffset;
}
//
//--------------------------------------------------------------------------------
INLINE void       CATKnotVector::SetRightIndexOffset      (short iRightOffset)
{
  _RightOffset = iRightOffset;
}
//
//--------------------------------------------------------------------------------
INLINE short      CATKnotVector::GetOriginalDegree        ()                                                      const
{
  return _OriginalDegree;
}
//
//--------------------------------------------------------------------------------
INLINE void       CATKnotVector::SetOriginalDegree        (short iOriginalDegree)
{
 _OriginalDegree = iOriginalDegree;
}

//--------------------------------------------------------------------------------
INLINE CATULONG32 CATKnotVector::GetSize                  ()                                                      const
{
 return (CATULONG32 ) GetDynamicMemoryBytes();
}

// ------------------------------------------------------------------------------
// static methods
//--------------------------------------------------------------------------------
// avoids knot vector domain control for knot vectors not depending on scale
ExportedByYP00IMPL void SetNotScaledKnotVector(CATKnotVector&amp; iKnotVector) ;


#endif
</div>
    
    <div class="navigation">
        <div><a href="CATIsoParameter.html">‚Üê ‰∏ä‰∏ÄÈ°µ: CATIsoParameter.h</a></div>
        <div><a href="CATLaw.html">‰∏ã‰∏ÄÈ°µ: CATLaw.h ‚Üí</a></div>
    </div>
</body>
</html>