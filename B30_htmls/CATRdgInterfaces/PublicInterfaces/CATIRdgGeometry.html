<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CATRdgInterfaces/PublicInterfaces/CATIRdgGeometry.h</title>
    <style>
        body {
            font-family: 'Consolas', 'Monaco', monospace;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .header {
            background-color: #2c3e50;
            color: white;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .navigation {
            display: flex;
            justify-content: space-between;
            margin: 15px 0;
            padding: 10px;
            background-color: #ecf0f1;
            border-radius: 5px;
        }
        .navigation a {
            color: #2980b9;
            text-decoration: none;
            padding: 5px 10px;
            background-color: white;
            border-radius: 3px;
            border: 1px solid #bdc3c7;
        }
        .navigation a:hover {
            background-color: #3498db;
            color: white;
        }
        .content {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            border: 1px solid #bdc3c7;
            white-space: pre-wrap;
            font-size: 14px;
            line-height: 1.4;
            overflow-x: auto;
        }
        .back-to-index {
            text-align: center;
            margin: 15px 0;
        }
        .back-to-index a {
            color: #27ae60;
            text-decoration: none;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>CATRdgInterfaces/PublicInterfaces/CATIRdgGeometry.h</h1>
    </div>
    
    <div class="navigation">
        <div><a href="CATIRdgEnvironment.html">‚Üê ‰∏ä‰∏ÄÈ°µ: CATIRdgEnvironment.h</a></div>
        <div><a href="CATIRdgLight.html">‰∏ã‰∏ÄÈ°µ: CATIRdgLight.h ‚Üí</a></div>
    </div>
    
    <div class="back-to-index">
        <a href="index.html">üìÅ ËøîÂõûÁõÆÂΩï</a>
    </div>
    
    <div class="content">#ifndef CATIRdgGeometry_h
#define CATIRdgGeometry_h

// COPYRIGHT DASSAULT SYSTEMES 2003

/**
 * @CAA2Level L0
 * @CAA2Usage U3
 */

#include &quot;CATRdgItfCPP.h&quot;
#include &quot;CATIRdgObject.h&quot;
#include &quot;sequence_CATBaseUnknown_ptr.h&quot;


#ifndef LOCAL_DEFINITION_FOR_IID
extern ExportedByCATRdgItfCPP IID IID_CATIRdgGeometry;
#else
extern &quot;C&quot; const IID IID_CATIRdgGeometry;
#endif

/** 
 * Interface for scene geometry.
 * &lt;b&gt;Role&lt;/b&gt;:
 * This is the interface that every Geometric rep implements.
 * It is used to access the data needed for rendering.
 */

class ExportedByCATRdgItfCPP CATIRdgGeometry : public CATIRdgObject
{
/** @nodoc */
  CATDeclareInterface;

  public:

/**
 * Returns the face count.
 * @param oCount
 *   The count of faces.
 * @return
 *   An HRESULT value.
 *   &lt;br&gt;&lt;b&gt; Legal values&lt;/b&gt;:
 *   &lt;li&gt;&lt;tt&gt;S_OK&lt;/tt&gt; the operation succeeded &lt;/li&gt;
 *   &lt;li&gt;&lt;tt&gt;E_FAIL&lt;/tt&gt; otherwise &lt;/li&gt;.
 */
    virtual HRESULT GetFaceCount(int &amp;oCount) = 0;

/**
 * Returns the face groups.
 * @param oFaceGroups
 *   The array containing the list of face index 
 *   belonging to each group. Faces with the same
 *   color belong to the same group.
 * @param oGroupSize
 *   The size of each group. 
 * @param oGroupCount
 *   The count of groups. 
 * @return
 *   An HRESULT value.
 *   &lt;br&gt;&lt;b&gt; Legal values&lt;/b&gt;:
 *   &lt;li&gt;&lt;tt&gt;S_OK&lt;/tt&gt; the operation succeeded &lt;/li&gt;
 *   &lt;li&gt;&lt;tt&gt;E_FAIL&lt;/tt&gt; otherwise &lt;/li&gt;.
 */
    virtual HRESULT GetFaceGroups(int ***oFaceGroups, int **oGroupSize, int &amp;oGroupCount) = 0;

/**
 * Returns the bounding box of a face.
 * @param iFace
 *   The face index. The index ranges from
 *   &lt;code&gt;0.&lt;/code&gt; to &lt;code&gt;FaceCount-1&lt;/code&gt;.
 * @param oMin
 *   The min corner.
 * @param oMax
 *   The max corner.
 * @return
 *   An HRESULT value.
 *   &lt;br&gt;&lt;b&gt; Legal values&lt;/b&gt;:
 *   &lt;li&gt;&lt;tt&gt;S_OK&lt;/tt&gt; the operation succeeded &lt;/li&gt;
 *   &lt;li&gt;&lt;tt&gt;E_FAIL&lt;/tt&gt; otherwise &lt;/li&gt;.
 */
    virtual HRESULT GetFaceBoundingBox(int iFace, float oMin[3], float oMax[3]) = 0;

/**
 * Returns the material attached to the face.
 * @param iFace
 *   The face index. The index ranges from
 *   &lt;code&gt;0.&lt;/code&gt; to &lt;code&gt;FaceCount-1&lt;/code&gt;.
 * @param oMaterial
 *   The material attached. After use, a Release() must be made.
 * @return
 *   An HRESULT value.
 *   &lt;br&gt;&lt;b&gt; Legal values&lt;/b&gt;:
 *   &lt;li&gt;&lt;tt&gt;S_OK&lt;/tt&gt; the operation succeeded &lt;/li&gt;
 *   &lt;li&gt;&lt;tt&gt;E_FAIL&lt;/tt&gt; otherwise &lt;/li&gt;.
 */
    virtual HRESULT GetFaceMaterial(int iFace, CATIRdgMaterial **oMaterial) = 0;

/**
 * Returns the stickers attached to the face.
 * @param oStickers
 *   The list of stickers. After use, a Release() must be made 
 *   on each element and the list must be deleted.
 * @return
 *   An HRESULT value.
 *   &lt;br&gt;&lt;b&gt; Legal values&lt;/b&gt;:
 *   &lt;li&gt;&lt;tt&gt;S_OK&lt;/tt&gt; the operation succeeded &lt;/li&gt;
 *   &lt;li&gt;&lt;tt&gt;E_FAIL&lt;/tt&gt; otherwise &lt;/li&gt;.
 */
    virtual HRESULT GetFaceStickers(int iFace, CATLISTP(CATBaseUnknown) **oStickers) = 0;

/**
 * Returns the tesselation data from the geometry.
 * @param iFace
 *   The face index. The index ranges from
 *   &lt;code&gt;0.&lt;/code&gt; to &lt;code&gt;FaceCount-1&lt;/code&gt;.
 * @param oAllocate
 *    Flag specifiying whether retrieved data is copied or not.
 *    &lt;br&gt;&lt;b&gt;Legal values&lt;/b&gt;:
 *      &lt;dl&gt;
 *        &lt;dt&gt;1&lt;/dt&gt;
 *          &lt;dd&gt;retrieved data is copied.&lt;/dd&gt;
 *        &lt;dt&gt;0&lt;/dt&gt;
 *          &lt;dd&gt;retrieves references on data.&lt;/dd&gt;
 *      &lt;/dl&gt;
 *    oAllocate flag is always returned equal to 0: Get() only
 *    retrieves references on stored data.
 * @param oVertices
 *    Retrieves an array made of face vertices coordinates: XYZXYZXYZ...
 *    Its size is equal to three times the geometry vertices number.
 * @param oVerticesArraySize
 *    Retrieves the size, in floats, of the &lt;tt&gt;oVertices&lt;/tt&gt; array. Equal to three times the
 *    vertices number.
 *    If information on vertices is shared with another element,
 *    returned size for this parameter is equal to 0.
 * @param oNormals
 *    Retrieves an array made of normals coordinates. It is organized as &lt;tt&gt;oVertices&lt;/tt&gt; : one vertex has exactly
 *    one normal at the same field entry.
 * @param oNormalsArraySize
 *    Retrieves The size, in floats, of the &lt;tt&gt;oNormal&lt;/tt&gt; array. Equal to three times the number
 *    of normals.
 *    If information on normals is shared with another element,
 *    returned size for this parameter is equal to 0.
 * @param oTriangleIndices
 *    Retrieves the array used to store the single triangles vertices. Each of its field represents
 *    a vertex index, in the &lt;tt&gt;oVertices&lt;/tt&gt; array.
 *    As,  we find, in the &lt;tt&gt;*oVertices&lt;/tt&gt; array, the XYZ coordinates for each
 *    vertex, the indices used to designate the vertices are multiples of three.
 *    So, the first three indices of the *oTriangleIndices array, are the indices of the geometry first
 *    single triangle three vertices.
 *    &lt;pre&gt;
 *
 *                 -----------------       
 *                |*oTriangleIndices |
 *                 -----------------
 *                |       i00       |   }
 *                |       i01       |   } triangle 0 defined by index i00, i01 and i02
 *                |       i02       |   }
 *                |        .        |
 *                |        .        |
 *                |       ij0       |   }
 *                |       ij1       |   } triangle j defined by index ij0, ij1 and ij2. 
 *                |       ij2       |   }
 *                |        .        |
 *                |        .        |
 *                 -----------------
 *
 *   &lt;/pre&gt;
 *    For example, index ij0 enables access to the geometry j-th single triangle first vertex,
 *    which coordinates are X = *oVertices[ij0], Y = *oVertices[ij0+1] and Z = *oVertices[ij0+2], and
 *    which normal has coordinates Nx = *oNormals[ij0], Ny = *oNormals[ij0+1] and Nz = *oNormals[ij0+2].
 * @param oNbTriangle
 *    Retrieves the number of single triangles in the geometry. 
 * @param oTriangleStripIndices
 *    Retrieves the array used to store the geometry triangles strips vertices. Each field contains a
 *    vertex index, belonging to one of the strips, in the oVertices array.  As, we find, in the
 *    &lt;tt&gt;oVertices&lt;/tt&gt; array, the XYZ coordinates for each
 *    vertex, the indices used to designate the vertices are multiples of three.
 *    &lt;pre&gt;
 *
 *
 *                   ----------------------
 *                  | oTriangleStripIndices |
 *                   ----------------------
 *                  |          i00         |   }
 *                  |          i01         |   } first triangle strip defined
 *                  |           .          |   } by the first n1 indices
 *                  |           .          |   }
 *                  |          i0n1        |   }
 *                  |           .          |
 *                  |           .          |
 *                  |           .          |   
 *                  |          ij0         |   }
 *                  |          ij1         |   }
 *                  |           .          |   } triangle strip j
 *                  |           .          |   } with nj vertices
 *                  |          ijnj        |   }
 *                   ----------------------
 *
 *
 *    &lt;/pre&gt; 
 *    For example, index ij0 allows to access to the geometry j-th strip first vertex 
 *    wich coordinates are X = *oVertices[ij0], Y = *oVertices[ij0 + 1] and Z = *oVertices[ij0 + 2], and
 *    which normal coordinates are Nx = *oNormals[ij0], Ny = *oNormals[ij0 + 1] and Nz = *oNormals[ij0 + 2].
 * @param oNbTriangleStrip
 *    Retrieves the number of geometry triangles strips.
 * @param oNbVertexPerTriangleStrip
 *    Retrieves an array containing the number of vertices for each geometry triangles strip.
 *    The size of this array is equal to &lt;tt&gt;*oNbTriangleStrip&lt;/tt&gt;. For example, the first strip
 *    is made with &lt;tt&gt;*oNbVertexPerTriangleStrip[0]&lt;/tt&gt; vertices.
 *    &lt;pre&gt;
 *                --------------------------
 *               |*oNbVertexPerTriangleStrip|
 *                --------------------------
 *               |             n1           |
 *               |             .            |
 *               |             .            |   m = Number of triangle strips(*oNbTriangleStrip)
 *               |             nm           |   nm = number of vertices of the m-th strip. (*oNbVertexPerTriangleStrip[m]
 *                --------------------------    
 *
 *   &lt;/pre&gt;
 * @param oTriangleFanIndices
 *    Retrieves the array used to store the geometry triangles fans vertices. Each field contains a
 *    vertex index, belonging to one of the fans, in the &lt;tt&gt;oVertices&lt;/tt&gt; array.  As, we find, in the
 *    &lt;tt&gt;oVertices&lt;/tt&gt; array, the XYZ coordinates for each
 *    vertex, the indices used to designate the vertices are multiples of three.
 *    &lt;pre&gt;
 *
 *
 *                   ----------------------
 *                  | *oTriangleFanIndices  |
 *                   ----------------------
 *                  |          i00         |   }
 *                  |          i01         |   } first triangle fan defined
 *                  |           .          |   } by the first n1 indices
 *                  |           .          |   }
 *                  |          i0n1        |   }
 *                  |           .          |
 *                  |           .          |
 *                  |           .          |   
 *                  |          ij0         |   }
 *                  |          ij1         |   }
 *                  |           .          |   } triangle fan j
 *                  |           .          |   } with nj vertices
 *                  |          ijnj        |   }
 *                   ----------------------
 *
 *
 *    &lt;/pre&gt; 
 *    For example, index ij0 allows to access to the geometry j-th fan first vertex
 *    wich coordinates are X = *oVertices[ij0], Y = *oVertices[ij0 + 1] and Z = *oVertices[ij0 + 2], and
 *    which normal coordinates are Nx = *oNormals[ij0], Ny = *oNormals[ij0 + 1] and Nz = *oNormals[ij0 + 2].
 *    Each ij0, j in [0, jn], represents the j-th fan center.
 * @param oNbTriangleFan
 *    Retrieves the number of geometry triangles fans.
 * @param oNbVertexPerTriangleFan
 *    Retrieves the array containing the number of vertices for each 3D bouning GP triangles fan.
 *    The size of this array is equal to &lt;tt&gt;*oNbTriangleFan&lt;/tt&gt;. For example, the first fan
 *    is made with &lt;tt&gt;*oNbVertexPerTriangleStrip[0]&lt;/tt&gt; vertices.
 *    &lt;pre&gt;
 *                --------------------------
 *               | *oNbVertexPerTriangleFan |
 *                --------------------------
 *               |             n1           |
 *               |             .            |
 *               |             .            |   m = Number of triangle fans(*oNbTriangleFan)
 *               |             nm           |   nm = number of vertices of the m-th fan. (*oNbVertexPerTriangleFan[m]
 *                --------------------------    
 *
 *   &lt;/pre&gt;
 * @return
 *   An HRESULT value.
 *   &lt;br&gt;&lt;b&gt; Legal values&lt;/b&gt;:
 *   &lt;li&gt;&lt;tt&gt;S_OK&lt;/tt&gt; the operation succeeded &lt;/li&gt;
 *   &lt;li&gt;&lt;tt&gt;E_FAIL&lt;/tt&gt; otherwise &lt;/li&gt;.
 */
    virtual HRESULT GetFace(int     iFace,
                            int    *oAllocate,
                            float **oVertices,
                            int    *oVerticesArraySize,
                            float **oNormals,
                            int    *oNormalsArraySize,
                            int   **oTriangleIndices,
                            int    *oNbTriangle,
                            int   **oTriangleStripIndices,
                            int    *oNbTriangleStrip,
                            int   **oNbVertexPerTriangleStrip,
                            int   **oTriangleFanIndices,
                            int    *oNbTriangleFan,
                            int   **oNbVertexPerTriangleFan) = 0;

/**
 * Clears tesselation data by deallocating memory.
 * @param iFace
 *   The face index. The index ranges from
 *   &lt;code&gt;0.&lt;/code&gt; to &lt;code&gt;FaceCount-1&lt;/code&gt;.
 * @param iAllocate
 *   Flag to specify whether the data you are passing on were
 *   allocated by this geometry or not.
 *    &lt;br&gt;&lt;b&gt;Legal values&lt;/b&gt;:
 *      &lt;dl&gt;
 *        &lt;dt&gt;1&lt;/dt&gt;
 *          &lt;dd&gt;passed data were allocated by this geometry and must be deallocated&lt;/dd&gt;
 *        &lt;dt&gt;0&lt;/dt&gt;
 *          &lt;dd&gt;passed data were not allocated by this geometry and nothing is done&lt;/dd&gt;
 *      &lt;/dl&gt;
 * @param iVertices
 *   Array of geometry vertices coordinates.
 * @param iVerticesArraySize
 *   Size of &lt;tt&gt;iVertices&lt;/tt&gt; array. If equal to zero, &lt;tt&gt;iVertices&lt;/tt&gt; is not deleted.
 * @param iNormals
 *   Array of geometry normals coordinates.
 * @param iNormalsArraySize
 *   Size of &lt;tt&gt;iNormals&lt;/tt&gt; array. If equal to zero, &lt;tt&gt;iNormals&lt;/tt&gt; is not deleted.
 * @param iTriangleIndices
 *   Array of geometry single triangles vertices coordinates.
 * @param iNbTriangle
 *   The number of single triangles in the geometry. If equal to zero, &lt;tt&gt;iTriangleIndices&lt;/tt&gt;
 *   is not deleted.
 * @param iTriangleStripIndices
 *   Array of geometry strips triangles vertices coordinates.
 * @param iNbTriangleStrip
 *   The number of triangles strips in the geometry. If equal to zero, &lt;tt&gt;iTriangleStripIndices&lt;/tt&gt; and
 *   &lt;tt&gt;iNbVertexPerTriangleStrip&lt;/tt&gt; are not deleted.
 * @param iNbVertexPerTriangleStrip
 *   Array containing the number of vertices for each geometry triangles strip. 
 * @param iTriangleFanIndices
 *   Array of geometry fans triangles vertices coordinates.
 * @param iNbTriangleFan
 *   The number of triangles fans in the geometry. If equal to zero, &lt;tt&gt;iTriangleFanIndices&lt;/tt&gt; and
 *   &lt;tt&gt;iNbVertexPerTriangleFan&lt;/tt&gt; are not deleted.
 * @param iNbVertexPerTriangleFan
 *   Array containing the number of vertices for each geometry triangles fan. 
 * @return
 *   An HRESULT value.
 *   &lt;br&gt;&lt;b&gt; Legal values&lt;/b&gt;:
 *   &lt;li&gt;&lt;tt&gt;S_OK&lt;/tt&gt; the operation succeeded &lt;/li&gt;
 *   &lt;li&gt;&lt;tt&gt;E_FAIL&lt;/tt&gt; otherwise &lt;/li&gt;.
 */
    virtual HRESULT Clear(int     iFace,
                          int    *iAllocate,
                          float **iVertices,
                          int    *iVerticesArraySize,
                          float **iNormals,
                          int    *iNormalsArraySize,
                          int   **iTriangleIndices,
                          int    *iNbTriangle,
                          int   **iTriangleStripIndices,
                          int    *iNbTriangleStrip,
                          int   **iNbVertexPerTriangleStrip,
                          int   **iTriangleFanIndices,
                          int    *iNbTriangleFan,
                          int   **iNbVertexPerTriangleFan) = 0;

/**
 * Returns the number of textures on a face.
 * @param iFace
 *   The face index. The index ranges from
 *   &lt;code&gt;0.&lt;/code&gt; to &lt;code&gt;FaceCount-1&lt;/code&gt;.
 * @param oTextureCount
 *   Texture count.
 * @return
 *   An HRESULT value.
 *   &lt;br&gt;&lt;b&gt; Legal values&lt;/b&gt;:
 *   &lt;li&gt;&lt;tt&gt;S_OK&lt;/tt&gt; the operation succeeded &lt;/li&gt;
 *   &lt;li&gt;&lt;tt&gt;E_FAIL&lt;/tt&gt; otherwise &lt;/li&gt;.
 */
    virtual HRESULT GetFaceTextureCount(int     iFace,
                                        int    &amp;oTextureCount) = 0;

/**
 * Returns the texture coordinates of a face for a given texture.
 * @param iFace
 *   The face index. The index ranges from
 *   &lt;code&gt;0.&lt;/code&gt; to &lt;code&gt;FaceCount-1&lt;/code&gt;.
 * @param iTexture
 *   The texture index. The index ranges from
 *   &lt;code&gt;0.&lt;/code&gt; to &lt;code&gt;TextureCount-1&lt;/code&gt;.
 * @param oTextureCoord
 *    Array of texture coordinates.
 *    Each vertex has an associated position in the texture map. 
 *    The number of texture coordinates groups is always equal to the number of vertices. 
 * @param oTextureCoordDim
 *    Retrieves the number of coordinates per vertex.
 * @return
 *   An HRESULT value.
 *   &lt;br&gt;&lt;b&gt; Legal values&lt;/b&gt;:
 *   &lt;li&gt;&lt;tt&gt;S_OK&lt;/tt&gt; the operation succeeded &lt;/li&gt;
 *   &lt;li&gt;&lt;tt&gt;E_FAIL&lt;/tt&gt; otherwise &lt;/li&gt;.
 */
    virtual HRESULT GetFaceTextureCoordinates(int     iFace,
                                              int     iTexture,
                                              float **oTextureCoord,
                                              int    *oTextureCoordDim) = 0;
};

/** @nodoc */
CATDeclareHandler(CATIRdgGeometry,CATIRdgObject);

#endif
</div>
    
    <div class="navigation">
        <div><a href="CATIRdgEnvironment.html">‚Üê ‰∏ä‰∏ÄÈ°µ: CATIRdgEnvironment.h</a></div>
        <div><a href="CATIRdgLight.html">‰∏ã‰∏ÄÈ°µ: CATIRdgLight.h ‚Üí</a></div>
    </div>
</body>
</html>