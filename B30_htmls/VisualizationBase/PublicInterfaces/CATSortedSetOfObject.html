<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VisualizationBase/PublicInterfaces/CATSortedSetOfObject.h</title>
    <style>
        body {
            font-family: 'Consolas', 'Monaco', monospace;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .header {
            background-color: #2c3e50;
            color: white;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .navigation {
            display: flex;
            justify-content: space-between;
            margin: 15px 0;
            padding: 10px;
            background-color: #ecf0f1;
            border-radius: 5px;
        }
        .navigation a {
            color: #2980b9;
            text-decoration: none;
            padding: 5px 10px;
            background-color: white;
            border-radius: 3px;
            border: 1px solid #bdc3c7;
        }
        .navigation a:hover {
            background-color: #3498db;
            color: white;
        }
        .content {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            border: 1px solid #bdc3c7;
            white-space: pre-wrap;
            font-size: 14px;
            line-height: 1.4;
            overflow-x: auto;
        }
        .back-to-index {
            text-align: center;
            margin: 15px 0;
        }
        .back-to-index a {
            color: #27ae60;
            text-decoration: none;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>VisualizationBase/PublicInterfaces/CATSortedSetOfObject.h</h1>
    </div>
    
    <div class="navigation">
        <div><a href="CATSorted3DBagRep.html">‚Üê ‰∏ä‰∏ÄÈ°µ: CATSorted3DBagRep.h</a></div>
        <div><a href="CATStatCleaner.html">‰∏ã‰∏ÄÈ°µ: CATStatCleaner.h ‚Üí</a></div>
    </div>
    
    <div class="back-to-index">
        <a href="index.html">üìÅ ËøîÂõûÁõÆÂΩï</a>
    </div>
    
    <div class="content">#ifndef CATSortedSetOfObject_h
#define CATSortedSetOfObject_h
/** @CAA2Required */
/**********************************************************************/
/* DON T DIRECTLY INCLUDE THIS HEADER IN YOUR APPLICATION CODE. IT IS */
/* REQUIRED TO BUILD CAA APPLICATIONS BUT IT MAY DISAPEAR AT ANY TIME */
/**********************************************************************/

// COPYRIGHT DASSAULT SYSTEMES 2002

/**
 * @quickReview CDT 02:12:06
 **/
#include &quot;CATViz.h&quot;
#include &quot;CATSetOfObject.h&quot;
#include &lt;string.h&gt;


/**
* A set of objects.
* &lt;br&gt;&lt;b&gt;Role&lt;/b&gt; : Enclosed objects are instances of the @href CATBaseUnknown class.
* This class makes use of the AddRef/Release mechanism when adding or removing object.
*/
class ExportedByCATViz CATSortedSetOfObject : public CATSetOfObject
{
public:
 
 inline CATSortedSetOfObject (int iSize=0,int (*iCompare) (void* a, void* b)=NULL);
 inline void Sort();
 inline int Find (void * iObj);
 inline void operator += ( void * iObj );
 inline void operator -= ( void * iObj ) ;
 int (*_pCompare) (void* a, void* b); // comparison function
};

inline CATSortedSetOfObject::CATSortedSetOfObject(int iSize,int (*iCompare) (void* a, void* b)) : CATSetOfObject(iSize), _pCompare(iCompare)
{ 
}

inline void CATSortedSetOfObject::Sort() 
{
  // on suppose que seul le dernier element n&#x27;est pas trie
  if ( _size &gt;= 2)
  {
    int g=0,d=_size-2,m;
    void * key;
    void* aux= _tab[_size-1];
    
    key = _tab[_size-1];
    if (_pCompare)
    {
      while (g&lt;=d)
      {
        m = (g+d) &gt;&gt; 1;
        if ( _pCompare(_tab[m] , key) &lt; 0 )
        {
          g = m+1;
        }
        else if ( _pCompare(_tab[m] , key) &gt; 0 )
        {
          d = m-1;
        }
        else
        {
          _size--;
          return;
        }
      }
    }
    else
    {
      while (g&lt;=d)
      {
        m = (g+d) &gt;&gt; 1;
        if (_tab[m] &lt; key)
        {
          g = m+1;
        }
        else if (_tab[m] &gt; key)
        {
          d = m-1;
        }
        else
        {
          _size--;
          return;
        }
      }
    }
    for (int ii = _size-2; ii&gt;=g;ii--)
      _tab[ii+1] = _tab[ii];
    _tab[g] = aux;
  }
}



inline void CATSortedSetOfObject::operator += ( void * iObj )
{
 CATSetOfObject::operator += (iObj);
 Sort();
}


inline int CATSortedSetOfObject::Find(void * iObj) 
{
 int g=0,d=_size-1;
 int m;
 void * mval;
 
 if (_pCompare)
 {
   while ( g &lt;= d )
   {
     m = (d+g) &gt;&gt; 1;
     mval =  _tab[m];
     if ( _pCompare(mval,iObj) == 0)
     {
       return m;
     }
     else
     {
       if ( _pCompare(iObj,mval) &lt;0 )
       {
         d = m - 1;
       }
       else
       {
         g = m + 1;
       }
     }
   }
 }
 else
 {
   while ( g &lt;= d )
   {
     m = (d+g) &gt;&gt; 1;
     mval =  _tab[m];
     if ( mval == iObj )
     {
       return m;
     }
     else
     {
       if (iObj &lt; mval)
       {
         d = m - 1;
       }
       else
       {
         g = m + 1;
       }
     }
   }
 }
 return -1;
}


inline void CATSortedSetOfObject::operator -= ( void * iObj ) 
{
 int index = Find (iObj);
 if(index &lt; 0 || index &gt;= _size) return;
 _size--;
 for(int j = index; j &lt; _size; j++) _tab[j] = _tab[j+1];
 return ;
}

#endif


</div>
    
    <div class="navigation">
        <div><a href="CATSorted3DBagRep.html">‚Üê ‰∏ä‰∏ÄÈ°µ: CATSorted3DBagRep.h</a></div>
        <div><a href="CATStatCleaner.html">‰∏ã‰∏ÄÈ°µ: CATStatCleaner.h ‚Üí</a></div>
    </div>
</body>
</html>