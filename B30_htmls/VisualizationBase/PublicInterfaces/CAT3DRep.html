<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VisualizationBase/PublicInterfaces/CAT3DRep.h</title>
    <style>
        body {
            font-family: 'Consolas', 'Monaco', monospace;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .header {
            background-color: #2c3e50;
            color: white;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .navigation {
            display: flex;
            justify-content: space-between;
            margin: 15px 0;
            padding: 10px;
            background-color: #ecf0f1;
            border-radius: 5px;
        }
        .navigation a {
            color: #2980b9;
            text-decoration: none;
            padding: 5px 10px;
            background-color: white;
            border-radius: 3px;
            border: 1px solid #bdc3c7;
        }
        .navigation a:hover {
            background-color: #3498db;
            color: white;
        }
        .content {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            border: 1px solid #bdc3c7;
            white-space: pre-wrap;
            font-size: 14px;
            line-height: 1.4;
            overflow-x: auto;
        }
        .back-to-index {
            text-align: center;
            margin: 15px 0;
        }
        .back-to-index a {
            color: #27ae60;
            text-decoration: none;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>VisualizationBase/PublicInterfaces/CAT3DRep.h</h1>
    </div>
    
    <div class="navigation">
        <div><a href="CAT3DPolylineGP.html">‚Üê ‰∏ä‰∏ÄÈ°µ: CAT3DPolylineGP.h</a></div>
        <div><a href="CAT3DViewpoint.html">‰∏ã‰∏ÄÈ°µ: CAT3DViewpoint.h ‚Üí</a></div>
    </div>
    
    <div class="back-to-index">
        <a href="index.html">üìÅ ËøîÂõûÁõÆÂΩï</a>
    </div>
    
    <div class="content">#ifndef CAT3DRep_H
#define CAT3DRep_H

// COPYRIGHT DASSAULT SYSTEMES 1999

/**
 * @CAA2Level L1
 * @CAA2Usage U1
 */

#include &quot;CATRep.h&quot;
#include &quot;CAT3DBoundingSphere.h&quot;
#include &quot;CATViz.h&quot;

class CATMappingOperator;
class CATGraphicMaterial;
class CATOutlineBuilder;
class CATStreamer;
class CATGraphicPrimitive;


/**
 * Class to create a 3D representation of an application object.
 * &lt;b&gt;Role&lt;/b&gt;: This class is the base class for all 3D representation classes.
 * It manages specific 3D behavior, such as
 * &lt;ol&gt;
 *&lt;li&gt; 3D bounding element &lt;/li&gt;
 *&lt;li&gt; streaming &lt;/li&gt;
 *&lt;li&gt; outline builder &lt;/li&gt;
 *&lt;li&gt; materials &lt;/li&gt;
 * &lt;/ol&gt;
 */
class ExportedByCATViz CAT3DRep : public CATRep
{
  
  friend class CATMarshallable3DRep;
  friend class CATDmuStream3DRep;
  CATDeclareClass;
  
  
public:
    
  virtual ~CAT3DRep();

  /** Constructor of an empty 3D representation. */
  CAT3DRep();

  /** @nodoc : deprecated constructor */
  CAT3DRep(CATModelIdentificator &amp;id,void *ctrl=NULL);

  /** Sets the bounding element of the representation.
   * @param iBoundingSphere
   * The (smallest) bounding element containing the representation.
   */
  void SetBoundingElement(const CAT3DBoundingSphere &amp; iBoundingSphere);

  /** Adds the given bounding element to the existing one.
   * @param iBoundingSphere
   * The current bounding element of the representation will be modified to
   * contain &lt;tt&gt;iBoundingSphere&lt;/tt&gt;.
   */
  virtual void AddBoundingElement(const CAT3DBoundingSphere &amp; iBoundingSphere);

  /** Returns the bounding element of the representation. */
  inline const CAT3DBoundingSphere &amp; GetBoundingElement () const {return (_bound_elt);};

  /** Returns the bounding element of the representation. */
  const CAT3DBoundingSphere &amp; GetBoundingElement ();

#if defined (_IRIX_SOURCE) || defined (_WINDOWS_SOURCE)
/**
* Returns the bounding element pointer ...
*/
    inline CATBoundingElement * GetBoundingCube (void);
#endif

  /** Computes the bounding element of the representation.
   * The bounding element should be the smallest possible sphere containing the representation.
   * @param iShowSpace
   * &lt;br&gt;&lt;b&gt;Legal Values&lt;/b&gt;:
   * &lt;ol&gt;
   *&lt;li&gt; 0 :  &lt;/li&gt;
   *&lt;li&gt; 1 :  &lt;/li&gt;
   * &lt;/ol&gt;
   */
  virtual void ComputeBoundingElement(int iShowSpace=1);

  /** Resets the bounding element of representation.
   *  The visualization manager will ignore the representation.
  */
  void ResetBoundingElement();

  /** Invalidates the bounding element of the representation.
   * The visualization manager will recompute the bounding element of the representation. */
  virtual void SetInvalid();
	
  // Compute the BE for the noshow space
 /** @nodoc */ 
  virtual const CAT3DBoundingSphere &amp;GetNoshowBoundingElement (int &amp; ioIsOneRepNoshow) ;
  // Compute the BE for the Show space
 /** @nodoc */ 
  virtual const CAT3DBoundingSphere &amp;GetShowBoundingElement () ;
 /** @nodoc */
  virtual int IsInvalid();

  /** 
   * @nodoc 
   * Saves the representation data in a stream.
   * @param oStream
   * Stream in which to save the representation data.
   * @param iSaveType
   *
   */
  virtual void Stream(CATStreamer &amp; oStream, int iSaveType = 0);

  /** 
   * @nodoc 
   * Restores the representation data from a stream.
   * @param iStream
   * Stream from which the representation data is restored.
   */
  virtual void UnStream(CATStreamer &amp; iStream);

  /** 
   * @nodoc
   * Returns the outline builder of the representation.
   * The representation retains ownership of the outline builder. Do not delete it.
   */
  virtual CATOutlineBuilder * GetOutlineBuilder();
  
  /** Sets the heritance mode for material.
   * @param iInheritance
   * &lt;ol&gt;
   *&lt;li&gt; MATERIAL_NOT_INHERIT : children reps will not have this rep&#x27;s material &lt;/li&gt;
   *&lt;li&gt; MATERIAL_INHERIT :  children reps will have automaticly this rep&#x27;s material&lt;/li&gt;
   *&lt;li&gt; MATERIAL_FORCE_INHERIT : same as INHERIT, but even when a father has the INHERIT flag&lt;/li&gt;
   * &lt;/ol&gt;
   */
  virtual void SetMaterialInheritance(int iInheritance);

  /** Returns the inheritance mode for the material of the rep. */
  virtual int GetMaterialInheritance();

  /** Sets the validity of texture coordinates.
   * @param iState
   * &lt;ol&gt;
   *&lt;li&gt; 0 : TC invalid, they will be computed at next Draw &lt;/li&gt;
   *&lt;li&gt; 1 : TC valid &lt;/li&gt;
   * &lt;/ol&gt;
   */
  virtual void SetIsValidTC(int iState);
  
  /** Return the validity of texture coordinates.
   */
  virtual int GetIsValidTC();
    
  /** @nodoc */
  virtual void SetGraphicMaterial(CATGraphicMaterial * iMaterial);

  /** @nodoc */
  CATGraphicMaterial * GetGraphicMaterial() const;

  /** @nodoc */
  virtual void UpdateTextureCoordinates(CATMappingOperator* iOperator = NULL);

  /** @nodoc */
  virtual int IsUVMeshToCompute() const;

  // the bounding box is added to the rep if it is a BAG
  // otherwise, it is added to the closest Bag within
  // the path of rep given in input.
  /** @nodoc : deprecated method. */
  void CreateBoundingBoxRep(CATRepPath * iRepPath = NULL);

  /** @nodoc : deprecated method. */
  void RemoveBoundingBoxRep();

  /** @nodoc : deprecated method. */
  void RemoveBoundingBoxRep(CATRepPath *iRepPath);

  /** @nodoc : deprecated method. */
  void DetachBoundingBoxRep();

  /** @nodoc : deprecated method. */
  const CATRepPath * GetBoundingBoxPath();

  /** @nodoc */
  virtual void SetLayerNumber(int iLayer);

  /** @nodoc */
  virtual int GetLayerNumber();

  /** @nodoc */
  virtual void SetCGMId(unsigned int iId);

  /** @nodoc */
  virtual unsigned int GetCGMId();

  /** @nodoc */
  virtual CATGraphicPrimitive* GetGeomElement(int iIndice);
  
  /** @nodoc */
  // RepViewMode set on this 3DRep will be applied on it and all its children ONLY IF:
  // #1. VIEW_REP_OVERLOAD is enabled for the Viewer 
  //  Currently it is disabled if ViewerViewMode contains any of the modes below:
  //      - VIEW_COLORED_EDGES_FROM_FACES
  //      - VIEW_LINEONLINE
  //      - VIEW_HLR
  //      - VIEW_TRANSPARENT
  //      - VIEW_POLYGON
  //      - VIEW_ISOPARS
  //      - VIEW_TOON
  // #2. RepViewMode is not set to REP_VIEW_DISABLED (0x0)
  //      In such a case, ViewerViewMode will be effective for the rep.
  // #3. No parent of this node is applied with the CATVisRepViewModeFilter
  // #4. No parent of this node is applied with the RepViewMode through this API
  //      In such a case, RepViewmode set on any child rep will be discarded. RepViewMode of the parent will be effective for the rep.
  // #5. The only RepViewMode combinations accepted by this API are : (defined in CATRep.h)
  // - REP_VIEW_DISABLED 
  // - REP_VIEW_NOTHING
  // - REP_VIEW_MESH
  // - REP_VIEW_EDGE
  // - REP_VIEW_MESH | REP_VIEW_EDGE
  // - REP_VIEW_POLYGON
  // - REP_VIEW_EDGE | REP_VIEW_OUTLINE
  // - REP_VIEW_MESH | REP_VIEW_EDGE | REP_VIEW_OUTLINE
  // - REP_VIEW_HRD  
  // - REP_VIEW_HRD | REP_VIEW_HIDDEN_EDGE
  // #6. The following RepViewModes containing REP_VIEW_OUTLINE (explicit or implicit) won&#x27;t be taken into account if the ViewerViewMode does not contain VIEW_OUTLINE:
  // - REP_VIEW_EDGE | REP_VIEW_OUTLINE
  // - REP_VIEW_MESH | REP_VIEW_EDGE | REP_VIEW_OUTLINE
  // - REP_VIEW_HRD
  // - REP_VIEW_HIDDEN_EDGE | REP_VIEW_HRD
  //      In such a case, ViewerViewMode will be effective for the rep.  
  virtual void SetViewMode (const int iViewMode, const int iActive,const int iWindowViewModeSensitive=0);

  /** @nodoc */
  virtual int ViewMode (const int oViewMode=0xFFFF,int * oWindowViewModeSensitive=NULL) const;

  /** @nodoc */
  // The only pick mode accepted by this method are : (defined in CATRep.h)
  // - REP_PICK_NOTHING
  // - REP_PICK_MESH
  // - REP_PICK_EDGE
  // - REP_PICK_MESH | REP_PICK_EDGE
  // If the CATViewer is set to one of this view mode, the rep view mode
  // won&#x27;t be taken into account :
  // - VIEW_OUTLINE
  // - VIEW_HLR
  // - VIEW_POLYGON
  // - VIEW_ISOPARS
  // - VIEW_TOON
  virtual void SetRepPickMode (const int iPickMode, const int iActive);

  /** @nodoc */
  virtual int GetRepPickMode (const int oPickMode=0xFFFF) const;

  /** @nodoc */
  // 0 contexte inconnu
  // 1 lorsque le _CGMId correspond  un #ele  (contexte Feature)
  // 2 lorsque le _CGMId correspond  un CGMId (contexte CGM)
  virtual void SetNamingContext (int iNamingContext);

  /** @nodoc */
  virtual int GetNamingContext ();

  /** @nodoc */
  virtual int IsA3DRep();

protected:
  /** Tests whether the representation will draw its graphic primitives.
   * See CATRep::OkToDraw(CATRender &amp; iRender, int * ioInside)
   */
  int OkToDraw(CATRender &amp; ioRender, int * ioInside);

  CAT3DBoundingSphere   _bound_elt;       // bounding element
  CATGraphicMaterial  * _Material;        // graphic material
   
private:
   unsigned int _CGMId;

   unsigned int         _isValidTC           : 1; // validity of texture coordinates
   unsigned int         _inheritanceMaterial : 2;
   unsigned int         _LayerNumber         :16;
   unsigned int         _view_mode           : 5;
   unsigned int         _pick_mode           : 5;
   unsigned int         _view_mode_sensitivity : 1;
   unsigned int         _naming_context      : 2;

};

#if defined (_IRIX_SOURCE) || defined (_WINDOWS_SOURCE)
inline CATBoundingElement *CAT3DRep::GetBoundingCube (void)
{
    return (CATBoundingElement *) &amp;_bound_elt;
}
#endif

#endif // CAT3DRep_H
</div>
    
    <div class="navigation">
        <div><a href="CAT3DPolylineGP.html">‚Üê ‰∏ä‰∏ÄÈ°µ: CAT3DPolylineGP.h</a></div>
        <div><a href="CAT3DViewpoint.html">‰∏ã‰∏ÄÈ°µ: CAT3DViewpoint.h ‚Üí</a></div>
    </div>
</body>
</html>