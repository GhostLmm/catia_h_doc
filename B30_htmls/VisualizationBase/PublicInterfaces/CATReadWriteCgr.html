<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VisualizationBase/PublicInterfaces/CATReadWriteCgr.h</title>
    <style>
        body {
            font-family: 'Consolas', 'Monaco', monospace;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .header {
            background-color: #2c3e50;
            color: white;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .navigation {
            display: flex;
            justify-content: space-between;
            margin: 15px 0;
            padding: 10px;
            background-color: #ecf0f1;
            border-radius: 5px;
        }
        .navigation a {
            color: #2980b9;
            text-decoration: none;
            padding: 5px 10px;
            background-color: white;
            border-radius: 3px;
            border: 1px solid #bdc3c7;
        }
        .navigation a:hover {
            background-color: #3498db;
            color: white;
        }
        .content {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            border: 1px solid #bdc3c7;
            white-space: pre-wrap;
            font-size: 14px;
            line-height: 1.4;
            overflow-x: auto;
        }
        .back-to-index {
            text-align: center;
            margin: 15px 0;
        }
        .back-to-index a {
            color: #27ae60;
            text-decoration: none;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>VisualizationBase/PublicInterfaces/CATReadWriteCgr.h</h1>
    </div>
    
    <div class="navigation">
        <div><a href="CATProjectionType.html">‚Üê ‰∏ä‰∏ÄÈ°µ: CATProjectionType.h</a></div>
        <div><a href="CATReleaseEvent.html">‰∏ã‰∏ÄÈ°µ: CATReleaseEvent.h ‚Üí</a></div>
    </div>
    
    <div class="back-to-index">
        <a href="index.html">üìÅ ËøîÂõûÁõÆÂΩï</a>
    </div>
    
    <div class="content">#ifndef CATReadWriteCgr_h
#define CATReadWriteCgr_h

// COPYRIGHT DASSAULT SYSTEMES 1999

/**
 * @CAA2Level L1
 * @CAA2Usage U1
 */

class CATRep;
class CAT3DRep;
class CATColorMap;
class CATCGRSetting;
class CATDescribeCgr;
class CATCgrHeader;
class CATMutex;
class CATStorage;
class CATCGRContainer;
class CATILockBytes2;

/** @nodoc */
typedef struct _cgrfile cgrfile;

#include &quot;CATViz.h&quot;
#include &quot;CATBoolean.h&quot;
#include &quot;CATVizGlobals.h&quot;


#ifndef NULL
#define NULL 0
#endif 

/**
 * Flag to specify the kind of graphic data we want to store in a Cgr file.
 * &lt;br&gt;This flag is used in &lt;tt&gt;CATReadCgr&lt;/tt&gt; and &lt;tt&gt;CATWriteCgr&lt;/tt&gt; methods.
 * @param USE_NONE
 *    To save nothing
 * @param USE_LODS
 *    To save the Levels Of Details
 * @param USE_TEXTURE
 *    To save textures
 * @param USE_LODS_TEXTURE
 *    To save textures and Levels Of Details
 * @param USE_EDGE
 *    To save edges
 * @param USE_LODS_EDGE
 * @param USE_TEXTURE_EDGE
 *    To save textures and edges
 * @param USE_LODS_TEXTURE_EDGE
 *    To save Levels Of Details, texture and edges
 * @param USE_SHOW_NOSHOW
 *    To specify that the whole representation
 *    tree must be saved, whether it belongs to &quot;show&quot; or &quot;no show&quot; space.
 *    When the flag is set equal to &lt;tt&gt;USE_SHOW_NOSHOW&lt;/tt&gt;,
 *    the Levels Of Details, texture and edges are saved.
 * @param USE_3DCUSTOMREP
 *    To save graphic representations of
 *    type CAT3DCustomRep, which are not ususally stored. For example, to save a CAT3DCustomRep
 *    with its Levels Of Details, texture and edges, the flag should
 *    be set to &lt;tt&gt;USE_LODS_TEXTURE_EDGE | USE_3DCUSTOMREP&lt;/tt&gt;.
 * @param USE_LINEIC
 *    To save lineic informations (Wireedge - 3DLineRep).
 *    Using this setting force save of 3DCustomRep
 * @param USE_NOSHOWLAYER
 *    To save informations which are in no-shown layer.
  * @param USE_FORCE_V4V5_FDT_STREAM
 *		Force the streaming of the FTA applicative container (even if the tools&gt;options setting says otherwise)
 *	@param USE_PREVENT_V4V5_FDT_STREAM
 *		Prevent the streaming of the FTA applicative container (even if the tools&gt;options setting says otherwise)
 */
enum CATSettingCgr {USE_NONE=0x0,
                    USE_LODS=0x1,
                    USE_TEXTURE=0x2,
                    USE_LODS_TEXTURE=0x3,
                    USE_EDGE=0x4,
                    USE_LODS_EDGE=0x5,
                    USE_TEXTURE_EDGE=0x6,
                    USE_LODS_TEXTURE_EDGE=0x7,
					     USE_SHOW_NOSHOW=0x8,
                    USE_3DCUSTOMREP=0x10,
					     USE_LINEIC=0x20,
               USE_NOSHOWLAYER=0x40,
					USE_FORCE_V4V5_FDT_STREAM=0x100,
					USE_PREVENT_V4V5_FDT_STREAM=0x200
};

/** @nodoc*/
struct cgrFileStatus{
  int returnCode;
  CAT3DRep* rep;
};

/**
 * Function to save the representation of a graphic scene
 * in a cgr file.
 * &lt;b&gt;Role:&lt;/b&gt;This function writes a Cgr file.
 * @return
 *   &lt;dl&gt;
 *      &lt;dt&gt;0&lt;/dt&gt;
 *        &lt;dd&gt;OK&lt;/dd&gt;
 *      &lt;dt&gt;1&lt;/dt&gt;
 *        &lt;dd&gt;KO, because of a disk writting error&lt;/dd&gt;
 *      &lt;dt&gt;2&lt;/dt&gt;
 *        &lt;dd&gt;KO, because, one of the rep we tried to 
 *        save is not streamable&lt;/dd&gt;
 *   &lt;/dl&gt;   
 * @param iRep
 *    A pointer to the root node of the 3D scene to save.
 * @param iFileName
 *    The name of the file in which the scene will be saved.
 * @param iSettingCgr
 *    The CATSettingCgr flag to specify the kind of graphic data we want to store in the cgr file.
 * @param iColMap
 *    The color map to use to convert color attribute in RGB composants.
 * @param iFileMarked
 *    do not use.
 *    &lt;br&gt;&lt;b&gt;Legal values&lt;/b&gt;:
 *    &lt;dl&gt;
 *      &lt;dt&gt;TRUE&lt;/dt&gt;
 *        &lt;dd&gt;The cgr file will be readable by only CATIA Demo version&lt;/dd&gt;
 *      &lt;dt&gt;FALSE&lt;/dt&gt;
 *        &lt;dd&gt;The cgr file will be readable by every CATIA versions&lt;/dd&gt;
 *    &lt;/dl&gt;
 *    The default value is set to &lt;tt&gt;FALSE&lt;/tt&gt;.
 * @param ioMode
 *    Defines the method used for writing the CGR.
 *    The default value is set to &lt;tt&gt;CATVizCGRAccessModeMemory&lt;/tt&gt;.
 */
extern ExportedByCATViz int CATWriteCgr(CATRep *iRep,
                                        char *iFileName,
                                        CATSettingCgr iSetting,
                                        CATColorMap *iColMap,
                                        CATBoolean iFileMarked = FALSE,
                                        CATVizCGRAccessMode ioMode = CATVizCGRAccessModeMemory);

/** @nodoc */
extern ExportedByCATViz int CATWriteCgr(CATRep *iRep,
                                        char *iFileName,
                                        CATSettingCgr iSetting,
                                        CATColorMap *iColMap,
                                        CATCgrHeader &amp;iHeader,
                                        CATBoolean iFileMarked = FALSE,
                                        CATVizCGRAccessMode ioMode = CATVizCGRAccessModeMemory);

/** @nodoc */
extern ExportedByCATViz int CATWriteTargetReleaseCgr(CATRep *iRep,
                                                     char *iFileName,
                                                     CATSettingCgr iSetting,
                                                     CATColorMap *iColMap,
                                                     CATVizTargetCGR target,
                                                     CATBoolean iFileMarked = FALSE,
                                                     CATVizCGRAccessMode ioMode = CATVizCGRAccessModeMemory);
/**
 * Function to save, in the Cgr format, the representation of a graphic scene
 * in a buffer.
 * &lt;b&gt;Role:&lt;/b&gt;This function writes a Cgr buffer.
 * @return
 *   &lt;dl&gt;
 *      &lt;dt&gt;0&lt;/dt&gt;
 *        &lt;dd&gt;OK&lt;/dd&gt;
 *      &lt;dt&gt;-1&lt;/dt&gt;
 *        &lt;dd&gt;KO&lt;/dd&gt;
 *   &lt;/dl&gt;   
 * @param iRep
 *    A pointer to the root node of the 3D scene to save.
 * @param oBuffer
 *    The buffer in which the Cgr data are stored. This buffer is allocated by &lt;tt&gt;CATWriteCgr&lt;/tt&gt;,
 *    but its deletion is let to the caller and must be done by using the &quot;free&quot; function.
 * @param oLBuffer
 *    The length of oBuffer.
 * @param iSettingCgr
 *    The CATSettingCgr flag to specify the kind of graphic data you want to store in the cgr file.
 * @param iColMap
 *    The color to use to convert color attribute in RGB composants.
 * @param iFileMarked
 *    do not use.
 *    &lt;br&gt;&lt;b&gt;Legal values&lt;/b&gt;:
 *    &lt;dl&gt;
 *      &lt;dt&gt;TRUE&lt;/dt&gt;
 *        &lt;dd&gt;The cgr file will be readable by only CATIA Demo version&lt;/dd&gt;
 *      &lt;dt&gt;FALSE&lt;/dt&gt;
 *        &lt;dd&gt;The cgr file will be readable by every CATIA versions&lt;/dd&gt;
 *    &lt;/dl&gt;
 *    The default value is set to &lt;tt&gt;FALSE&lt;/tt&gt;.
 */
extern ExportedByCATViz int CATWriteCgr(CATRep * iRep,
                                        char*&amp; oBuffer, 
                                        int&amp; oLBuffer,
                                        CATSettingCgr iSettingCgr,
                                        CATColorMap *iColMap,
                                        CATBoolean iFileMarked=FALSE);

/** @nodoc */
extern ExportedByCATViz int CATWriteCgr(CATRep * iRep,
                                        char*&amp; oBuffer, 
                                        int&amp; oLBuffer,
                                        CATSettingCgr iSettingCgr,
                                        CATColorMap *iColMap,
                                        CATCgrHeader &amp;iHeader,
                                        CATBoolean iFileMarked=FALSE);

/**
 * @nodoc 
 * This method writes a CGR in a storage (for PART)
 */
extern ExportedByCATViz int CATWriteCgr(CATRep *iRep,
                                        CATStorage *iStorage,
                                        CATSettingCgr iSetting,
                                        CATColorMap *iColMap,
                                        CATBoolean iFileMarked = FALSE,
                                        CATVizCGRAccessMode ioMode = CATVizCGRAccessModeDirect);

/**
 * @nodoc 
 * This method reads a CGR from a CATILockBytes2 (for CATVizCGRDocument)
 */
extern ExportedByCATViz CAT3DRep * CATReadCgr(CATILockBytes2 *iLB2);

 /**
 * This function reads a Cgr files list and returns their graphic
 * data as an array of pointers to CAT3DRep objects.
 * &lt;b&gt;Role:&lt;/b&gt;This function reads a Cgr files list and returns their graphic
 * data as an array of pointers to CAT3DRep objects.
 * @return
 *    This function returns an array of pointers to CAT3DRep. This array
 *    size is equal to the number of Cgr files to read. Each field contains,
 *    as a pointer to a CAT3DRep, the representation of the corresponding Cgr file.
 *    If the CATReadCgr() function encounters a problem during the reading of a Cgr file,
 *    the corresponding field of the returned array is NULL.
 * @param iFileNameList
 *    The list of Cgr files to read.
 * @param iSizeList
 *    The number of Cgr files to read.
 * @param iSettingCgr
 *    do not use. Set this parameter to the &lt;tt&gt;USE_LODS_TEXTURE_EDGE&lt;/tt&gt; value.
 */
extern ExportedByCATViz CAT3DRep ** CATReadCgr(char **iFileNamelist, int iSizeList,CATSettingCgr iSettingCgr);

/** @nodoc */
extern ExportedByCATViz cgrFileStatus* CATReadCgrWithStatus(char **iFileNamelist, int iSizeList,CATSettingCgr iSettingCgr);

/** @nodoc */
extern ExportedByCATViz CAT3DRep ** CATReadCgr(char **iFileNamelist, int iSizeList,
                                               CATSettingCgr iSettingCgr,
                                               CATCgrHeader **&amp;oFileHeader);

 /**
 * This Function is the interface with the Cgr file.
 * &lt;b&gt;Role&lt;/b&gt;: Reads a Cgr file and returns its graphic data as a pointer
 * to a CAT3DRep.
 * @return
 *    If everything is OK, the function returns a valid pointer to a CAT3DRep,
 *    else, it returns a NULL pointer.
 * @param iFileName
 *    The cgr file name to read.
 * @param iSettingCgr
 *    do not use. Set this parameter to the &lt;tt&gt;USE_LODS_TEXTURE_EDGE&lt;/tt&gt; value.
 * @param ioMode
 *    Defines the method used for writing the CGR.
 *    The default value is set to &lt;tt&gt;CATVizCGRAccessModeMemory&lt;/tt&gt;.
 */
extern ExportedByCATViz CAT3DRep * CATReadCgr(char *iFileName,
                                              CATSettingCgr iSettingCgr,
                                              CATVizCGRAccessMode ioMode = CATVizCGRAccessModeMemory);

/** @nodoc */
extern ExportedByCATViz cgrFileStatus CATReadCgrWithStatus(char *iFileName,
                                              CATSettingCgr iSettingCgr,
                                              CATVizCGRAccessMode ioMode = CATVizCGRAccessModeMemory);
/** @nodoc */
/*oHeader has to be RELEASED by the caller if != NULL*/
extern ExportedByCATViz CAT3DRep * CATReadCgr(char *iFileName,
                                              CATSettingCgr iSettingCgr,
                                              CATCgrHeader *&amp;oHeader,
                                              CATVizCGRAccessMode ioMode = CATVizCGRAccessModeMemory);
/** @nodoc */
extern ExportedByCATViz CATCgrHeader * CATReadCgrHeader(char *iFileName,
                                                        CATSettingCgr iSettingCgr,
                                                        CATVizCGRAccessMode ioMode = CATVizCGRAccessModeMemory);

 /**
 * This function reads a buffer containing Cgr data and returns this graphic data as a pointer
 * to a CAT3DRep.
 * &lt;b&gt;Role:&lt;/b&gt;This function reads a Cgr buffer and returns its graphic
 * data as a pointer to a CAT3DRep object.
 * @return
 *    If everything is OK, the function returns a valid pointer to a CAT3DRep,
 *    else, it returns a NULL pointer.
 * @param iBuffer
 *    The buffer to read.
 * @param iLBuffer
 *    The length, in bytes of &lt;tt&gt;iBuffer&lt;/tt&gt;.
 */
extern ExportedByCATViz CAT3DRep * CATReadCgr(char *iBuffer, int iLBuffer);

/** @nodoc */
/* deprecated */
extern ExportedByCATViz CAT3DRep * CATReadCgr(char *iBuffer, int iLBuffer, CATCgrHeader * oHeader);

/** @nodoc */
/*oHeader has to be RELEASED by the caller if != NULL*/
extern ExportedByCATViz CAT3DRep * CATReadCgrWithHeader(char *iBuffer, int iLBuffer, CATCgrHeader * &amp; oHeader);


/** @nodoc */
extern ExportedByCATViz CATCgrHeader * CATReadCgrHeader(char *iBuffer, int iLBuffer);

/**
 * Function to save the representation of a graphic scene
 * in a cgr file.
 * &lt;b&gt;Role:&lt;/b&gt;This function write a Cgr file.
 * @return
 *   &lt;dl&gt;
 *      &lt;dt&gt;0&lt;/dt&gt;
 *        &lt;dd&gt;OK&lt;/dd&gt;
 *      &lt;dt&gt;-1&lt;/dt&gt;
 *        &lt;dd&gt;KO&lt;/dd&gt;
 *   &lt;/dl&gt;   
 * @param iRep
 *    A pointer to the root node of the 3D scene to save.
 * @param iFileName
 *    The name of the file in which the scene will be saved.
 * @param iCGRSettingCgr
 *    The CATCGRSetting to specify the kind of graphic data we want to store in the cgr file.
 * @param iColMap
 *    The color map to use to convert color attribute in RGB composants.
 * @param iFileMarked
 *    do not use.
 *    &lt;br&gt;&lt;b&gt;Legal values&lt;/b&gt;:
 *    &lt;dl&gt;
 *      &lt;dt&gt;TRUE&lt;/dt&gt;
 *        &lt;dd&gt;The cgr file will be readable by only CATIA Demo version&lt;/dd&gt;
 *      &lt;dt&gt;FALSE&lt;/dt&gt;
 *        &lt;dd&gt;The cgr file will be readable by every CATIA versions&lt;/dd&gt;
 *    &lt;/dl&gt;
 *    The default value is set to &lt;tt&gt;FALSE&lt;/tt&gt;.
 * @param ioMode
 *    Defines the method used for writing the CGR.
 *    The default value is set to &lt;tt&gt;CATVizCGRAccessModeMemory&lt;/tt&gt;.
 */
extern ExportedByCATViz int CATWriteCgr(CATRep * iRep,
                                        char * iFileName,
                                        CATCGRSetting * iCGRSetting = 0,
                                        CATColorMap * iColMap = 0,
                                        CATVizCGRAccessMode ioMode = CATVizCGRAccessModeMemory);

/** @nodoc */
extern ExportedByCATViz int CATWriteCgr(CATRep * iRep,
                                        char * iFileName,
                                        CATCgrHeader &amp;iHeader,
                                        CATCGRSetting * iCGRSetting = 0,
                                        CATColorMap * iColMap = 0,
                                        CATVizCGRAccessMode ioMode = CATVizCGRAccessModeMemory);

/** @nodoc */
extern int CATWriteCgr(CATRep * iRep, 
                       unsigned char marker,
                       CATVizCGRAccessMode ioMode,
                       CATVizTargetCGR target,
                       CATStorage *iStorage = NULL,
                       char * iFilename = NULL, 
                       char** oBuffer = NULL, 
                       int * oLBuffer = NULL, 
                       CATCGRSetting * iCGRSetting = NULL, 
                       CATSettingCgr * iSetting = NULL, 
                       CATColorMap * iColMap = NULL, 
                       CATCgrHeader * iHeader = NULL, 
                       CATBoolean * iFileMarked = NULL);

/** @nodoc */
extern cgrFileStatus  CATReadCgr(CATVizCGRAccessMode ioMode,
                                 char * iFileName = NULL, 
                                 char * iBuffer = NULL, 
                                 int iLBuffer = 0, 
                                 CATSettingCgr * iSettingCgr = NULL, 
                                 CATCgrHeader ** oHeader = NULL, 
                                 int headerOnly = 0, 
                                 cgrfile * = NULL, 
                                 CATMutex * lock = NULL,
                                 CATILockBytes2 * iLB2 = NULL);

/** @nodoc */
extern ExportedByCATViz int CATReadCgrInfo(char *ifilename,
                                           CATDescribeCgr *&amp; oDescription,
                                           int&amp; oConversion);

/** @nodoc */
extern void MultiThreadUnStream(CATCGRContainer * iMainContainer, int iUnstreamSceneGraph = 1);

/** @nodoc
 *  This function check if the CGR file is a V4 or V5 one.
 *  @return
 *   &lt;dl&gt;
 *      &lt;dt&gt;0&lt;/dt&gt;
 *        &lt;dd&gt;V4 CGR&lt;/dd&gt;
 *      &lt;dt&gt;1&lt;/dt&gt;
 *        &lt;dd&gt;V5 CGR&lt;/dd&gt;
 *      &lt;dt&gt;-1&lt;/dt&gt;
 *        &lt;dd&gt;bad file&lt;/dd&gt;
 *   &lt;/dl&gt;
 *  @param iFilename
 *     The name of the file to check.
 */
extern ExportedByCATViz int CATCheckCgrType(const char * iFileName);

/** @nodoc
 *  This function check if the CGR buffer is a V4 or V5 one.
 *  @return
 *   &lt;dl&gt;
 *      &lt;dt&gt;0&lt;/dt&gt;
 *        &lt;dd&gt;V4 CGR&lt;/dd&gt;
 *      &lt;dt&gt;1&lt;/dt&gt;
 *        &lt;dd&gt;V5 CGR&lt;/dd&gt;
 *      &lt;dt&gt;-1&lt;/dt&gt;
 *        &lt;dd&gt;bad file&lt;/dd&gt;
 *   &lt;/dl&gt;
 *  @param iBuffer
 *     The buffer to check.  
 *  @param iLBuffer
 *     The length of the buffer to check.
 */
extern ExportedByCATViz int CATCheckCgrType(char * iBuffer, int iLBuffer);

/** @nodoc
 *  Forces library loading.
 *  @param   iLibraryLevel
 *    The library level.
 *    &lt;br&gt;&lt;b&gt;legal values&lt;/b&gt;
 *    &lt;ul&gt;
 *         &lt;li&gt;0 V4 library&lt;/li&gt;
 *         &lt;li&gt;1 V5 library&lt;/li&gt;
 *    &lt;/ul&gt;
 */
extern ExportedByCATViz void CATForceCgrLibraryLoading(int iLibrayLevel);
#endif
</div>
    
    <div class="navigation">
        <div><a href="CATProjectionType.html">‚Üê ‰∏ä‰∏ÄÈ°µ: CATProjectionType.h</a></div>
        <div><a href="CATReleaseEvent.html">‰∏ã‰∏ÄÈ°µ: CATReleaseEvent.h ‚Üí</a></div>
    </div>
</body>
</html>