<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BasicTopologicalOpe/PublicInterfaces/CATLengthFromBodyOnWire.h</title>
    <style>
        body {
            font-family: 'Consolas', 'Monaco', monospace;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .header {
            background-color: #2c3e50;
            color: white;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .navigation {
            display: flex;
            justify-content: space-between;
            margin: 15px 0;
            padding: 10px;
            background-color: #ecf0f1;
            border-radius: 5px;
        }
        .navigation a {
            color: #2980b9;
            text-decoration: none;
            padding: 5px 10px;
            background-color: white;
            border-radius: 3px;
            border: 1px solid #bdc3c7;
        }
        .navigation a:hover {
            background-color: #3498db;
            color: white;
        }
        .content {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            border: 1px solid #bdc3c7;
            white-space: pre-wrap;
            font-size: 14px;
            line-height: 1.4;
            overflow-x: auto;
        }
        .back-to-index {
            text-align: center;
            margin: 15px 0;
        }
        .back-to-index a {
            color: #27ae60;
            text-decoration: none;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>BasicTopologicalOpe/PublicInterfaces/CATLengthFromBodyOnWire.h</h1>
    </div>
    
    <div class="navigation">
        <div><a href="CATCreateGeodesicLinePtPt.html">‚Üê ‰∏ä‰∏ÄÈ°µ: CATCreateGeodesicLinePtPt.h</a></div>
        <div><a href="CATTopCrvToNurbsCrvOperator.html">‰∏ã‰∏ÄÈ°µ: CATTopCrvToNurbsCrvOperator.h ‚Üí</a></div>
    </div>
    
    <div class="back-to-index">
        <a href="index.html">üìÅ ËøîÂõûÁõÆÂΩï</a>
    </div>
    
    <div class="content">#ifndef CATLengthFromBodyOnWire_h
#define CATLengthFromBodyOnWire_h

// COPYRIGHT DASSAULT SYSTEMES  1999

/**
 * @CAA2Level L1
 * @CAA2Usage U1
 */ 

#include &quot;YJ000GSM.h&quot;
#include &quot;ListPOfCATVertex.h&quot;
#include &quot;ListPOfCATEdge.h&quot;
#include &quot;CATSkillValue.h&quot;
#include &quot;CATMathDef.h&quot;
#include &quot;CATTopDef.h&quot;
#include &quot;CATMathPoint.h&quot;
#include &quot;CATCrvParam.h&quot;
#include &quot;CATTopOperator.h&quot;
#include &quot;CATTopData.h&quot;

class CATVertex;
class CATEdge;
class CATWire;
class CATBody;
class CATGeoFactory;
class CATString;
class CATLengthFromBodyOnWireImpl;
/**
* Class defining the operator that computes the length between two point bodies.
* This operator can be used in two modes.
* In BASIC mode, the operation is run at the operator creation. In this mode,
* you have to read the resulting distance, and delete the operator, as in the following 
* example:
*&lt;pre&gt;CATLengthFromBodyOnWire * Op =  CATLengthFromBodyOnWire (factory,vertex1,vertex2); 
* double distance = Op-&gt;GetDistance(NULL,NULL);
* delete Op;&lt;/pre&gt;
* If you need specific parameters, use the ADVANCED mode:
* &lt;ul&gt;
*&lt;li&gt; Create the operator ,
*&lt;li&gt; Set parameters,
*&lt;li&gt; Run,
*&lt;li&gt; Get the resulting distance,
*&lt;li&gt; Delete the operator.
*&lt;/ul&gt;
* Example:
* &lt;pre&gt; 
* CATLengthFromBodyOnWire * Op =  CATLengthFromBodyOnWire (factory,vertex1,vertex2); 
* Op-&gt;SetSupport(Wire); // on a wire
* Op-&gt;Run();
* CATMathPoint Point1, Point2;
* double distance = Op-&gt;GetDistance(&amp;Point1,&amp;Point2);
* delete Op;
*&lt;/pre&gt;
*/
class ExportedByYJ000GSM CATLengthFromBodyOnWire  : public CATTopOperator
{
  CATCGMVirtualDeclareClass(CATLengthFromBodyOnWire);
public:
  friend class CATLengthFromBodyOnWireImpl;

 /**
	 * Constructs an operator that computes the distance between two vertices along a wire.
	 * @param iFactory
	 * The factory that creates the resulting body.
     * @param iData
	 * The pointer to the data defining the software configuration.
	 * @param iVertex1
	 * A pointer to the first vertex.
	 * @param iVertex2
	 * A pointer to the second vertex.
	 * @param iWire
	 * A pointer to the wire on which the distance is computed.
     * @param iMode
	 * The operator mode.
	 * &lt;dl&gt;&lt;dt&gt;&lt;tt&gt;BASIC&lt;/tt&gt; The operation is performed at the operator creation.
     *     &lt;dt&gt;&lt;tt&gt;ADVANCED&lt;/tt&gt;Use the Run method. &lt;/dl&gt;
	 */
  CATLengthFromBodyOnWire( CATGeoFactory      *iFactory,
                           CATTopData         *iData,
                           CATVertex          *iVertex1, 
                           CATVertex          *iVertex2,
                           CATWire            *iWire,
                           CATSkillValue      iMode     = BASIC );


 /**
	 * Constructs an operator that computes the distance between two vertices along a wire.
	 * @param iFactory
	 * The factory that creates the resulting body.
     * @param iVertex1
	 * A pointer to the first vertex.
	 * @param iVertex2
	 * A pointer to the second vertex.
	 * @param iWire
	 * A pointer to the wire on which the distance is computed.
     * @param iMode
	 * The operator mode.
	 * &lt;dl&gt;&lt;dt&gt;&lt;tt&gt;BASIC&lt;/tt&gt; The operation is performed at the operator creation.
     *     &lt;dt&gt;&lt;tt&gt;ADVANCED&lt;/tt&gt;Use the Run method. &lt;/dl&gt;
	 */
  CATLengthFromBodyOnWire( CATGeoFactory      *iFactory,
                           CATVertex          *iVertex1, 
                           CATVertex          *iVertex2,
                           CATWire            *iWire,
                           CATSkillValue      iMode     = BASIC );

/**
	 * Constructs an operator that computes the distance between two vertices along a wire body.
	 * @param iFactory
	 * The factory that creates the resulting body.
      * @param iData
	 * The pointer to the data defining the software configuration.
	 * @param iVertex1
	 * A pointer to the first body point.
	 * @param iVertex2
	 * A pointer to the second body point.
	 * @param iWire
	 * A pointer to the wire body on which the distance is computed.
     * @param iMode
	 * The operator mode.
	 * &lt;dl&gt;&lt;dt&gt;&lt;tt&gt;BASIC&lt;/tt&gt; The operation is performed at the operator creation.
     *     &lt;dt&gt;&lt;tt&gt;ADVANCED&lt;/tt&gt;Use the Run method. &lt;/dl&gt;
	 */
  CATLengthFromBodyOnWire( CATGeoFactory      *iFactory,
                           CATTopData         *iData,
                           CATBody            *iVertex1, 
                           CATBody            *iVertex2,
                           CATBody            *iWire,
                           CATSkillValue      iMode     = BASIC );
/**
	 * Constructs an operator that computes the distance between two vertices along a wire body.
	 * @param iFactory
	 * The factory that creates the resulting body.
	 * @param iVertex1
	 * A pointer to the first body point.
	 * @param iVertex2
	 * A pointer to the second body point.
	 * @param iWire
	 * A pointer to the wire body on which the distance is computed.
      * @param iMode
	 * The operator mode.
	 * &lt;dl&gt;&lt;dt&gt;&lt;tt&gt;BASIC&lt;/tt&gt; The operation is performed at the operator creation.
     *     &lt;dt&gt;&lt;tt&gt;ADVANCED&lt;/tt&gt;Use the Run method. &lt;/dl&gt;
	 */
  CATLengthFromBodyOnWire( CATGeoFactory      *iFactory,
                           CATBody            *iVertex1, 
                           CATBody            *iVertex2,
                           CATBody            *iWire,
                           CATSkillValue      iMode     = BASIC );

  ~CATLengthFromBodyOnWire();

  /**
   * Runs the operator in &lt;tt&gt;ADVANCED&lt;/tt&gt; mode.
   * @return
   * A diagnosis.
   * &lt;br&gt;Legal values&lt;/tt&gt;: 0 if some arguments of the operator are invalid, 1 otherwise.
   */
  int  Run();
  
  /**
   * Returns the computed distance.
   * @param iMathPoint1
   * A pointer to the mathematical definition of the first point. 
   * &lt;br&gt;If &lt;tt&gt;NULL&lt;/tt&gt;, this argument is not computed.
   * @param iMathPoint2
   * A pointer to the mathematical definition of the second point.
   * &lt;br&gt;If &lt;tt&gt;NULL&lt;/tt&gt;, this argument is not computed.
   * @return
   * The computed distance.
   * &lt;br&gt;Sample: to retrieve the distance and the mathematical definition of the first point:
   * &lt;pre&gt;CATMathPoint Point1;
   * double distance = Op-&gt;GetDistance(&amp;Point1,NULL);&lt;/pre&gt;
   */
  CATLength GetDistance( CATMathPoint *iMathPoint1 = NULL, CATMathPoint *iMathPoint2 = NULL) const;

  /** 
	 * Defines the new vertices between which the distance is computed.
	 * &lt;br&gt;To use in &lt;tt&gt;ADVANCED&lt;/tt&gt; mode.
  	 * @param iNewVertex1
	 * A pointer to the first vertex.
	 * @param iNewVertex2
	 * A pointer to the second vertex.
	 */
  void SetVertices( CATVertex *iNewVertex1, CATVertex *iNewVertex2 );

	/** 
	 * Defines the new vertices between which the distance is computed.
	 * &lt;br&gt;To use in &lt;tt&gt;ADVANCED&lt;/tt&gt; mode.
  	 * @param iNewVertex1
	 * A pointer to the first vertex.
	 * @param iNewVertex2
	 * A pointer to the second vertex.
	 */
  void SetVertices( CATBody *iNewVertex1, CATBody *iNewVertex2 );

	/**
  * Defines a new edge along which the distance is computed.
  * &lt;br&gt;To use in &lt;tt&gt;ADVANCED&lt;/tt&gt; mode.
  * @param iNewEdge
  * A pointer to the edge along which the distance is computed.
  */
  void SetEdge( CATEdge *iNewEdge );

	/**
  * Defines a new wire body along which the distance is computed.
  * &lt;br&gt;To use in &lt;tt&gt;ADVANCED&lt;/tt&gt; mode.
  * @param iNewEdge
  * A pointer to the wire body along which which the distance is computed.
  */
  void SetEdge( CATBody *iNewEdge );

#if  defined  (  CATIACGMV5R21  )
	//KY1 : 10-12-2010
public:
//	/**	@nodoc @nocgmitf */ 
	static const  CATString  *GetDefaultOperatorId();
//	/**	@nodoc @nocgmitf */
	const  CATString  *GetOperatorId();

#endif

#if  defined  (  CATIACGMV5R21  )
	//KY1 : 10-12-2010
protected:
	///**	@nodoc @nocgmitf */
	int RunOperator();
  CATLengthFromBodyOnWire *GetImplementation();
  CATLengthFromBodyOnWire* _Implementation;
	///**	@nodoc @nocgmitf */
	//static  CATString  _OperatorId;
	///**  
	//@nodoc @nocgmitf 
	//pour le flaggage definitif de la definition complete des donnees Input/Output de l&#x27;operateur
	//*/
	void   RequireDefinitionOfInputAndOutputObjects();
#endif

private:

#ifndef   CATIACGMV5R21 
  CATVertex *GetVertexFromBody( CATBody  **iBody );
  //
  void FillEdgesAndOrientationsFromWire( CATWire **iEdge );
  //
  void RunNoEdge();
  //
  void RunWithEdges();
  //
  void GetVertexOnEdge( CATVertex    *iVertex,
			CATMathPoint &amp;oTheResultingPoint,
			CATCrvParam  &amp;oTheResultingParam,
			int          &amp;EdgePos );

  //
  void GetEdgeLimits(  int iEdgePos, 
		       CATCrvParam &amp;StartParam, 
		       CATCrvParam &amp;EndParam );

  //
  int MoveToNextEdge( int &amp;oEdgePos );
  //
  double ComputeLengthOnEdge( int &amp;oEdgePos,
			      CATCrvParam &amp;StartParam,
			      CATCrvParam &amp;EndParam  );

  //
  void SetInternalData();
  

  //- Input data
  CATTopData           _TopData;
  CATGeoFactory       *_Factory;
  CATVertex           *_Vertex1,
                      *_Vertex2;
  CATWire             *_Wire;
  CATLISTP(CATEdge)    _Edge;
  CATSide             *_EdgeSides;

  //- Internal Data;
  CATCrvParam          _StartParam;
  int                  _StartEdgePos;
  CATCrvParam          _EndParam;
  int                  _EndEdgePos;

  //- _Direction must have the values : 
  //-  &quot;1&quot; : for increasing;
  //-  &quot;-1&quot;: for decreasing:
  //-  &quot;0&quot; &quot; for vertex on same edge or closed wire.
  int                  _Direction;

  

  //- Computed data
  CATLength           _Result;
  CATMathPoint        _MPt1;
  CATMathPoint        _MPt2;

#endif
  
};


ExportedByYJ000GSM
CATLengthFromBodyOnWire* CATCreateLengthFromBodyOnWire(CATGeoFactory      *iFactory,
                           CATTopData         *iData,
                           CATVertex          *iVertex1, 
                           CATVertex          *iVertex2, 
                           CATWire            *iWire,
                           CATSkillValue      iMode     = BASIC );


ExportedByYJ000GSM
CATLengthFromBodyOnWire* CATCreateLengthFromBodyOnWire(CATGeoFactory      *iFactory,
                           CATTopData         *iData,
                           CATBody            *iVertex1, 
                           CATBody            *iVertex2,
                           CATBody            *iWire,
                           CATSkillValue      iMode     = BASIC );

#endif

</div>
    
    <div class="navigation">
        <div><a href="CATCreateGeodesicLinePtPt.html">‚Üê ‰∏ä‰∏ÄÈ°µ: CATCreateGeodesicLinePtPt.h</a></div>
        <div><a href="CATTopCrvToNurbsCrvOperator.html">‰∏ã‰∏ÄÈ°µ: CATTopCrvToNurbsCrvOperator.h ‚Üí</a></div>
    </div>
</body>
</html>