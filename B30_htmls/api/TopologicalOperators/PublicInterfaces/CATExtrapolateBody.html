<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TopologicalOperators/PublicInterfaces/CATExtrapolateBody.h</title>
    <style>
        body {
            font-family: 'Consolas', 'Monaco', monospace;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .header {
            background-color: #2c3e50;
            color: white;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .navigation {
            display: flex;
            justify-content: space-between;
            margin: 15px 0;
            padding: 10px;
            background-color: #ecf0f1;
            border-radius: 5px;
        }
        .navigation a {
            color: #2980b9;
            text-decoration: none;
            padding: 5px 10px;
            background-color: white;
            border-radius: 3px;
            border: 1px solid #bdc3c7;
        }
        .navigation a:hover {
            background-color: #3498db;
            color: white;
        }
        .content {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            border: 1px solid #bdc3c7;
            white-space: pre-wrap;
            font-size: 14px;
            line-height: 1.4;
            overflow-x: auto;
        }
        .back-to-index {
            text-align: center;
            margin: 15px 0;
        }
        .back-to-index a {
            color: #27ae60;
            text-decoration: none;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>TopologicalOperators/PublicInterfaces/CATExtrapolateBody.h</h1>
    </div>
    
    <div class="navigation">
        <div><a href="CATDynTransformation.html">‚Üê ‰∏ä‰∏ÄÈ°µ: CATDynTransformation.h</a></div>
        <div><a href="CATRemoveEdge.html">‰∏ã‰∏ÄÈ°µ: CATRemoveEdge.h ‚Üí</a></div>
    </div>
    
    <div class="back-to-index">
        <a href="index.html">üìÅ ËøîÂõûÁõÆÂΩï</a>
    </div>
    
    <div class="content">#ifndef CATEXTRAPOLATEBODY_H
#define CATEXTRAPOLATEBODY_H

// COPYRIGHT DASSAULT SYSTEMES 1999
/**
* @CAA2Level L1
* @CAA2Usage U1
*/
//=============================================================================
// Extrapolation in tangency of a single wire body on one or both extremites with imposed lengths or targets
//=============================================================================
//
#include &lt;CATIACGMLevel.h&gt;
#define CATExtrapolateBody_CGMReplayImplementation
#define CATExtrapolateBody_CGMReplayImplementationWithLimitType
#define CATExtrapolateBody_NewR21SP2Methods &quot;ajout autoris methodes non virtuelles&quot;

#include &lt;BO0SWEEP.h&gt;
#include &lt;CATTopOperator.h&gt;

#ifdef CATExtrapolateBody_CGMReplayImplementation
#include &lt;CATCGMStream.h&gt;
// pb architecture; ramen indirectement par une astuce #include &lt;CATCGMOutput.h&gt;
#endif

// #define  CATExtrapolateBody_TestComputeExtrapolation


class CATGeoFactory;
class CATBody;
class CATDomain;
class CATEdge;
class CATSurface;
class CATCurve;
class CATFace;
class CATCell;
class CATCGMJournalList;
class CATLoop;
class CATCrvParam;
class CATMathBox;
class CATMathPlane;
class CATMathDirection;
class CATMathLine;
class CATMathPoint;
class CATMathVector;
#ifndef NULL
#define NULL 0
#endif

/**
* Class representing an operator that extrapolates 1D body (CATWire).
*&lt;br&gt;The wire can be extrapolated on a planar support (optional).
*&lt;br&gt;The extrapolation gives a result that is continuous in tangency.
* To use it:
* &lt;ul&gt;
* &lt;li&gt;Create it with the &lt;tt&gt;CATCreateExtrapolateBody&lt;/tt&gt; global function.
* &lt;li&gt;Tune it with appropriate options, using the &lt;tt&gt;SetXxx&lt;/tt&gt; methods.
* &lt;li&gt;Run it
* &lt;li&gt;Get the resulting body, using the &lt;tt&gt;GetResult&lt;/tt&gt; method. If you do not want
* to keep the resulting body, use the @href CATICGMContainer#Remove method to remove it from the
* geometric factory, after the operator deletion.
*&lt;li&gt;Delete it after use  with the usual C++ &lt;tt&gt;delete&lt;/tt&gt; operator.
*&lt;/ul&gt; 
*/ 

class ExportedByBO0SWEEP CATExtrapolateBody : public CATTopOperator
{
  CATCGMVirtualDeclareClass(CATExtrapolateBody);
public:
    /** @nodoc */
    CATExtrapolateBody (CATGeoFactory     * iGeoFactory,
        CATBody           * iBodyToExtrapol,
        CATSurface        * iSupport=NULL,
        CATCGMJournalList * iReport=NULL,
        double              iMinimumGap=0.);

    /** @nodoc */
    CATExtrapolateBody (CATGeoFactory     * iGeoFactory,
        CATBody           * iBodyToExtrapol,
        CATTopData        * iTopData,
        CATSurface        * iSupport=NULL,
        double              iMinimumGap=0.);

    /**
    * Destructor.
    */
    virtual ~CATExtrapolateBody();

    /**
    * Runs &lt;tt&gt;this&lt;/tt&gt; operator.
    */
    int Run() ;

    /**
    * @nodoc
    *&lt;p&gt;Extrapolates the wire to a CATMathBox limit.
    *&lt;br&gt;The target.
    *&lt;xmp&gt;
    *                                   --------- (*iTargetBox)
    *                                   !       !
    *      .....                        !       !
    *   ...                             !       !
    * ..                                ---------
    *&lt;/xmp&gt;
    *&lt;br&gt;The wire after extrapolation.
    *&lt;xmp&gt;
    *                                   --------- (*iTargetBox)
    *                                   !       !
    *      .............................!.......!.
    *   ...                             !       !
    * ..                                ---------
    * &lt;/xmp&gt;
    * @param iEndCell
    * The pointer to the cell to be extrapolated.
    * @param iTargetBox
    * The pointer to the CATMathBox to be used as an extrapolation limit.
    */
    void SetLimitToExtrapolate
        (CATCell          * iEndCell,
        CATMathBox       * iTargetBox);

    /**
        * @nodoc
        *&lt;p&gt;Extrapolates the wire to a CATBody limit. A CATMathBox is used
        * to refine the computation.
        *&lt;br&gt;The target.
        *&lt;xmp&gt;
        *                                   --------- (*iTargetBody)
        *                                   !       !
        *      .....                        !       !
        *   ...                             !       !
        * ..                                ---------
        *&lt;/xmp&gt;
        *&lt;br&gt;The wire after extrapolation.
        * &lt;xmp&gt;
        *                                   --------- (*iTargetBody)
        *                                   !       !
        *      .............................!       !
        *   ...                             !       !
        * ..                                ---------
        * &lt;/xmp&gt;
        * @param iEndCell
        * The pointer to the cell to be extrapolated.
        * @param iTargetBox
        * The pointer to the CATMathBox to be used in order to refine the computation.
        * @param iTargetBody
        * The pointer to the body to be used as an extrapolation limit.
    */
    void SetLimitToExtrapolate
       (CATCell          * iEndCell,
        CATMathBox       * iTargetBox,
        CATBody          * iTargetBody);
        /** 
        * Specifies the extrapolation length.
        * @param iEndCell
        * The pointer to the cell to be extrapolated.
        * @param iLength
        * The extrapolation length.
    */
    void SetLimitToExtrapolate
       (CATCell          * iEndCell,
        double             iLength );

    /** 
        * @nodoc
        *&lt;p&gt;Specifies a target CATMathBox plus another CATMathBox to be translated to
        * the extrapolation end.
        *                                   ---------
        *         ---- (*iSourceBox)        !       !
        *  .......!.*!                      !       !
        *         ----                      !       !
        *                                   ---------
        * After extrapolation
        *                                   --------- (*iTargetBox)
        *                                   !       !----
        *      .............................!.......!!  ! (*iSourceBox translated to extrapolation end)
        *   ...                             !       !----
        *                                   ---------
        * @param iEndCell
        * The pointer to the cell to be extrapolated.
        * @param iSourceBox
        * The CATMathBox to be translated.
        * @param iTargetBox
        * The target box.
    */
    void SetLimitToExtrapolate
       (CATCell          * iEndCell,
        CATMathBox       * iSourceBox,
        CATMathBox       * iTargetBox);

    /**
        * @nodoc
        * Specifies a target plane. The input CATMathPlane can be of any orientation
        * (the normal to the plane
        * is defined so that the scalar product with the extrapolation direction is positive).
        *&lt;xmp&gt;
        *    --                                !
        *   !  !  -------------&gt;               !-&gt;
        *    --                                !
        * &lt;/xmp&gt;
        * &lt;p&gt; After extrapolation
        *&lt;xmp&gt;
        * 
        *                                       ! --
        *                                       !!  !
        *                                       ! --
        * &lt;/xmp&gt;
        * In addition, the source box which is translated can be rotated around
        * the optional revolution axis. See below:
        * &lt;xmp&gt;
        *            * !  * (points resulting from the revolution)
        *          P   !     *
        *         *    C     M : End point translated by the source box 
        *         . *  !  *
        *              !      . &lt;-- tg: end tangent
        * tgP--&gt; .     !
        *              !       .
        *       .      !           * &lt;-- targetplane
        *              !       *
        *      .       !   *
        *              O
        *     .    *    .
        *       *         . (. : plane normal)
        *&lt;/xmp&gt;
        */
    void SetLimitToExtrapolate
       (CATCell          * iEndCell,
        CATMathBox       * iSourceBox,
        CATMathPlane     * iTargetPlane,
        CATMathLine      * iRevolutionAxis = NULL);

    /**
     * @nodoc
     * Specifies a CATMathDirection in addition to the CATMathBox.
     * The translated plane relimits the extrapolation after the CATMathBox.
    *&lt;xmp&gt;
    *            *              --
    * ............* --&gt;        !  !
    *              *            --
    *               * (plane)
    *&lt;/xmp&gt;
    *&lt;p&gt; After extrapolation
    *&lt;xmp&gt;
    *                           -- *
    * .........................!..!.* 
    *                           --   *
    *                                 * (translated plane)
    *&lt;/xmp&gt;
    */
    void SetLimitToExtrapolate 
       (CATCell          * iEndCell,
        CATMathDirection * iSourcePlaneDirection,
        CATMathBox       * iTargetBox);

    /**
        * Returns the pointer to the resulting body.
    */
    CATBody* GetResult() ;
    
    /**
    @nodoc
    Returns the topological journal.
    */
    CATCGMJournalList * GetTopReport ();

    /** @nodoc
    * Enables the replacement of internal edge and vertex in the case of a line 
    * extrapolation.
    * By default, there is no replacement.
    */
    void SetReplaceMode();

public:
   /**   @nodoc @nocgmitf */
   static const  CATString  *GetDefaultOperatorId();

protected:
   /**   @nodoc @nocgmitf */
   int RunOperator();

   /**   @nodoc @nocgmitf */
   static  CATString  _OperatorId;
   /**   @nodoc @nocgmitf */
   const  CATString  *GetOperatorId();
   /**  
   @nodoc @nocgmitf 
   pour le flaggage definitif de la definition complete des donnees Input/Output de l&#x27;operateur
   */
   void   RequireDefinitionOfInputAndOutputObjects();

#ifdef CATExtrapolateBody_CGMReplayImplementation
   /**   @nodoc @nocgmitf */
   void WriteInput(CATCGMStream&amp; Str);
   /**   @nodoc @nocgmitf */
   void Dump      (CATCGMOutput &amp;os);
   /**   @nodoc @nocgmitf */
   CATExtCGMReplay* IsRecordable(short&amp; oLevelOfRuntime, short&amp; oVersionOfStream);
#endif


protected:

    #ifdef CATExtrapolateBody_NewR21SP2Methods
    /** @nodoc nocgmitf */
     void Init();
    /** @nodoc nocgmitf */
     void RattrapReport(int dbgReport);
    #endif
    /** @nodoc */
    double ComputeExtrapolationLength
       (CATMathPoint     &amp; iPointExtr,
        CATMathVector    &amp; iTgExtr  ,
        CATMathBox       * iSourceBox,
        CATMathDirection * iSourcePlaneDirection,
        CATMathBox       * iTargetBox,
        CATMathPlane     * iTargetPlane,
        CATMathLine      * iRevolutionAxis);
    /** @nodoc */
    void DefLimitToExtrapolate
       (int                iLimitType,
        CATCell          * iEndCell,
        CATMathBox       * iSourceBox,
        CATMathDirection * iSourcePlaneDirection,
        CATMathBox       * iTargetBox,
        CATMathPlane     * iTargetPlane,
        CATMathLine      * iRevolutionAxis,
        CATBody          * iTargetBody,
        double             iSpecifiedLength
       );
    /** @nodoc */
    void TrimWireOnBody(
        CATGeoFactory            * iGeoFactory,
        CATSoftwareConfiguration * iConfig,
        CATCurve                 * iCurve,
        CATBody                  * iTargetBody,
        CATCrvParam              &amp; oCrvParam );

#ifdef  CATExtrapolateBody_TestComputeExtrapolation
    /** @nodoc */
    void TestComputeExtrapolation ();
#endif

    /** @nodoc */
    CATGeoFactory*    _GeoFactory;
    /** @nodoc */
    CATGeoFactory*    _ImplFactory;
    /** @nodoc */
    CATSurface*       _InputSupport;
    /** @nodoc */
    CATBody *         _InputBody;
    /** @nodoc */
    double            _MinimumGap;
    /** @nodoc */
    CATBody *         _ResultBody;
    /** @nodoc */
    CATCGMJournalList* _Report;
    /** @nodoc */
    CATCGMJournalList* _TmpReport;
    /** @nodoc */
    CATLONG32          _ReplaceMode; // 1 for Replace mode
    /** @nodoc */
    short              _JournalJuste; // 1 if end vertex OK
    /** @nodoc */
    int               _NbEndToExtrapolate ;
#define             CATExtrapolateBody_MaxEndToExtrapolate 2
    /** @nodoc */
    CATCell*          _EndCells    [CATExtrapolateBody_MaxEndToExtrapolate];
    /** @nodoc */
    CATMathBox*       _TargetBoxes [CATExtrapolateBody_MaxEndToExtrapolate];
    /** @nodoc */
    CATMathPlane*     _TargetPlanes[CATExtrapolateBody_MaxEndToExtrapolate];
    /** @nodoc */
    CATMathBox*       _SourceBoxes [CATExtrapolateBody_MaxEndToExtrapolate];
    /** @nodoc */
    CATMathDirection* _SourcePlaneDirections [CATExtrapolateBody_MaxEndToExtrapolate];
    /** @nodoc */
    CATMathLine*      _RevolutionAxis [CATExtrapolateBody_MaxEndToExtrapolate];
   /** @nodoc */
    CATBody *         _TargetBodies[CATExtrapolateBody_MaxEndToExtrapolate];
   /** @nodoc */
    double            _Lengths     [CATExtrapolateBody_MaxEndToExtrapolate];
   #ifdef CATExtrapolateBody_CGMReplayImplementationWithLimitType
   /** @nodoc */
    int               _LimitType   [CATExtrapolateBody_MaxEndToExtrapolate];
   #endif
};

/**
 * Creates a CATExtrapolateBody operator.
 * @param iFactory
 * The factory of the geometry.
 * @param iData
 * The pointer to the data defining the software configuration and the journal. If the journal inside &lt;tt&gt;iData&lt;/tt&gt;
 * is &lt;tt&gt;NULL&lt;/tt&gt;, it is not filled.
 * @param iBodyToExtrapol
 * The CATWire to be extrapolated.
 * @param iSupport
 * The surfacic support on which the CATWire is to be extrapolated. This option is
 * only available for planar supports.
 * @param iMinimumGap
 * The minimum gap. 
 * @return
 * The pointer to the created operator. To delete after use with the usual C++ &lt;tt&gt;delete&lt;/tt&gt; operator.
 */
ExportedByBO0SWEEP CATExtrapolateBody * CATCreateExtrapolateBody( CATGeoFactory     * iGeoFactory,
                                                                  CATTopData        * iTopData,
                                                                  CATBody           * iBodyToExtrapol,
                                                                  CATSurface        * iSupport=NULL,
                                                                  double              iMinimumGap=0.);

#ifdef CATExtrapolateBody_CGMReplayImplementation
/**   @nodoc @nocgmitf */
/**
 * Creates a CATExtrapolateBody operator from a CGMReplay file.
 */
extern &quot;C&quot;
ExportedByBO0SWEEP CATCGMOperator* CATLoadCATExtrapolateBody(CATCGMStream &amp;Str, const short LevelOfRuntime, const short VersionOfStream);
#endif

#endif
</div>
    
    <div class="navigation">
        <div><a href="CATDynTransformation.html">‚Üê ‰∏ä‰∏ÄÈ°µ: CATDynTransformation.h</a></div>
        <div><a href="CATRemoveEdge.html">‰∏ã‰∏ÄÈ°µ: CATRemoveEdge.h ‚Üí</a></div>
    </div>
</body>
</html>