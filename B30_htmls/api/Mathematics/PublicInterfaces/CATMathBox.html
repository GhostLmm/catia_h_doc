<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mathematics/PublicInterfaces/CATMathBox.h</title>
    <style>
        body {
            font-family: 'Consolas', 'Monaco', monospace;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .header {
            background-color: #2c3e50;
            color: white;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .navigation {
            display: flex;
            justify-content: space-between;
            margin: 15px 0;
            padding: 10px;
            background-color: #ecf0f1;
            border-radius: 5px;
        }
        .navigation a {
            color: #2980b9;
            text-decoration: none;
            padding: 5px 10px;
            background-color: white;
            border-radius: 3px;
            border: 1px solid #bdc3c7;
        }
        .navigation a:hover {
            background-color: #3498db;
            color: white;
        }
        .content {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            border: 1px solid #bdc3c7;
            white-space: pre-wrap;
            font-size: 14px;
            line-height: 1.4;
            overflow-x: auto;
        }
        .back-to-index {
            text-align: center;
            margin: 15px 0;
        }
        .back-to-index a {
            color: #27ae60;
            text-decoration: none;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Mathematics/PublicInterfaces/CATMathBox.h</h1>
    </div>
    
    <div class="navigation">
        <div><a href="CATMathAxis2D.html">‚Üê ‰∏ä‰∏ÄÈ°µ: CATMathAxis2D.h</a></div>
        <div><a href="CATMathBox2D.html">‰∏ã‰∏ÄÈ°µ: CATMathBox2D.h ‚Üí</a></div>
    </div>
    
    <div class="back-to-index">
        <a href="index.html">üìÅ ËøîÂõûÁõÆÂΩï</a>
    </div>
    
    <div class="content">#ifndef CATMathBox_H
#define CATMathBox_H

// COPYRIGHT DASSAULT SYSTEMES  1999

/**
* @CAA2Level L1
* @CAA2Usage U1
*/ 


#include &quot;CATMathematics.h&quot;

#include &quot;CATMathDef.h&quot;
#include &quot;CATIACGMLevel.h&quot;
#include &quot;IUnknown.h&quot;
#include &quot;CATMathInline.h&quot;


class CATMathPoint;
class CATMathLine;
class CATMathPlane;
class CATMathDirection ;

/** @c++ansi fbq 2004-08-05.10:18:26 [Replace forward declaration by #include &lt;iosfwd.h&gt;] **/
#ifdef _CAT_ANSI_STREAMS
#include &lt;iosfwd.h&gt;
#else
class ostream; 
#endif

/**
* Class representing a 3D box, parallel to the canonical axis.
* &lt;b&gt;Role&lt;/b&gt;:
* &lt;br&gt; The box is defined by two CATMathPoint, the first 
* &lt;tt&gt;(XMin, YMin, ZMin)&lt;/tt&gt; called the low
* extremity, and the other one (&lt;tt&gt;(XMax, YMax, ZMax)&lt;/tt&gt;) the high extremity.
*&lt;br&gt; A box can be seen as a set. If one of the cooordinates of the low 
* extremity is greater
* than the corresponding coordinate of the high  extremity, the box is empty.
* In other words, a box is not empty if &lt;tt&gt; XMin &lt; XMax &lt;/tt&gt; and 
* &lt;tt&gt; YMin &lt; YMax &lt;/tt&gt; and &lt;tt&gt; ZMin &lt; ZMax&lt;/tt&gt;.
*/
class ExportedByCATMathematics CATMathBox
{
public:
	//======================================================================
	//  CONSTRUCTORS AND DESTRUCTOR
	//======================================================================

	/**
	* Constructs an empty CATMathBox.
	*/
	CATMathBox();

	/**
	* Constructs a CATMathBox from two CATMathPoint.
	* @param iCheck
	* &lt;dl&gt;
	* &lt;dt&gt;&lt;tt&gt;FALSE&lt;/tt&gt;&lt;dd&gt;The two CATMathPoint are assumed to be the
	* lowest one and the highest one. This can create an empty box if it is not
	* the case.
	* &lt;dt&gt;&lt;tt&gt;TRUE&lt;/tt&gt; &lt;dd&gt;It creates the smallest box that contains
	* the two CATMathPoint (default mode).
	* &lt;/dl&gt;
	* 
	*/
	CATMathBox(const CATMathPoint  &amp;iLowExtremity,
		                   const CATMathPoint  &amp;iHighExtremity,
		                   const CATBoolean iCheck=TRUE);

	/**
	* Constructs a CATMathBox from its extremities.
	*&lt;br&gt;No verification is performed.
	*/
	CATMathBox(const double iXMin, const double iXMax,
		                   const double iYMin, const double iYMax,
		                   const double iZMin, const double iZMax);

	/**
	* Copy Constructor.
	*/
	CATMathBox(const CATMathBox &amp;iBoxToCopy);

#ifndef CATIACGMV5R23
	/**
	* Destructor.
	*/
	~CATMathBox();
#endif


	//======================================================================
	// SET AND GET THE EXTREMITIES
	//=====================================================================

	/**
   * @nodoc
	* @deprecated V5R15 GetLimits
	* Retrieves the extremities of &lt;tt&gt;this&lt;/tt&gt; CATMathBox.
	* &lt;br&gt;Throws an error if the box is empty.
	*/
	void GetExtremities(double &amp;ioXMin, double &amp;ioXMax,
		                             double &amp;ioYMin, double &amp;ioYMax,
		                             double &amp;ioZMin, double &amp;ioZMax) const;

	/**
	* Retrieves the extremities of &lt;tt&gt;this&lt;/tt&gt; CATMathBox.
	* @return 
	* &lt;tt&gt;E_FAIL&lt;/tt&gt; if the box is empty, &lt;tt&gt;S_OK&lt;/tt&gt; otherwise.
	*/
	HRESULT GetLimits(double &amp;ioXMin, double &amp;ioXMax,
		                               double &amp;ioYMin, double &amp;ioYMax,
		                               double &amp;ioZMin, double &amp;ioZMax) const;

	/**
	* Sets the extremities of &lt;tt&gt;this&lt;/tt&gt; CATMathBox.
	*&lt;br&gt;No verification is done.
	*/
	void SetExtremities(const double iXMin, const double iXMax,
		                             const double iYMin, const double iYMax,
		                             const double iZMin, const double iZMax);


	/**
   * @nodoc
	* @deprecated V5R15 GetLowLimit
	* Retrieves the low extremity of &lt;tt&gt;this&lt;/tt&gt; CATMathBox.
	* &lt;br&gt;Throws an error if the box is empty.
	*/
	void GetLow(CATMathPoint &amp;ioLowPoint) const;


	/**
	* Retrieves the low extremity of &lt;tt&gt;this&lt;/tt&gt; CATMathBox.
	* @return 
	* &lt;tt&gt;E_FAIL&lt;/tt&gt; if the box is empty, &lt;tt&gt;S_OK&lt;/tt&gt; otherwise.
	*/
	HRESULT GetLowLimit(CATMathPoint &amp;ioLowPoint) const;

	/**
	* Modifies the low extremity of &lt;tt&gt;this&lt;/tt&gt; CATMathBox.
	*&lt;br&gt;No verification is performed.
	*/
	void SetLow(const CATMathPoint &amp;iLowPoint);


	/**
   * @nodoc
	* @deprecated V5R15 GetHighLimit
	* Retrieves the high extremity of &lt;tt&gt;this&lt;/tt&gt; CATMathBox.
	* &lt;br&gt;Throws an error if the box is empty.
	*/
	void GetHigh(CATMathPoint &amp;ioHighPoint) const;


	/**
	* Retrieves the high extremity of &lt;tt&gt;this&lt;/tt&gt; CATMathBox.
	* @return 
	* &lt;tt&gt;E_FAIL&lt;/tt&gt; if the box is empty, &lt;tt&gt;S_OK&lt;/tt&gt; otherwise.
	*/
	HRESULT GetHighLimit(CATMathPoint &amp;ioHighPoint) const;

	/**
	* Modifies the high extremity of &lt;tt&gt;this&lt;/tt&gt; CATMathBox.
	*&lt;br&gt;No verification is performed.
	*/
	void SetHigh(const CATMathPoint &amp;iHighPoint);

	/**
	* Resets &lt;tt&gt;this&lt;/tt&gt; CATMathBox to an empty one.
	*/
	INLINE void SetToEmpty();

	/**
	* Retrieves the center of &lt;tt&gt;this&lt;/tt&gt; CATMathBox.
	* @return 
	* &lt;tt&gt;E_FAIL&lt;/tt&gt; if the box is empty, &lt;tt&gt;S_OK&lt;/tt&gt; otherwise.
	*/
	 HRESULT GetBoxCenter(CATMathPoint &amp;ioCenterPoint) const;


	/**
	* Tests if &lt;tt&gt;this&lt;/tt&gt; CATMathBox is empty.
	* @return
	* &lt;tt&gt;TRUE&lt;/tt&gt; if the CATMathBox is empty, &lt;tt&gt;FALSE&lt;/tt&gt; otherwise.
	*/
	INLINE CATBoolean IsEmpty() const;


	//=====================================================================
	// COMPUTATION THAT MODIFIES THE BOX
	//======================================================================

	/**
	* Replaces &lt;tt&gt;this&lt;/tt&gt; CATMathBox with the intersection of two other
	* CATMathBox.
	*&lt;br&gt;It can lead to  an empty CATMathBox.
	*/
	void SetToIntersection(const CATMathBox &amp;iBox1, const CATMathBox &amp;iBox2);

	/**
	* Replaces &lt;tt&gt;this&lt;/tt&gt; CATMathBox with the union of two
	* other CATMathBox.
	*/
	void SetToUnion(const CATMathBox &amp;iBox1, const CATMathBox &amp;iBox2);

	/**
	* Modifies &lt;tt&gt;this&lt;/tt&gt; CATMathBox by forcing a CATMathPoint to belong to it.
	*/
	void AddInside(const CATMathPoint &amp;iPointToAdd);

	/**
	* Replaces &lt;tt&gt;this&lt;/tt&gt; CATMathBox by its union with another CATMathBox.
	*/
	void AddInside(const CATMathBox &amp;iBoxToAdd);

	/**
	* Modifies &lt;tt&gt;this&lt;/tt&gt; CATMathBox by adding a given thickness on each direction.
	*&lt;br&gt;Hence,  the low extremity of the box becomes 
	*(&lt;tt&gt;XMin-iThickness, YMin-iThickness, ZMin-iThickness&lt;/tt&gt;) and the high
	* extremity becomes
	*(&lt;tt&gt;XMax+iThickness, YMax+iThickness, ZMax+iThickness&lt;/tt&gt;).
	*&lt;br&gt;This method does not apply on an empty box, but no error is thrown in this case.
	*/
	void Inflate(double iThickness);

	/**
	* Modifies &lt;tt&gt;this&lt;/tt&gt; CATMathBox by having it larger at the same place.
	* &lt;br&gt;The CATMathBox increases as follows: 
	* Let &lt;tt&gt;f=(iScaleRatio-1)/2 &lt;/tt&gt; be the multiplicative ratio on each
	* direction and 
	* &lt;tt&gt;dX=XMax-XMin, dY=YMax-YMin, dZ=ZMax-ZMin&lt;/tt&gt; be the lengths of the box in
	* each direction.
	* The low extremity of the box becomes 
	*(&lt;tt&gt;XMin-dX*f, YMin-dY*f, ZMin-dZ*f&lt;/tt&gt;) and the high
	* extremity becomes
	*(&lt;tt&gt;XMax+dX*f, YMax+dY*f, ZMax+dZ*f&lt;/tt&gt;). In particular, if
	* the length of the box is null in one direction, it still
	* remains null after a local scale.
	*&lt;br&gt;This method does not apply on an empty box, but no error is thrown in this case.
	*/
	void LocalScale(double iScaleRatio);

	//======================================================================
	// COMPUTATION WITH A BOX THAT RETURNS A RESULT
	//======================================================================

	/**
	* Returns &lt;tt&gt;TRUE&lt;/tt&gt; if &lt;tt&gt;this&lt;/tt&gt; CATMathBox is intersecting an another one.
	* The test takes a given tolerance into account (the result is equivalent
	* to inflating one of the box of iTol and to compute IsIntersecting with
	* no tolerance.
	*&lt;br&gt; Note that if the intersection is a point or a line, the
	* result is true.
	*/
	CATBoolean IsIntersecting(const CATMathBox &amp;iBox, double iTol =0.) const;

	/**
	* Returns &lt;tt&gt;TRUE&lt;/tt&gt; if the projection of &lt;tt&gt;this&lt;/tt&gt; CATMathBox onto the plane perpendicular to the direction
	* The test takes into account a given tolerance  (the result is equivalent
	* to inflating one of the box of iTol and to compute IsIntersectingAlongDir with
	* no tolerance.
	*/
	CATBoolean IsIntersectingAlongDir(CATMathBox &amp;iBox,const CATMathDirection &amp;iDir, double iTol=0.) const;

	/**
	* Returns &lt;tt&gt;TRUE&lt;/tt&gt; if &lt;tt&gt;this&lt;/tt&gt; CATMathBox is intersecting the segment [iP1,iP2].
	*&lt;br&gt; Note that if the intersection is a point or a line, the
	* result is true.
	*/
	CATBoolean IsIntersecting(const CATMathPoint &amp;iP1, const CATMathPoint &amp;iP2) const;

	/**
	* Returns &lt;tt&gt;TRUE&lt;/tt&gt; if &lt;tt&gt;this&lt;/tt&gt; CATMathBox is intersecting a CATMathLine.
	*&lt;br&gt; Note that if the intersection is a point or a line, the
	* result is true.
	*/
	CATBoolean IsIntersecting(const CATMathLine &amp;iLine) const;

	/**
	* Returns &lt;tt&gt;TRUE&lt;/tt&gt; if &lt;tt&gt;this&lt;/tt&gt; CATMathBox is intersecting a CATMathPlane.
	*&lt;br&gt; Note that if the intersection is a point or a line, the
	* result is true.
	*/
	CATBoolean IsIntersecting(const CATMathPlane &amp;iPlane) const;

	/**
	* Returns &lt;tt&gt;TRUE&lt;/tt&gt; if &lt;tt&gt;this&lt;/tt&gt; CATMathBox defined at a given tolerance
	* is containing a CATMathPoint.
	*&lt;br&gt;The CATMathBox used is defined by:
	*&lt;tt&gt;[_XMin-iTol, _XMax+iTol] x [_YMin-iTol, _YMax+iTol] x
	* [_ZMin-iTol, _ZMax+iTol] &lt;/tt&gt;
	*/
	CATBoolean IsContaining(const CATMathPoint &amp;iPoint, double iTol=0.) const;

	/**
	* Returns &lt;tt&gt;TRUE&lt;/tt&gt; if &lt;tt&gt;this&lt;/tt&gt; CATMathBox is completely containing an other
	* CATMathBox.
	*&lt;br&gt;Note that the empty CATMathBox is contained by all CATMathBox and does
	* not contain any CATMathBox, even an empty one.
	*/
	CATBoolean IsContaining(const CATMathBox &amp;iOtherBox) const;

	/**
	* Returns the geometric volume included in &lt;tt&gt;this&lt;/tt&gt; CATMathBox.
	*/
	double Volume() const ;

	/**
	* Returns the distance between &lt;tt&gt;this&lt;/tt&gt; CATMathBox and a CATMathPoint.
	*/ 
	double DistanceTo( const CATMathPoint &amp; iPoint) const;


	/**
	* Returns the square distance between &lt;tt&gt;this&lt;/tt&gt; CATMathBox and a CATMathPoint.
	*/ 
	double SquareDistanceTo( const CATMathPoint &amp; iPoint) const;

	/**
	* Returns the square of the maximal distance between &lt;tt&gt;this&lt;/tt&gt; CATMathBox and a CATMathPoint.
  * For a point inside the box, the maximal distance is the distance between it and the furthest point of the box from  it.
	*/ 
	double SquareMaxDistanceTo( const CATMathPoint &amp; iPoint) const;
	//======================================================================
	// For Debug
	//======================================================================
	/**
	* @nodoc
	* Returns the minimum square distance between &lt;tt&gt;this&lt;/tt&gt; CATMathBox and a CATMathBox.
	* If boxes intersects, returns 0.
	* If one of boxes is empty, returns -1.
	*/ 
	double SquareDistanceTo( const CATMathBox &amp; iBox) const;


	/**
	* @nodoc
	* @deprecated V5R20.
	* Dumps a CATMathBox.
	* &lt;br&gt;This writes the following on the ostream:
	* &lt;dl&gt;&lt;dt&gt;&lt;tt&gt;Empty CATMathBox &lt;/tt&gt; &lt;dd&gt; If the box is empty. 
	*     &lt;dt&gt;&lt;pre&gt;
	*LowCorner  = ( LowFirstCoord  , LowSecondCoord  , LowThirdCoord )
	*HighCorner = ( HighFirstCoord , HighSecondCoord , HighThirdCoord )&lt;/pre&gt;     
	*     &lt;dd&gt; If the box is not empty.&lt;/dl&gt;
	* @param iStream
	* A pointer to the output. If &lt;tt&gt;0L&lt;/tt&gt;, the method dumps 
	* on the &lt;tt&gt;cout&lt;/tt&gt; output.
	*/
	void Dump(ostream * iStream=0L) const;
	//
	//

	/**
	* @nodoc
	* @deprecated V5R20 DistanceTo
	*/
	INLINE double DistanceToPoint( const CATMathPoint &amp; iPoint) const
	{ return DistanceTo(iPoint); }

	/**
	* @nodoc
	* @deprecated V5R20 SquareDistanceTo
	*/
	INLINE double SquareDistanceToPoint( const CATMathPoint &amp; iPoint) const
	{ return SquareDistanceTo(iPoint); }

	/**
	* @nodoc
	* @deprecated V5R20.
	* &lt;br&gt;Throws an error if the box is empty.
	*/
	const CATMathPoint &amp; GetStartPoint() const;

	/**
	* @nodoc
	* @deprecated V5R20.
	* &lt;br&gt;Throws an error if the box is empty.
	*/
	const CATMathPoint &amp; GetEndPoint() const;

	/**
	* @nodoc
	* @deprecated V5R20 IsContaining
	*/
	int ContainsPoint(const CATMathPoint &amp;iPoint) const;


	/**
	* @nodoc
	* @deprecated V5R20.
	*/
	friend ExportedByCATMathematics ostream&amp; operator &lt;&lt; (ostream&amp; s,
		const CATMathBox &amp; iBox);

	//======================================================================
	// INTERNAL DATAS
	//======================================================================


private:
	// Extremities
	double _XMin, _YMin, _ZMin, _XMax, _YMax, _ZMax;

	// Flag which is not null if the box is empty
	CATBoolean _Empty;


	// Internal method
	int ComputeZone(const double iX,
		                          const double iY,
		                          const double iZ) const;
};

//======================================================================
// INLINE IMPLEMENTATIONS
//======================================================================
INLINE void CATMathBox::SetToEmpty()
{
	_Empty=1;
}

INLINE CATBoolean CATMathBox::IsEmpty() const
{
	return _Empty;
}

#endif
</div>
    
    <div class="navigation">
        <div><a href="CATMathAxis2D.html">‚Üê ‰∏ä‰∏ÄÈ°µ: CATMathAxis2D.h</a></div>
        <div><a href="CATMathBox2D.html">‰∏ã‰∏ÄÈ°µ: CATMathBox2D.h ‚Üí</a></div>
    </div>
</body>
</html>