<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VisualizationBase/PublicInterfaces/CAT3DLightSourceGP.h</title>
    <style>
        body {
            font-family: 'Consolas', 'Monaco', monospace;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .header {
            background-color: #2c3e50;
            color: white;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .navigation {
            display: flex;
            justify-content: space-between;
            margin: 15px 0;
            padding: 10px;
            background-color: #ecf0f1;
            border-radius: 5px;
        }
        .navigation a {
            color: #2980b9;
            text-decoration: none;
            padding: 5px 10px;
            background-color: white;
            border-radius: 3px;
            border: 1px solid #bdc3c7;
        }
        .navigation a:hover {
            background-color: #3498db;
            color: white;
        }
        .content {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            border: 1px solid #bdc3c7;
            white-space: pre-wrap;
            font-size: 14px;
            line-height: 1.4;
            overflow-x: auto;
        }
        .back-to-index {
            text-align: center;
            margin: 15px 0;
        }
        .back-to-index a {
            color: #27ae60;
            text-decoration: none;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>VisualizationBase/PublicInterfaces/CAT3DLightSourceGP.h</h1>
    </div>
    
    <div class="navigation">
        <div><a href="CAT3DIndicator.html">‚Üê ‰∏ä‰∏ÄÈ°µ: CAT3DIndicator.h</a></div>
        <div><a href="CAT3DLightSourceRep.html">‰∏ã‰∏ÄÈ°µ: CAT3DLightSourceRep.h ‚Üí</a></div>
    </div>
    
    <div class="back-to-index">
        <a href="index.html">üìÅ ËøîÂõûÁõÆÂΩï</a>
    </div>
    
    <div class="content">#ifndef CAT3DLightSourceGP_H
#define CAT3DLightSourceGP_H

// COPYRIGHT DASSAULT SYSTEMES 1999

/**
 * @CAA2Level L1
 * @CAA2Usage U1
 */

#include &quot;CATGraphicPrimitive.h&quot;
#include &quot;CATMathDirectionf.h&quot;
#include &quot;CATMathPointf.h&quot;
#include &quot;CATVizMacForMetaClass.h&quot;

class CATStreamer;

/**
* Type of light source.
* @param LS_INFINITE
*   Infinitely distant like the sun,
* @param LS_SPOT
*   Spotlight with a cutoff angle between 0 and 90 degrees,
*   or equal to 180 degrees (lightbulb equivalent)
* 
* @see CAT3DLightSourceGP
*/
enum CATLightSourceType { LS_INFINITE, LS_SPOT };

/** @nodoc */
typedef CATLightSourceType LightSourceType ;

/**
* Mode of light source.
* @param  Local
*  Attached to the viewpoint
* @param  Global
*  Attached to the model
* @see CAT3DLightSourceGP
*/
enum CATLightSourceMode { Local, Global };

/** @nodoc */
typedef CATLightSourceMode LightSourceMode ;

#include &quot;CATViz.h&quot;
/**
 * Class to create light source graphic primitives.
 * &lt;b&gt;Role&lt;/b&gt;: A light source graphic primitive indicates the position
 * and orientation of lights in the viewer. A light source can be of
 * two different types : &lt;br&gt;
 *    &lt;tt&gt;LS_INFINITE&lt;/tt&gt; infinitely distant like the sun,
 *    &lt;tt&gt;LS_SPOT&lt;/tt&gt; spotlight with a cutoff angle between 0 and 90 degrees,
 *                     or equal to 180 degrees (lightbulb equivalent)
 * A light source can be of two differents modes : &lt;br&gt;
 *    &lt;tt&gt;Local&lt;/tt&gt; attached to the viewpoint
 *    &lt;tt&gt;Global&lt;/tt&gt; attached to the model
 * By default, one light source is created and activated. A viewer can handle
 * a maximum of eight light source graphic primitives.
 * To add a light source, prefer adding a CAT3DLightSourceRep.
 */
class ExportedByCATViz CAT3DLightSourceGP : public CATGraphicPrimitive
{
  CATDeclareClass;
  CATVizDeclareClass;

public:

  /** Constructs an empty light source graphic primitive of type LS_INFINITE. */
  CAT3DLightSourceGP();

  /**
   * Constructs a light source graphic primitive.
   * @param iType
   * The type of the light source.
   * @param iMode
   * The mode of the light source.
   * @param iOrigin
   * The location of the light source.
   * @param iDirection
   * The direction of the light source.
   * @param iSpotAngle
   * The cutoff angle of a spotlight.
   * @param iSpotExponent
   * value used for specular component calculations 
   * @param iConstantAttenuation
   * The constant factor of the attenuation equation.
   * @param iLinearAttenuation
   * The linear factor of the attenuation equation.
   * @param iQuadraticAttenuation
   * The quadraric factor of the attenuation equation.
   */
  CAT3DLightSourceGP (CATLightSourceType        iType,
		      CATLightSourceMode        iMode,
		      const CATMathPointf     &amp; iOrigin,
		      const CATMathDirectionf &amp; iDirection,
		      const float               iSpotAngle             = 180.f,
		      const float               iSpotExponent          = 0.f,
		      const float               iConstantAttenuation   = 1.f,
		      const float               iLinearAttenuation     = 0.f,
		      const float               iQuadraticAttenuation  = 0.f);

  /** @nodoc */
  CAT3DLightSourceGP(const LightSourceType      iType,
                     const LightSourceMode      iMode,
                     const CATMathPointf      &amp; iOrigin,
                     const CATMathDirectionf  &amp; iDirection,
                     const CATMathDirectionf  &amp; iUp,
                     const CATMathDirectionf  &amp; iRight,
                     const float              * iAmbient,
                     const float              * iDiffuse,
                     const float              * iSpecular,
                     const float                iSpotAngle,
                     const float                iSpotExponent,
                     const float                iSpotInnerAngle,
                     const float                iConstantAttenuation,
                     const float                iLinearAttenuation,
                     const float                iQuadraticAttenuation,
                     const float                iAxialFalloffStart,
                     const float                iAxialFalloffEnd,
                     const float                iAreaType,
                     const float                iAreaStatus,
                     const float              * iAreaGeometry);

  /**
   * Retrieves the color components of the light source.
   * All float values are in [0,1].
   * @param oAmbient
   * Red, green, blue and alpha values of ambient component.
   * @param oDiffuse
   * Red, green, blue and alpha values of diffuse component.
   * @param oSpecular
   * Red, green, blue and alpha values of specular component.
   */
  inline void GetColor (const float       * oAmbient[4],
		        const float       * oDiffuse[4],
		        const float       * oSpecular[4]);

  /**
   * Sets the color components of the light source.
   * All float values are in [0,1].
   * @param iAmbient
   * Red, green, blue and alpha values of ambient component.
   * @param iDiffuse
   * Red, green, blue and alpha values of diffuse component.
   * @param iSpecular
   * Red, green, blue and alpha values of specular component.
   */
  inline void SetColor (const float         iAmbient[4],
		        const float         iDiffuse[4],
		        const float         iSpecular[4]);

  /**
   * Retrieves the parameters of a light source.
   * @param iType
   * The type of the light source.
   * @param oMode
   * The mode of the light source.
   * @param oOrigin
   * The point where the light source is located. This parameter has
   * no meaning for LS_INFINITE light sources.
   * @param oDirection
   * The direction of the light source.
   * @param oSpotAngle
   * The half-angle aperture of the cone of the spotlight.
   * @param oSpotExponent
   * The exponent value used for specular component calculations.
   * @param oConstantAttenuation
   * The constant factor of the attenuation function.
   * @param oLinearAttenuation
   * The light factor of the attenuation function.
   * @param oQuadraticAttenuation
   * The quadratic factor of the attenuation function.
   */
  inline void Get    (CATLightSourceType   &amp; iType,
    CATLightSourceMode   &amp; oMode,
    CATMathPointf     &amp; oOrigin,
    CATMathDirectionf &amp; oDirection,
    float             * oSpotAngle,
    float             * oSpotExponent,
    float             * oConstantAttenuation,
    float             * oLinearAttenuation,
    float             * oQuadraticAttenuation);

  /** @nodoc */
  void Get(CATLightSourceType &amp; oType,
           CATLightSourceMode &amp; oMode,
           CATMathPointf      &amp; oOrigin,
           CATMathDirectionf  &amp; oDirection,
           CATMathDirectionf  &amp; oUp,
           CATMathDirectionf  &amp; oRight,
           float              * oAmbient,
           float              * oDiffuse,
           float              * oSpecular,
           float              * oSpotAngle,
           float              * oSpotExponent,
           float              * oSpotInnerAngle,
           float              * oConstantAttenuation,
           float              * oLinearAttenuation,
           float              * oQuadraticAttenuation,
           float              * oAxialFalloffStart,
           float              * oAxialFalloffEnd,
           float              * oAreaType,
           float              * oAreaStatus,
           float              * oAreaGeometry);
  
  /** @nodoc */
  virtual void Draw (CATRender &amp; render);
  
  /** @nodoc
  *  Streams the graphic primitive of a light source.
  * &lt;br&gt;&lt;b&gt;Role:&lt;/b&gt;This method streams a &lt;tt&gt;CAT3DLightSourceGP&lt;/tt&gt; .
  *  @param   oStr
  *    The streamer used to stream the &lt;tt&gt;CAT3DLightSourceGP&lt;/tt&gt;.
  *  @param   iSavetype
  *    &lt;br&gt;&lt;b&gt;legal values&lt;/b&gt;
  *    &lt;ul&gt;
  *         &lt;li&gt;0 the name of the GP will not be saved&lt;/li&gt;
  *         &lt;li&gt;1 the name of the GP will be saved&lt;/li&gt;
  *    &lt;/ul&gt;
  */
  virtual void Stream(CATStreamer&amp; oStr,int iSavetype=0);
  
  /** @nodoc
  *  Unstreams the graphic primitive of a light source.
  * &lt;br&gt;&lt;b&gt;Role:&lt;/b&gt;This method unstreams a &lt;tt&gt;CAT3DLightSourceGP&lt;/tt&gt; .
  *  @param   iStr
  *    The streamer used to unstream the &lt;tt&gt;CAT3DLightSourceGP&lt;/tt&gt;.
  */
  virtual void UnStream(CATStreamer&amp; iStr);

  /** @nodoc */
  void SetApplicativeMode(unsigned int iMode);
  /** @nodoc */
  inline unsigned int GetApplicativeMode() const;

private:
  // data
  CATLightSourceType _type;
  CATLightSourceMode _mode;
  CATMathPointf      _origin;
  CATMathDirectionf  _direction;
  CATMathDirectionf  _up;
  CATMathDirectionf  _right;
  float              _spotInnerAngle;
  float              _spotAngle;
  float              _spotExponent;
  float              _axialFalloffStart;
  float              _axialFalloffEnd;
  float              _constantAttenuation;
  float              _linearAttenuation;
  float              _quadraticAttenuation;
  float              _areaType;
  float              _areaStatus;
  float              _areaGeometry[2];
  float              _ambient[4];
  float              _diffuse[4];
  float              _specular[4];
  unsigned int       _applicativeMode;

  virtual ~CAT3DLightSourceGP();
};

// inline method definition
inline void CAT3DLightSourceGP::SetColor(const float iAmbient[4],
					 const float iDiffuse[4],
					 const float iSpecular[4])
{
  for ( int i = 0; i&lt;4; i++ )
  {
    _ambient[i]  = iAmbient[i];
    _diffuse[i]  = iDiffuse[i];
    _specular[i] = iSpecular[i];
  }
}

inline void CAT3DLightSourceGP::GetColor(const float ** oAmbient,
					 const float ** oDiffuse,
					 const float ** oSpecular)
{
  if (oAmbient)  *oAmbient  = _ambient;
  if (oDiffuse)  *oDiffuse  = _diffuse;
  if (oSpecular) *oSpecular = _specular;
}

inline void CAT3DLightSourceGP::Get(CATLightSourceType   &amp; oType,
				    CATLightSourceMode   &amp; oMode,
				    CATMathPointf     &amp; oOrigin,
				    CATMathDirectionf &amp; oDirection,
				    float             * oSpotAngle,
				    float             * oSpotExponent,
				    float             * oConstantAttenuation,
				    float             * oLinearAttenuation,
				    float             * oQuadraticAttenuation)
{
  oType        = _type;
  oMode        = _mode;
  oOrigin      = _origin;
  oDirection   = _direction;
  if (oSpotAngle)            *oSpotAngle            = _spotAngle;
  if (oSpotExponent)         *oSpotExponent         = _spotExponent;
  if (oConstantAttenuation)  *oConstantAttenuation  = _constantAttenuation;
  if (oLinearAttenuation)    *oLinearAttenuation    = _linearAttenuation;
  if (oQuadraticAttenuation) *oQuadraticAttenuation = _quadraticAttenuation;
}
                                   

inline unsigned int CAT3DLightSourceGP::GetApplicativeMode() const
{
  return _applicativeMode;
}

#endif // CAT3DLightSourceGP
</div>
    
    <div class="navigation">
        <div><a href="CAT3DIndicator.html">‚Üê ‰∏ä‰∏ÄÈ°µ: CAT3DIndicator.h</a></div>
        <div><a href="CAT3DLightSourceRep.html">‰∏ã‰∏ÄÈ°µ: CAT3DLightSourceRep.h ‚Üí</a></div>
    </div>
</body>
</html>