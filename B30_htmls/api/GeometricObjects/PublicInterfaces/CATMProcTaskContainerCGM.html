<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GeometricObjects/PublicInterfaces/CATMProcTaskContainerCGM.h</title>
    <style>
        body {
            font-family: 'Consolas', 'Monaco', monospace;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .header {
            background-color: #2c3e50;
            color: white;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .navigation {
            display: flex;
            justify-content: space-between;
            margin: 15px 0;
            padding: 10px;
            background-color: #ecf0f1;
            border-radius: 5px;
        }
        .navigation a {
            color: #2980b9;
            text-decoration: none;
            padding: 5px 10px;
            background-color: white;
            border-radius: 3px;
            border: 1px solid #bdc3c7;
        }
        .navigation a:hover {
            background-color: #3498db;
            color: white;
        }
        .content {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            border: 1px solid #bdc3c7;
            white-space: pre-wrap;
            font-size: 14px;
            line-height: 1.4;
            overflow-x: auto;
        }
        .back-to-index {
            text-align: center;
            margin: 15px 0;
        }
        .back-to-index a {
            color: #27ae60;
            text-decoration: none;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>GeometricObjects/PublicInterfaces/CATMProcTaskContainerCGM.h</h1>
    </div>
    
    <div class="navigation">
        <div><a href="CATMProcProcessDataCGM.html">‚Üê ‰∏ä‰∏ÄÈ°µ: CATMProcProcessDataCGM.h</a></div>
        <div><a href="CATMProcTaskManagerCGM.html">‰∏ã‰∏ÄÈ°µ: CATMProcTaskManagerCGM.h ‚Üí</a></div>
    </div>
    
    <div class="back-to-index">
        <a href="index.html">üìÅ ËøîÂõûÁõÆÂΩï</a>
    </div>
    
    <div class="content">// COPYRIGHT DASSAULT SYSTEMES 2011

#ifndef CATMProcTaskContainerCGM_H
#define CATMProcTaskContainerCGM_H

#include &quot;CATIACGMLevel.h&quot;
#ifdef CATIACGMV5R23

/**
 * @CAA2Level L0
 * @CAA2Usage U2
 */

#include &quot;ExportedByCATGeometricObjects_MProc.h&quot;
#include &quot;CATCGMStream.h&quot;
#include &quot;CATErrorDef.h&quot;

class CATGeoFactory;
class CATMProcTaskContainerCGMImpl;
class CATCGMJournal;

/**
 * Class representing one operation or task to be computed using the MProc system.
 * &lt;b&gt;Note:&lt;/b&gt; Clients should derive their custom tasks from this class.
 * &lt;b&gt;Role:&lt;/b&gt; This class contains operational data, the inputs and outputs of a task,
 * as well as methods to simplify the streaming of CGM objects and methods to
 * facilitate the transfer of operational data between processes.
 * &lt;br&gt; Clients add data members and overload the transfer methods in custom
 * derived implementations.
 * &lt;br&gt; In sequential mode, only one task container per task is instantiated in the 
 * master process in the NextTask method of the task manager. 
 * When multiple processes are utilized, a duplicate is created in the slave process, 
 * and the streaming methods are used to transmit the operational data between them.
 * It&#x27;s up to the custom implementation to delete the object in the master process,
 * which typically occurs in the custom EndTask method.
 * Whereas the copy in the slave process is deleted automatically.
 * &lt;br&gt; This class works in conjunction with the CATMProcTaskManagerCGM class.
 * &lt;br&gt; See the MProc System technical article for more information.
 * @see CATMProcTaskManagerCGM
 */
class ExportedByCATGeometricObjects_MProc CATMProcTaskContainerCGM
{
public:

 /**
  * Default constructor initializes member data.
  */
  CATMProcTaskContainerCGM();

 /**
  * Virtual destructor.
  * &lt;br&gt; The default implementation releases base class data.
  */  
  virtual ~CATMProcTaskContainerCGM();

 /**
  * Method called by the MProc system to compute the operational task.
  * &lt;b&gt;Role:&lt;/b&gt; The Run method uses the computational data of the class
  * to compute the task. Using the inputs for the operation to compute 
  * the outputs (i.e. the results).
  * @return
  *  &lt;tt&gt;S_OK&lt;/tt&gt; if the operation succeeded, otherwise &lt;tt&gt;E_FAIL&lt;/tt&gt;.
  */
  virtual HRESULT Run() = 0;

 /**
  * Stream the inputs of an operation to a CATCGMStream.
  * &lt;b&gt;Role&lt;/b&gt;: Use this method to add all input data to the stream used
  * for inter-process communication.
  * &lt;br&gt; This method is called on the master process before 
  * the operational data is transmitted to a slave process.
  * @param iStream
  *  The output stream.
  * @return
  *  &lt;tt&gt;S_OK&lt;/tt&gt; if the operation succeeded, otherwise &lt;tt&gt;E_FAIL&lt;/tt&gt;.
  */
  virtual HRESULT StreamInput( CATCGMStream&amp; iStream) = 0;

 /**
  * Unstream the inputs of an operation from a CATCGMStream.
  * &lt;b&gt;Role&lt;/b&gt;: Use this method to retrieve all input data from the stream used
  * for inter-process communication.
  * &lt;br&gt; This method is called on a slave process after 
  * the operational data has been transmitted from the master process.
  * @param iStream
  *  The input stream.
  * @return
  *  &lt;tt&gt;S_OK&lt;/tt&gt; if the operation succeeded, otherwise &lt;tt&gt;E_FAIL&lt;/tt&gt;.
  */
  virtual HRESULT UnstreamInput( CATCGMStream&amp; iStream) = 0;

 /**
  * Stream the outputs of an operation to a CATCGMStream.
  * &lt;b&gt;Role&lt;/b&gt;: Use this method to add all output data to the stream used
  * for inter-process communication.
  * &lt;br&gt; This method is called on a slave process after completing the 
  * operation, before transmitting the result data to the master process.
  * @param iStream
  *  The output stream.
  * @param iResult
  *  The result of the operational task.
  * @return
  *  &lt;tt&gt;S_OK&lt;/tt&gt; if the operation succeeded, otherwise &lt;tt&gt;E_FAIL&lt;/tt&gt;.
  */
  virtual HRESULT StreamOutput( CATCGMStream&amp; iStream, HRESULT iResult) = 0;

 /**
  * Unstream the outputs of an operation from a CATCGMStream.
  * &lt;b&gt;Role&lt;/b&gt;: Use this method to retrieve results from the stream used
  * for inter-process communication.
  * &lt;br&gt; This method is called on the master process after 
  * the operational data has been received from a slave process.
  * @param iStream
  *  The input stream.
  * @param iResult
  *  The result of the operational task.
  * @return
  *  &lt;tt&gt;S_OK&lt;/tt&gt; if the operation succeeded, otherwise &lt;tt&gt;E_FAIL&lt;/tt&gt;.
  */
  virtual HRESULT UnstreamOutput( CATCGMStream&amp; iStream, HRESULT iResult) = 0;

 /**
  * Method called by the MProc system to release unnecessary resources.
  * &lt;b&gt;Role:&lt;/b&gt; The Release method is called after the operational task
  * has completed. Its main purpose is to help keep the factory container
  * clean in slave processes. Here newly created CGMObjects should not be
  * kept after operational results have been transmitted to the master process
  * because of potential internal issues related to identifiers.
  * It is therefore imperative that all newly created objects be removed from the 
  * factory container, leaving only objects that were originally transmitted
  * from the master process. It is important to keep the inputs around
  * because they may be used in subsequent operations.
  * See topic &quot;stream optimization&quot; for more details.
  * @param iResult
  *  The result of the computational task.
  * @param iCalledOnSlave
  *  Flag to identify if the method is called on a slave process.
  */
  virtual void Release( HRESULT iResult, CATBoolean iCalledOnSlave);

 /**
  * Stream a list of CGMObjects to a CATCGMStream.
  * &lt;b&gt;Role&lt;/b&gt;: Use this method to add CGMObjects to the stream used
  * for inter-process communication. The underlying functionality additionally
  * keeps track of the objects for optimization purposes.
  * &lt;br&gt; See topic &quot;stream optimization&quot; in the MProc System technical article.
  * @param iStream
  *  The output stream.
  * @param iCGMObjectList
  *  The list of objects to stream.
  * @return
  *  &lt;tt&gt;S_OK&lt;/tt&gt; if the operation succeeded, otherwise &lt;tt&gt;E_FAIL&lt;/tt&gt;.
  */
  HRESULT WriteGeometry( CATCGMStream&amp; iStream, CATLISTP(CATICGMObject)&amp; iCGMObjectList);

 /**
  * Stream a CGMObject to a CATCGMStream.
  * &lt;b&gt;Role&lt;/b&gt;: Use this method to add a CGMObject to the stream used
  * for inter-process communication. The underlying functionality additionally
  * keeps track of the objects for optimization purposes.
  * &lt;br&gt; See topic &quot;stream optimization&quot; in the MProc System technical article.
  * @param iStream
  *  The output stream.
  * @param iCGMObject
  *  The object to stream.
  * @return
  *  &lt;tt&gt;S_OK&lt;/tt&gt; if the operation succeeded, otherwise &lt;tt&gt;E_FAIL&lt;/tt&gt;.
  */
  HRESULT WriteGeometry( CATCGMStream&amp; iStream, CATICGMObject* iCGMObject);

 /**
  * Unstream multiple CGMObjects from a CATCGMStream and add them to a list.
  * &lt;b&gt;Role&lt;/b&gt;: Use this method to retrieve CGMObjects from the stream used
  * for inter-process communication. 
  * @param iStream
  *  The input stream.
  * @param oCGMObjectList
  *  The list of unstreamed objects.
  * @return
  *  &lt;tt&gt;S_OK&lt;/tt&gt; if the operation succeeded, otherwise &lt;tt&gt;E_FAIL&lt;/tt&gt;.
  */
  HRESULT ReadGeometry( CATCGMStream&amp; iStream, CATLISTP(CATICGMObject)&amp; oCGMObjectList);

 /**
  * Unstream a CGMObject from a CATCGMStream.
  * &lt;b&gt;Role&lt;/b&gt;: Use this method to retrieve a CGMObject from the stream used
  * for inter-process communication. 
  * @param iStream
  *  The input stream.
  * @param oCGMObject
  *  The unstreamed object.
  * @return
  *  &lt;tt&gt;S_OK&lt;/tt&gt; if the operation succeeded, otherwise &lt;tt&gt;E_FAIL&lt;/tt&gt;.
  */
  HRESULT ReadGeometry(CATCGMStream&amp; iStream, CATICGMObject*&amp; oCGMObject);

#ifdef CATIACGMR217CAA
  /**
  * Stream a journal to a CATCGMStream.
  * &lt;b&gt;Role&lt;/b&gt;: Use this method to add journal to the stream used
  * for inter-process communication. 
  * &lt;br&gt; See topic &quot;stream optimization&quot; in the MProc System technical article.
  * @param iStream
  *  The output stream.
  * @param iJournal
  *  The journal to stream.
  * @return
  *  &lt;tt&gt;S_OK&lt;/tt&gt; if the operation succeeded, otherwise &lt;tt&gt;E_FAIL&lt;/tt&gt;.
  */
  HRESULT WriteJournal( CATCGMStream&amp; iStream, CATCGMJournal* iJournal);

  /**
  * Unstream a journal from a CATCGMStream.
  * &lt;b&gt;Role&lt;/b&gt;: Use this method to retrieve a journal from the stream used
  * for inter-process communication. 
  * @param iStream
  *  The input stream.
  * @param oJournal
  *  The unstreamed journal.
  * @return
  *  &lt;tt&gt;S_OK&lt;/tt&gt; if the operation succeeded, otherwise &lt;tt&gt;E_FAIL&lt;/tt&gt;.
  */
  HRESULT ReadJournal(CATCGMStream&amp; iStream, CATCGMJournal*&amp; oJournal);
#endif

 /**
  * Retrieve the CATGeoFactory from this task.
  * @return
  *  The CATGeoFactory object.
  */
  CATGeoFactory* GetFactory();

 /**
  * Retrieve the implicit CATGeoFactory from this task.
  * @return
  *  The implicit CATGeoFactory object.
  */
  CATGeoFactory* GetImplicitFactory();

 /**
  * Get the CATSoftwareConfiguration associated with this task.
  * &lt;b&gt;Role:&lt;/b&gt; To properly support operator versioning, use the 
  * Set and GetSoftwareConfiguration methods to retain only one copy 
  * of a CATSoftwareConfiguration object.
  * @return
  *  The CATSoftwareConfiguration object.
  * @see SetSoftwareConfiguration
  */
  CATSoftwareConfiguration* GetSoftwareConfiguration();

 /**
  * Set the CATSoftwareConfiguration associated with this task.
  * &lt;b&gt;Role:&lt;/b&gt; To properly support operator versioning, use the 
  * Set and GetSoftwareConfiguration methods to retain only one copy 
  * of a CATSoftwareConfiguration object.
  * &lt;b&gt;Note:&lt;/b&gt; The CATSoftwareConfiguration object is actually stored
  * in the task manager so all tasks can utilize only one copy.
  * @see CATSoftwareConfiguration
  * @param iConfig
  *  The configuration to set.
  */
  void SetSoftwareConfiguration( CATSoftwareConfiguration* iConfig);

  /** @nodoc  internal functionality */
  CATMProcTaskContainerCGMImpl* Impl() const { return _Impl; }

private:

  CATMProcTaskContainerCGMImpl* _Impl;

  CATMProcTaskContainerCGM(const CATMProcTaskContainerCGM&amp; iOneOf);
  CATMProcTaskContainerCGM&amp; operator =(const CATMProcTaskContainerCGM&amp; iOneOf);
};

#endif

#endif
</div>
    
    <div class="navigation">
        <div><a href="CATMProcProcessDataCGM.html">‚Üê ‰∏ä‰∏ÄÈ°µ: CATMProcProcessDataCGM.h</a></div>
        <div><a href="CATMProcTaskManagerCGM.html">‰∏ã‰∏ÄÈ°µ: CATMProcTaskManagerCGM.h ‚Üí</a></div>
    </div>
</body>
</html>