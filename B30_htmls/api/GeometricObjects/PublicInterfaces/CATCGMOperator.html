<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GeometricObjects/PublicInterfaces/CATCGMOperator.h</title>
    <style>
        body {
            font-family: 'Consolas', 'Monaco', monospace;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .header {
            background-color: #2c3e50;
            color: white;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .navigation {
            display: flex;
            justify-content: space-between;
            margin: 15px 0;
            padding: 10px;
            background-color: #ecf0f1;
            border-radius: 5px;
        }
        .navigation a {
            color: #2980b9;
            text-decoration: none;
            padding: 5px 10px;
            background-color: white;
            border-radius: 3px;
            border: 1px solid #bdc3c7;
        }
        .navigation a:hover {
            background-color: #3498db;
            color: white;
        }
        .content {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            border: 1px solid #bdc3c7;
            white-space: pre-wrap;
            font-size: 14px;
            line-height: 1.4;
            overflow-x: auto;
        }
        .back-to-index {
            text-align: center;
            margin: 15px 0;
        }
        .back-to-index a {
            color: #27ae60;
            text-decoration: none;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>GeometricObjects/PublicInterfaces/CATCGMOperator.h</h1>
    </div>
    
    <div class="navigation">
        <div><a href="CATCGMNewInterface.html">‚Üê ‰∏ä‰∏ÄÈ°µ: CATCGMNewInterface.h</a></div>
        <div><a href="CATCGMOperatorDebug.html">‰∏ã‰∏ÄÈ°µ: CATCGMOperatorDebug.h ‚Üí</a></div>
    </div>
    
    <div class="back-to-index">
        <a href="index.html">üìÅ ËøîÂõûÁõÆÂΩï</a>
    </div>
    
    <div class="content">#ifndef CATCGMOperator_h_
#define CATCGMOperator_h_

// COPYRIGHT DASSAULT SYSTEMES  1999

/**
 * @CAA2Level L1
 * @CAA2Usage U1
 */ 

#include &lt;YP00IMPL.h&gt;
#include &quot;YP0LOGRP.h&quot;
#include &quot;CATBoolean.h&quot;
#include &quot;CATListOfCATICGMObjects.h&quot;
#include &quot;CATCGMVirtual.h&quot;
#include &quot;CATIAV5Level.h&quot;
#include &quot;CATIACGMLevel.h&quot;
#include &quot;CATDataType.h&quot;
#include &quot;CATGetTolerance.h&quot;
#include &quot;CATMathInline.h&quot;
#include &quot;CATCGMWarning.h&quot;
#include &quot;CATCGMInterruptDef.h&quot;
#include &quot;CATICGMUnknown.h&quot;

class CATCGMStream;
class CATICGMObject;
class CATCloneManager;
class CATString;
class CATGeoFactory;
class CATBaseUnknown;
class CATExtCGMReplay;
class CATCGMOutput;
class CATTopOperator;
class CATExtCGMReplay;
class CATSoftwareConfiguration;
class CATTopCheckJournal;
class CATError;
class CATExtGeoOperator;
class CATTolerance;
class CATechSet;
class CATechAttribute;
#include &quot;IUnknown.h&quot;
 

//=======================================================================================================================


/**
 * Base class for all the CGM operators.
 * &lt;br&gt;To use a CGM operator:
 * &lt;ul&gt;&lt;li&gt;Create it with the corresponding &lt;tt&gt;CreateXxx&lt;/tt&gt; global method
 * &lt;li&gt;Tune some parameters if needed
 * &lt;li&gt;Run it
 * &lt;li&gt;Read the results
 * &lt;li&gt;Delete it with the usual C++ delete operator.
 *&lt;/ul&gt;
 */
class ExportedByYP00IMPL CATCGMOperator : public CATCGMVirtual
{
  CATCGMVirtualDeclareClass(CATCGMOperator);
public:
  //&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
  //
  //            C A A             M E T H O D S
  //
  //&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;

/**
 * Runs &lt;tt&gt;this&lt;/tt&gt; operator.
 */
  virtual int Run();

/**
 * Returns the factory of &lt;tt&gt;this&lt;/tt&gt; operator. 
 * @return
 * The pointer to the geometric factory that creates the output objects.
 */
  INLINE CATGeoFactory * GetFactory() const;

/**
 * Retrieves the name of &lt;tt&gt;this&lt;/tt&gt; operator.
 * @return
 * The name. This output string is part of the class and will be deleted at its deletion.
 */
  virtual const CATString * GetOperatorId(); 

/** 
 * Defines the name of &lt;tt&gt;this&lt;/tt&gt; operator.
 * @param iOperatorName
 * The name of the operator.
 */
  void SetOperatorId (const CATString iOperatorName);

  /**
  * @nodoc
  * Associates an interruption function with this operator.
  * @param ipInterruptFunction
  * The interruption function to be written by the application calling this operator.
  * Must return TRUE if the operator is to be interrupted.
  */
  virtual void EnableInterrupt(CATCGMInterruptFunction ipInterruptFunction);


  //&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
  //
  //               N O N - C A A             M E T H O D S
  //
  //&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;

  /** @nodoc */
	enum CATCheckDiagnostic { CheckOK, CheckWarning, CheckError } ;


  /** @nodoc  */
  virtual ~CATCGMOperator();



   /** 
   * @nodoc
   * Returns the Software configuration to be taken 
   * into acccount by &lt;tt&gt;this&lt;/tt&gt; operator.
   * @return
   * The Software configuration.
   */
   virtual CATSoftwareConfiguration* GetSoftwareConfiguration() const;




  /** @nodoc */
  virtual CATTopOperator *IsTopological();

#ifdef CATIACGMR217CAA
   /** 
   * @nodoc @nocgmitf
   *  Returns true if the object is of type CATTopOperator
   * @return
   * return CATBoolean 
   */
  virtual  CATBoolean IsACATTopOperator();
#endif


  /** @nodoc @nocgmitf  dedicated to CATTopOperator/CATCGMreplay : internal use, do not overload */
  virtual void                               WriteTopOutput(CATCGMStream &amp; ioStream);

  /** @nodoc @nocgmitf   dedicated to CATTopOperator/CATCGMreplay : internal use, do not overload */
  virtual CATTopCheckJournal*                ReadTopOutput(CATCGMStream&amp; ioStream);

  /** @nodoc @nocgmitf   dedicated to CATTopOperator/CATCGMreplay : internal use, do not overload */
  virtual void                               DumpTopOutput(CATTopCheckJournal* iEquivalent, CATCGMOutput&amp; os);

  /** @nodoc @nocgmitf   dedicated to CATTopOperator/CATCGMreplay : internal use, do not overload */
	virtual CATBoolean                         ValidateTopOutput(CATTopCheckJournal* iEquivalent, CATCGMOutput&amp; os);


  /** @nodoc @nocgmitf   dedicated to CATCGMreplay : Dump current definition */
  virtual void                                Dump( CATCGMOutput&amp; os ) ;

  /** @nodoc   dedicated to CATCGMreplay : Check validity of Inputs */
  virtual CATCGMOperator::CATCheckDiagnostic  CheckInput(CATCGMOutput &amp; os);
 

  /** @nodoc @nocgmitf   dedicated to CATCGMreplay : Save definition ..  Open is done by static CATLoadOperatorId(...) */
  virtual void                                WriteInput(CATCGMStream  &amp; ioStream);



  /** @nodoc @nocgmitf   dedicated to CATCGMreplay : Dump result*/
  virtual void                                DumpOutput(CATCGMOutput &amp;os);

  /** @nodoc   dedicated to CATCGMreplay : Check validity of Outputs */
  virtual CATCGMOperator::CATCheckDiagnostic  CheckOutput(CATCGMOutput &amp; os);




  /** @nodoc @nocgmitf   dedicated to CATCGMreplay : Save expected reference for Stability */
  virtual void                               WriteOutput(CATCGMStream &amp; ioStream);

  /** @nodoc @nocgmitf   dedicated to CATCGMreplay : Dump expected reference for Stability */
  virtual void                               DumpOutput(CATCGMStream&amp; ioStream, CATCGMOutput&amp; os,int VersionNumber=1);

  /** @nodoc @nocgmitf   dedicated to CATCGMreplay : Check expected reference and computed result */
	virtual CATBoolean                         ValidateOutput(CATCGMStream&amp; ioStream, CATCGMOutput &amp; os,int VersionNumber=1);





  /** @nodoc  */
  void DefineFactory(CATGeoFactory *Factory);
  
  
  /** @nodoc @nocgmitf */
  CATBoolean IsRunning();
  
  /** @nodoc  */
  CATULONG32  GetSessionIdentifier();
  

   /** @nodoc */
   void SetWarningMode(CATCGMWarning iMode=Warning_On);

   /** @nodoc */
   CATCGMWarning GetWarningMode() const;


  /** @nodoc  Default is Valid and Modifiable (exeption CATCloneManager and CATTopOperator) */
  void GetResultStatus( short &amp; ioValidation, short &amp; ioModifiable ) const;
  
  /** @nodoc  */
  void SetResultStatus( const short iValidation, const short iModifiable );

  /** @nodoc @nocgmitf*/
  void CopyBaseClassDataPreRunFrom(CATCGMOperator const * ipSource);

  /** @nodoc @nocgmitf*/
  void CopyBaseClassDataPostRunFrom(CATCGMOperator const * ipSource);

  /** @nodoc */
  short GetNumberOfReplay();


  /** @nodoc  */
  INLINE CATExtGeoOperator *GetExtensible(CATBoolean iRequired = TRUE) const;

  /**
  * @nodoc CGMTkJournaling
  */
  virtual HRESULT DumpObjects(const unsigned int iOptions, CATechAttribute * iOutput, CATechSet * iJournaling) ;

protected :

#ifdef CATIACGMR217CAA
  /** @nodoc */
  virtual void CopyTopOperatorDataPreRunFrom(CATCGMOperator const *  iSource);

  /** @nodoc */
  virtual void CopyTopOperatorDataPostRunFrom(CATCGMOperator const *  iSource);
#endif



  /** @nodoc  */
  virtual CATExtCGMReplay *IsRecordable(short &amp; LevelOfRuntime, short &amp;VersionOfStream);

  /** @nodoc */
  virtual CATBoolean IsCAA();

  /** @nodoc */
  virtual CATBoolean IsNotAppli();

  /** @nodoc  */
  virtual int RunOperator();  

#ifdef CATIACGMR419CAA
  /** @nodoc  */
  virtual int RunExactOperator();

  /** @nodoc  */
  virtual int RunPolyOperator();
#endif

  /** @nodoc  */
  INLINE const CATTolerance &amp;GetTolerance() const;

  /** @nodoc  */
  INLINE const CATTolerance &amp;GetToleranceObject() const;

/**
 * @nodoc
 * Constructs a CGM operator.
 * @param iFactoryForCreation
 * The pointer to the geometric factory for the operation: input and output objects are created 
 * with this factory. 
 */
  CATCGMOperator (CATGeoFactory * iFactoryForCreation, CATExtGeoOperator * iExtensible = NULL);

	/** @nodoc */
  CATGeoFactory *const _Factory; // the factory

  /** @nodoc  */
  CATExtGeoOperator *const _Extensible;

  /** @nodoc  Necessite de definition de l&#x27;extension actuellement null, si echec alors c&#x27;est grave */
  CATExtGeoOperator *RequireExtensible() const;  


private :

  /** @nodoc  forbidden functionnality */
  CATCGMOperator(const CATCGMOperator&amp;);

  /** @nodoc   forbidden functionnality */
  CATCGMOperator&amp; operator=(const CATCGMOperator&amp;);


  /** @nodoc  Operateur specifiant l&#x27;extension adequate des la creation */
  void    DefineExtensible (CATExtGeoOperator * iExtensible);
  

  /** @nodoc  */
  void BeforeAction(CATExtCGMReplay * &amp;ioFactoryOperator, CATCGMStream *&amp;ioStream, size_t &amp;ioWhereDataBegin,
                                short  &amp;ioLevel,  short &amp; ioLevelOfRuntime, short &amp;ioVersionOfStream,
                                const short iRecording );

  /** @nodoc  */
  void AfterAction(CATExtCGMReplay * &amp;ioFactoryOperator, CATCGMStream *&amp;ioStream, size_t &amp;ioWhereDataBegin,
                                short  &amp;ioLevel,  short &amp; ioLevelOfRuntime, short &amp;ioVersionOfStream,
                                const short iRecording );

  /** @nodoc  */
  void AfterAction(CATExtCGMReplay * &amp;ioFactoryOperator, CATCGMStream *&amp;ioStream, size_t &amp;ioWhereDataBegin,
                                short  &amp;ioLevel,  short &amp; ioLevelOfRuntime, short &amp;ioVersionOfStream,
                                const short iRecording , CATError *iErr );



		/** @nodoc */
  friend class CATExtCGMReplay;
		/** @nodoc */
  friend class CATCGMReplayRecord;
		/** @nodoc */
  friend class CATExtGeoOperator;
		/** @nodoc */
  friend class CATCGMOperatorSpecialImplementation;
		/** @nodoc */
  friend class CATMProcOperatorStreamingSupport;
};

  /** @nodoc  */
INLINE CATExtGeoOperator *CATCGMOperator::GetExtensible(CATBoolean iRequired) const
{
  return (_Extensible || !iRequired) ? _Extensible  : RequireExtensible();
}

  /** @nodoc  */
INLINE CATGeoFactory * CATCGMOperator::GetFactory() const
{
  return _Factory;
}
  /** @nodoc  */
INLINE const CATTolerance &amp;CATCGMOperator::GetTolerance() const
{
  return _Factory ? ((CATICGMUnknown*)_Factory)-&gt;GetToleranceObject() : ::CATGetDefaultTolerance();
}

  /** @nodoc  */
INLINE const CATTolerance &amp;CATCGMOperator::GetToleranceObject() const
{
  return _Factory ? ((CATICGMUnknown*)_Factory)-&gt;GetToleranceObject() : ::CATGetDefaultTolerance();
}


#ifdef	_WINDOWS_SOURCE

extern &quot;C&quot;  { typedef __declspec(dllexport) CATCGMOperator * CATLoadCATCGMOperator(CATCGMStream &amp;Str,const short LevelOfRuntime, const short VersionOfStream); } 
#else
extern &quot;C&quot;  { typedef CATCGMOperator * CATLoadCATCGMOperator(CATCGMStream &amp;Str,const short LevelOfRuntime, const short VersionOfStream); } 
#endif


#endif
</div>
    
    <div class="navigation">
        <div><a href="CATCGMNewInterface.html">‚Üê ‰∏ä‰∏ÄÈ°µ: CATCGMNewInterface.h</a></div>
        <div><a href="CATCGMOperatorDebug.html">‰∏ã‰∏ÄÈ°µ: CATCGMOperatorDebug.h ‚Üí</a></div>
    </div>
</body>
</html>