<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MechanicalModelerUI/PublicInterfaces/CATFeatureAgent.h</title>
    <style>
        body {
            font-family: 'Consolas', 'Monaco', monospace;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .header {
            background-color: #2c3e50;
            color: white;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .navigation {
            display: flex;
            justify-content: space-between;
            margin: 15px 0;
            padding: 10px;
            background-color: #ecf0f1;
            border-radius: 5px;
        }
        .navigation a {
            color: #2980b9;
            text-decoration: none;
            padding: 5px 10px;
            background-color: white;
            border-radius: 3px;
            border: 1px solid #bdc3c7;
        }
        .navigation a:hover {
            background-color: #3498db;
            color: white;
        }
        .content {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            border: 1px solid #bdc3c7;
            white-space: pre-wrap;
            font-size: 14px;
            line-height: 1.4;
            overflow-x: auto;
        }
        .back-to-index {
            text-align: center;
            margin: 15px 0;
        }
        .back-to-index a {
            color: #27ae60;
            text-decoration: none;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>MechanicalModelerUI/PublicInterfaces/CATFeatureAgent.h</h1>
    </div>
    
    <div class="navigation">
        <div><a href="CATExtIGeomVisuChildren.html">‚Üê ‰∏ä‰∏ÄÈ°µ: CATExtIGeomVisuChildren.h</a></div>
        <div><a href="CATFeatureImportAgent.html">‰∏ã‰∏ÄÈ°µ: CATFeatureImportAgent.h ‚Üí</a></div>
    </div>
    
    <div class="back-to-index">
        <a href="index.html">üìÅ ËøîÂõûÁõÆÂΩï</a>
    </div>
    
    <div class="content">#ifndef __CATFeatureAgent_h__
#define __CATFeatureAgent_h__

// COPYRIGHT DASSAULT SYSTEMES 1999

/**
* @CAA2Level L1
* @CAA2Usage U1
*/

#include &quot;CATPathElementAgent.h&quot;
#include &quot;CATMechanicalModelerUI.h&quot;

#include &quot;CATMathTransformation.h&quot;
#include &quot;CATPathElement.h&quot;

#include &quot;CATMfBRepDefs.h&quot;


class CATMmuPartAgentImpl;
class CATISpecImportManager;

/**
* CATFeatureAgent behaviors.
* &lt;b&gt;Role:&lt;/b&gt;In the @href CATFeatureAgent#CATFeatureAgent or in 
* the @href CATFeatureAgent#SetAgentBehavior methods, a specific behavior can
* be set for the @href CATFeatureAgent selection agent.
* @param CATFAgDecodeResultNotKept
*   To deactivate the optimization mode which keeps the decode result.
* @param CATFAgAllowSelectionInContext
*  In assembly context, it means that the current document is a 
*  Product document, you can authorize end users to select geometry in 
*  another component (a Part or a Product) that the current one. The default behavior is
*  to prohibit this kind of &quot;external&quot; selection, whereas &lt;tt&gt;CATFAgAllowSelectionInContext&lt;/tt&gt; authorizes
*  that.
*  &lt;br&gt;Outside the assembly context, the behavior of the agent is like the @href CATPathElementAgent , 
*  the end user can select anywhere in the current document. 
*/
typedef unsigned long CATFeatureAgentBehavior;

/** @nodoc */
#define CATFAgDecodeResultNotKept     (1&lt;&lt;0)
/** @nodoc */
#define CATFAgAllowSelectionInContext (1&lt;&lt;2)


/**
* Class to select in Mechanical context.
* &lt;b&gt;Role&lt;/b&gt;:This agent of selection is dedicated for mechanical features. In addition to the 
*  @href CATPathElementAgent possibilities, this agent enables you to:
*  &lt;ul&gt;
*   &lt;li&gt;Featurize the selected object and manage the featurization options&lt;/li&gt;
*   &lt;li&gt;Authorize or not, in assembly context, the selection outside the current component. 
*       ( see @href CATFeatureAgentBehavior )&lt;/li&gt;
*  &lt;/ul&gt;
*  In addition, this agent automatically transforms a document in Visu mode in Design mode, 
*  when the end user selects one element of this document.
*  &lt;p&gt;The featurization of the selected object should be used only if it is necessary. This
*  feature is named a BRep feature. It implements at least the &lt;tt&gt;CATIMfBRep&lt;/tt&gt; interface. 
*  The @href #FeaturizeElement method enables you to know if the selected object
*  ( @href #GetElementValue ) has been
*  featurized. Once the BRep feature has been created you have only two possibilities:
*  &lt;ul&gt;
*  &lt;li&gt;Keep the feature: It must be aggregated, with the &lt;tt&gt;CATIDescendants&lt;/tt&gt; interface, 
*   in order to manage its automatic deletion. &lt;/li&gt;
*  &lt;li&gt;Delete the feature: The &lt;tt&gt;CATICutAndPastable&lt;/tt&gt; interface must be used.&lt;/li&gt;
*  &lt;/ul&gt;
*  &lt;/p&gt;
*/

class ExportedByCATMechanicalModelerUI CATFeatureAgent: public CATPathElementAgent
{
   /** @nodoc */
   friend class CATMmuPartAgentImpl;

   /** @nodoc */
   CATDeclareClass;

public:

   /**
   * Constructs a path element agent.
   * @param iId
   *   The agent identifier. It is used to retrieve the undo/redo titles in 
   *   the command resource file.
   * @param iType
   *   The type of the expected objects.
   *   The type corresponds to an interface implemented by the object. 
   *   &lt;br&gt;&lt;b&gt;&lt;Legal values&gt;&lt;/b&gt;If it is NULL, all the objects
   *   are accepted.
   *   &lt;br&gt;You can add interfaces with @href CATPathElementAgent#AddElementType or 
   *   you can specified later an ordered list thanks to the 
   *   @href CATPathElementAgent#SetOrderedTypeType method.
   * @param iBehavior
   *   The agent behavior. The behavior is given in the form of a
   *   concatenation of the facet values using the | character. Refer to the @href CATPathElementAgent#CATPathElementAgent method
   *    for details about the valid facets. 
   *    &lt;br&gt;However, for the two following facets the default value is the opposite 
   *    of the &lt;tt&gt;CATPathElementAgent&lt;/tt&gt; class.
   *   &lt;ul&gt;
   *   &lt;li&gt;Tooltip: &lt;tt&gt;CATDlgEngWithTooltip&lt;/tt&gt; is the default and not
   *   &lt;tt&gt;CATDlgEngWithoutTooltip&lt;/tt&gt;.&lt;/li&gt;
   *   &lt;li&gt;User Selection Filter: &lt;tt&gt;CATDlgEngWithUserSelectionFilter&lt;/tt&gt; is the default and not
   *   &lt;tt&gt;CATDlgEngWithoutUserSelectionFilter&lt;/tt&gt;.&lt;/li&gt;
   *   &lt;/ul&gt;
   *   &lt;br&gt;The behavior may be specified later with the @href CATDialogAgent#SetBehavior method.
   * @param iMode
   *   The featurization mode to featurized the selected geometry.
   *   &lt;br&gt;&lt;b&gt;Legal values&lt;/b&gt;: The featurization mode is defined with options
   *   separeted with the | character.
   *   &lt;br&gt;e.g.: &lt;code&gt;MfRelimitedFeaturization|MfPermanentBody&lt;/code&gt;
   *   &lt;br&gt;The default featurization mode is the &lt;tt&gt;MfNoFeaturization&lt;/tt&gt; option (=0).
   *   &lt;br&gt;The featurization mode may be specified later with the @href #SetAgentBehavior method.
   * @param iSupport
   *   The support of the featurized object.
   *   &lt;br&gt;&lt;b&gt;Legal values&lt;/b&gt;: 
   *    &lt;ul&gt;
   *     &lt;li&gt; NULL_var when &lt;tt&gt;iMode&lt;/tt&gt; is &lt;tt&gt;MfNoFeaturization&lt;/tt&gt; or
   *   &lt;tt&gt;MfFunctionalFeaturization&lt;/tt&gt;.&lt;/li&gt;
   *    &lt;li&gt;Otherwise a feature, if it required by the featurization option.&lt;/li&gt;
   *    &lt;/ul&gt;
   *   &lt;br&gt;The support of the featurized object may be specified later with 
   *   the @href #SetAgentBehavior method.
   * @param iAgBehavior
   *   The specific agent behavior. The default behavior (NULL) means:
   *    &lt;ul&gt;
   *      &lt;li&gt;The optimization mode which keeps the decode result is activated.&lt;/li&gt;
   *      &lt;li&gt;In assembly context, selection of geometry outside the current component is prohibited. The
   *       @href #SetActiveObjectPath method enables you to change the current component 
   *        which is by default the current UI active object.&lt;/li&gt;
   *    &lt;/ul&gt;
   *   &lt;br&gt;This behavior may be specified later with the @href #SetAgentBehavior method.
   */
   CATFeatureAgent(const CATString&amp;          iId,
                   CATClassId                iType       = NULL,
                   CATDlgEngBehavior         iBehavior   = NULL,
                   CATMfFeaturizeMode        iMode       = 0,
                   const CATBaseUnknown_var&amp; iSupport    = NULL_var,
                   CATFeatureAgentBehavior   iAgBehavior = NULL);

   virtual ~CATFeatureAgent();

  /**
   * Sets the agent behavior.
   * @param iMode
   *   The featurization mode to featurize the selected geometry.
   * @param iSupport
   *   The support of the featurized object.
   *   &lt;br&gt;&lt;b&gt;Legal values&lt;/b&gt;: NULL_var when &lt;tt&gt;iMode&lt;/tt&gt; is &lt;tt&gt;MfNoFeaturization&lt;/tt&gt; or 
   *   &lt;tt&gt;MfFunctionalFeaturization&lt;/tt&gt; otherwise the support feature if it is required by 
   *  the featurization option.
   * @param iAgBehavior
   *    &lt;ul&gt;
   *      &lt;li&gt;The optimization mode which keeps the decode result is activated.&lt;/li&gt;
   *      &lt;li&gt;In assembly context, selection of geometry outside the current component is prohibited. The
   *       @href #SetActiveObjectPath method enables you to change the current component 
   *        which is by default the current UI active object.&lt;/li&gt;
   *    &lt;/ul&gt;
   */
   void SetAgentBehavior(CATMfFeaturizeMode        iMode,
                         const CATBaseUnknown_var&amp; iSupport    = NULL_var,
                         CATFeatureAgentBehavior   iAgBehavior = NULL);


  /**
   * Gets the agent behavior.
   * @param ioMode
   *   The featurization mode to featurize the selected geometry.
   * @param ioSupport
   *   The support of the featurized object.
   * @param ioAgBehavior
   *    &lt;ul&gt;
   *      &lt;li&gt;The optimization mode which keeps the decode result is activated.&lt;/li&gt;
   *      &lt;li&gt;In assembly context, selection of geometry outside the current component is prohibited. The
   *       @href #SetActiveObjectPath method enables you to change the current component 
   *        which is by default the current UI active object.&lt;/li&gt;
   *    &lt;/ul&gt;
   */
   void GetAgentBehavior(CATMfFeaturizeMode&amp;      ioMode,
                         CATBaseUnknown_var&amp;      ioSupport,
                         CATFeatureAgentBehavior&amp; ioAgBehavior);

   /**
   * Returns the selected object.
   * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;: This method returns the leaf of the input path.
   * @param iPath
   *   The agent value that you retrieve with the @href CATPathElementAgent#GetValue (mono-sel)
   *   and the @href CATPathElementAgent#GetListOfValues (multi-sel)methods.
   *   If the value is NULL, the @href CATPathElementAgent#GetElementValue is used. 
   * @return
   *   The selected object.
   */
   virtual CATBaseUnknown* GetElementValue(CATPathElement* iPath); 

   /**
   * Sets the active object path.
   * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;: In assembly context, i.e. when the current document is a Product document,
   *  this method enables you to declare a context (a path) 
   *  different from the current User Interface active object one.
   *  &lt;br&gt;The role of this method is different from the classes and their behaviors:
   *  &lt;ul&gt;
   *  &lt;li&gt;For &lt;tt&gt;CATFeatureAgent&lt;/tt&gt;:&lt;/li&gt;
   *   The role of &lt;tt&gt;iPath&lt;/tt&gt; depends on the agent behavior:( @href CATFeatureAgentBehavior )
   *    &lt;ul&gt;
   *    &lt;li&gt;&lt;tt&gt;CATFAgAllowSelectionInContext&lt;/tt&gt; is not set (default behavior): It is possible to select only 
   *    in the document whose the path is specified by &lt;tt&gt;iPath&lt;/tt&gt;. 
   *    &lt;/li&gt;
   *    &lt;li&gt;&lt;tt&gt;CATFAgAllowSelectionInContext&lt;/tt&gt; is set: This method is useless. It is possible
   *    to select anywhere. &lt;/li&gt;
   *    &lt;/ul&gt;
   *  &lt;li&gt;For @href CATFeatureImportAgent : &lt;tt&gt;iPath&lt;/tt&gt; is the path of a Part
   * document where will be imported the selected objects. &lt;/li&gt;
   *   &lt;/ul&gt;
   * @param iPath
   *   The active object path. Its default value is the current UI active object, the value returned 
   *  by the @href CATFrmEditor#GetUIActiveObject method.
   */
   void SetActiveObjectPath(CATPathElement &amp;iPath);

   /**
   * Returns the selection context.
   * &lt;br&gt;&lt;b&gt;Role:&lt;/b&gt;This methode enables you to know, in assembly context, if the 
   * the selection has been done in the current Part or outside. 
   * @param iPath
   *   The agent value that you retrieve with the @href CATPathElementAgent#GetValue (mono-sel)
   *   and the @href CATPathElementAgent#GetListOfValues (multi-sel)methods.
   * @return
   *   The selection context.
   *   &lt;br&gt;&lt;b&gt;Legal values&lt;/b&gt;: 
   *   &lt;ul&gt;
   *     &lt;li&gt;&lt;tt&gt;0&lt;/tt&gt;:the selected element is in the current Part.&lt;/li&gt;
   *     &lt;li&gt;&lt;tt&gt;1&lt;/tt&gt;: the selected element is in another Part.&lt;/li&gt;
   *   &lt;/ul&gt;
   */
   virtual int ElementInContext(CATPathElement* iPath);

   /**
   * Returns the featurization status.
   * @param iPath
   *   The agent value that you retrieve with the @href CATPathElementAgent#GetValue (mono-sel)
   *   and the @href CATPathElementAgent#GetListOfValues (multi-sel) methods.
   * @return
   *   The value.
   *   &lt;br&gt;&lt;b&gt;Legal values&lt;/b&gt;: &lt;ul&gt;
   *   &lt;li&gt;TRUE the selected element has been featurized. The value returned by 
   *    the @href #GetElementValue method is a BRep feature implementing the 
   *    &lt;tt&gt;CATIMfBRep&lt;/tt&gt; interface.&lt;/li&gt;
   *   &lt;li&gt;FALSE the selected element is not featurized.&lt;/li&gt;&lt;/ul&gt;
   */
   virtual CATBoolean FeaturizedElement(CATPathElement* iPath);

   /**
   * Sets the agent value as the selection would do.
   * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;: The value is a path element to be treated.
   * &lt;br&gt;This method does not register an undo step.
   * &lt;br&gt;&lt;b&gt;Postcondition&lt;/b&gt;: Use the @href CATAcquisitionAgent#SetValuation
   * method to make the agent accept the value, otherwise this value is not
   * taken into account.
   * @param iValue
   *   The value.
   *   &lt;br&gt;&lt;b&gt;Cyclic reference&lt;/b&gt;: A copy of &lt;tt&gt;iValue&lt;/tt&gt; is kept and  
   *   AddRef&#x27;ed. It is Released in the agent destructor.
   * @return
   *   1 if the path element was successfully treated, 0 otherwise.
   */
   int SetValueToSelect(CATPathElement * iValue);

   /**
   * Sets the agent list of values as the selection would do.
   * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;: This method is usable only on MultiAcquisition objects,
   * otherwise use the @href #SetValueToSelect method.
   * &lt;br&gt;This method does not register an undo step.
   * &lt;br&gt;&lt;b&gt;Postcondition&lt;/b&gt;: Use the @href CATAcquisitionAgent#SetValuation
   * method to make the agent accept the value list, otherwise this list is not
   * taken into account.
   * @param iList
   *   The list of values.
   *   &lt;br&gt;&lt;b&gt;Cyclic reference&lt;/b&gt;: A copy of &lt;tt&gt;iList&lt;/tt&gt; is kept and 
   *   AddRef&#x27;ed. It is Released in the agent destructor.
   * @return
   *   The number of path element was successfully treated.
   */
   int SetListOfValuesToSelect(CATSO * iList);

   /**
   * Returns the agent error codes.
   * @return
   *   The value.
   *   &lt;br&gt;&lt;b&gt;Legal values&lt;/b&gt;: &lt;ul&gt;
   *   &lt;li&gt;&lt;tt&gt;0&lt;/tt&gt;: no error.&lt;/li&gt;
   *   &lt;li&gt;&lt;tt&gt;!=0&lt;/tt&gt;: otherwise&lt;/li&gt;
   *   &lt;/ul&gt;
   */
   virtual int AgentError();

   /**
   * @nodoc
   * Returns the leaf element of the current path element.
   */
   virtual CATBaseUnknown* GetElementValue();

   /**
   * @nodoc 
   * Do not override DecodeNotification, use ExtraCheckPath and ExtraProcessPath.
   */
   virtual void * DecodeNotification(CATCommand* from, CATNotification* notif);

   /**
   * @nodoc 
   * Do not forget to invoke the father method when overriding.
   */
   virtual CATPathElement* PrecheckPath(CATPathElement* iPathToCheck);

   /**
   * @nodoc 
   * Do not override CheckPath, but ExtraCheckPath.
   */
   virtual CATPathElement* CheckPath(CATPathElement* iPath, int iElementTypeListPosition);

   /**
   * @nodoc 
   * Do not override ProcessPath, but ExtraProcessPath.
   */
   virtual CATPathElement* ProcessPath(CATPathElement* iPath, int iElementTypeListPosition);

   /** 
   * @nodoc 
   */
   virtual void StoreValue();
 
   /** @nodoc */
   void AgentDecodeInitialization();

   /** @nodoc */
   void DisableTreeSelection();

   /** @nodoc */
   void EnableTreeSelection();


protected:

   CATFeatureAgent(const CATString&amp;          iId,
                   CATClassId                iType,
                   CATDlgEngBehavior         iBehavior,
                   CATMfFeaturizeMode        iMode,
                   const CATBaseUnknown_var&amp; iSupport,
                   CATFeatureAgentBehavior   iAgBehavior,
                   void*                     iImplementation);

   virtual CATPathElement* DecodePath (CATPathElement* iPath, CATString&amp; oEltType, int* oPos=NULL);

   CATBoolean         IsAnElementInCurrentPart(CATPathElement*iPath);
   CATBaseUnknown_var GiveSelectedElement(CATPathElement* iPath, int iElementTypeListPosition);


   CATMfFeaturizeMode         _Mode;
   int                        _Error;
   int                        _NbPathOK;
   CATULong                   _Context;
   CATBoolean                 _IsFeaturizedElement;
   int                        _NbElement;
   CATMathTransformation      _Matrice;
   CATBaseUnknown_var         _Support;
   CATPathElement             _PathUIActif;

   CATFeatureAgentBehavior    _AgBehavior;
   CATISpecImportManager    * _SpecImportManager;
   CATBoolean                 _IsSelRerouted;

   void                     * _Implementation;
};

#endif
</div>
    
    <div class="navigation">
        <div><a href="CATExtIGeomVisuChildren.html">‚Üê ‰∏ä‰∏ÄÈ°µ: CATExtIGeomVisuChildren.h</a></div>
        <div><a href="CATFeatureImportAgent.html">‰∏ã‰∏ÄÈ°µ: CATFeatureImportAgent.h ‚Üí</a></div>
    </div>
</body>
</html>