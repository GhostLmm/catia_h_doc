<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ApplicationFrame/PublicInterfaces/CATCmdAccess.h</title>
    <style>
        body {
            font-family: 'Consolas', 'Monaco', monospace;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .header {
            background-color: #2c3e50;
            color: white;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .navigation {
            display: flex;
            justify-content: space-between;
            margin: 15px 0;
            padding: 10px;
            background-color: #ecf0f1;
            border-radius: 5px;
        }
        .navigation a {
            color: #2980b9;
            text-decoration: none;
            padding: 5px 10px;
            background-color: white;
            border-radius: 3px;
            border: 1px solid #bdc3c7;
        }
        .navigation a:hover {
            background-color: #3498db;
            color: white;
        }
        .content {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            border: 1px solid #bdc3c7;
            white-space: pre-wrap;
            font-size: 14px;
            line-height: 1.4;
            overflow-x: auto;
        }
        .back-to-index {
            text-align: center;
            margin: 15px 0;
        }
        .back-to-index a {
            color: #27ae60;
            text-decoration: none;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ApplicationFrame/PublicInterfaces/CATCmdAccess.h</h1>
    </div>
    
    <div class="navigation">
        <div><a href="CATCameraToolkit.html">‚Üê ‰∏ä‰∏ÄÈ°µ: CATCameraToolkit.h</a></div>
        <div><a href="CATCmdContainer.html">‰∏ã‰∏ÄÈ°µ: CATCmdContainer.h ‚Üí</a></div>
    </div>
    
    <div class="back-to-index">
        <a href="index.html">üìÅ ËøîÂõûÁõÆÂΩï</a>
    </div>
    
    <div class="content">#ifndef CATCmdAccess_H
#define CATCmdAccess_H

// COPYRIGHT DASSAULT SYSTEMES 1999

/**
 * @CAA2Level L1
 * @CAA2Usage U1
 */

#include &quot;CD0FRAME.h&quot;

/** @nodoc */
#define NOMNEMONIC &#x27;\0&#x27;

#include &quot;CATCallbackManager.h&quot;
#include &quot;CATString.h&quot;
#include &quot;CATUnicodeString.h&quot;
#include &quot;CATListOfInt.h&quot;

class CATDialog;
class CATCmdRep;
class CATVisDialog;

#ifdef AfrCAA2
class CATAfrGen;
#endif

//class CATListOfInt;

/**
 * Base class to create an access.
 * &lt;b&gt;Role&lt;/b&gt;: When you want to arrange commands to propose them appropriately to the end 
 * user, you need to either create a workshop or a workbench, or create an add-in to 
 * an existing workshop or workbench. When you create such objects, you create in fact 
 * a containment tree structure to access to the commands. A &lt;b&gt;node&lt;/b&gt; of the tree is 
 * a @href CATCmdContainer, a @href CATCmdWorkbench for
 * the workbench or a @href CATCmdWorkshop for the workshop,  
 * and a &lt;b&gt;leaf&lt;/b&gt; can be a @href CATCmdStarter or 
 * a @href CATCmdSeparator. All these objects are therefore 
 * called accesses and their base class is &lt;tt&gt;CATCmdAccess&lt;/tt&gt;. &lt;br&gt;
 *
 * To create any access use the @href NewAccess macro. 
 * @see CATIWorkshop, CATIWorkbench, CATIWorkbenchAddin, CATCommandHeader
 */
class ExportedByCD0FRAME CATCmdAccess: public CATBaseUnknown
{
  friend class CATMarshallableCmdAccess;
  friend class CATCmdAccessEditor;
  
  CATDeclareKindOf;
  
public:
  
    /*---------------------------------*/
    //     CONSTRUCTORS  
    /*---------------------------------*/

  /**
  * @nodoc
  */
  enum Persistence { User, Default, Code };
  /**
  * @nodoc
  */
  enum LocalMode   { Workshop, Workbench };
  /**
  * @nodoc
  */
  CATCmdAccess (const CATString &amp; name, Persistence = Code, int local = 0);
  /**
  * @nodoc
  */
  CATCmdAccess (CATCmdAccess &amp;);
  /**
  * @nodoc
  */
  virtual ~CATCmdAccess();
  /**
  * @nodoc
  */  
  virtual CATCmdAccess * Clone(int noNext = 0,CATCmdAccess * toBeCompleted = NULL);
			       
  /**
  * @nodoc
  */
  virtual void SaveClone();
  
    /*---------------------------------*/
    //     REPRESENTATION  
    /*---------------------------------*/
  /**
  * @nodoc
  */  
  virtual CATCmdRep * CreateMenuRep    (CATDialog *);

  /**
  * @nodoc
  */
  virtual void        DestroyMenuRep   ();


  /**
  * @nodoc
  */
  virtual CATCmdRep * CreateToolbarRep (CATDialog *);
  /**
  * @nodoc
  */
  virtual void        DestroyToolbarRep();
  /**
  * @nodoc
  */
  virtual CATCmdRep * CreateCtxMenuRep (CATDialog *);
  /**
  * @nodoc
  */
  virtual void        DestroyCtxMenuRep();
  /**
  * @nodoc
  */
  virtual void SetRep(CATCmdRep *);
  /**
  * @nodoc
  */
  virtual CATCmdRep * GetRep();
  
    /*---------------------------------*/
    //     QUERIES  
    /*---------------------------------*/

  /**
  * @nodoc
  * Returns the access&#x27;s name. 
  * &lt;b&gt;Role&lt;/b&gt;: This name is used to define the NLS and RSC resources of the access 
  * and to anchored an access.
  */  
  const CATString      &amp; GetName()        const;
  
  /**
  * @nodoc
  * Returns the next access.
  * &lt;b&gt;Role&lt;/b&gt;: Accesses are chained. 
  */
  CATCmdAccess         * GetNext()        const;
  
  /**
  * @nodoc
  * Returns the next visible access.
  * &lt;b&gt;Role&lt;/b&gt;: Accesses are chained. The next access of a give one could be invisible. 
  * Ivisible accesses are original accesses. 
  */
  CATCmdAccess         * GetNextVisible() const;
  
  /**
  * @nodoc
  * Returns the parent&#x27;s access.
  * &lt;b&gt;Legal values&lt;/b&gt;: a &lt;tt&gt;CATCmdContainer&lt;&lt;/tt&gt;. 
  */
  CATCmdAccess         * GetParent();
  
  /**
  * @nodoc
  */
  virtual CATCmdAccess * GetChild()       const;
  
  /**
  * @nodoc
  * default customer name is the label ??? .                                              
  */
  const CATString      &amp; GetCustomerName();   


    /*---------------------------------*/
    //     NLS QUERIES 
    /*---------------------------------*/

  /**
  * @nodoc
  */
  virtual CATString * GetIconName();

  /**
  * @nodoc
  * Returns the access&#x27;s title.
  * &lt;b&gt;Role&lt;/b&gt;: It&#x27;s the name which appears on the screen. It&#x27;s the NLS title. If
  * the NLS values doen&#x27;t exist, the totle is the name of the access. @href GetName
  */
  virtual const CATUnicodeString &amp; GetTitle();   

  /**
  * @nodoc
  */
  CATUnicodeChar         GetMnemonic();
  

    /*---------------------------------*/
    //     EDITION 
    /*---------------------------------*/
  
  /**
  * Sets the access name.
  * &lt;b&gt;Role&lt;/b&gt;: This name is used to define the NLS and RSC resources of the access 
  * and to anchor an access.
  */
  void         SetName         (const CATString &amp;, int userRequest = 0);

  /**
  * @nodoc
  */
  void         SetNext         (CATCmdAccess * const);

  /**
  * @nodoc
  */
  void         SetCustomerName (const CATString &amp;);
  
  /**
  * @nodoc
  */
  virtual void SetIconName     (const CATString &amp;, int userRequest=0);

  /**
  * @nodoc
  */
  virtual void SetTitle        (const CATUnicodeString &amp;, int userRequest = 0);

  /**
  * @nodoc
  */
  void         SetMnemonic     (CATUnicodeChar, int userRequest = 0);

  /**
  * @nodoc
  */
  void UnsetCustomerName(int notify = 1);
  /**
  * @nodoc
  */
  void UnsetIconName    (int notify = 1, int userRequest = 0);
  /**
  * @nodoc
  */
  void UnsetTitle       (int notify = 1, int userRequest = 0);
  /**
  * @nodoc
  */
  void UnsetMnemonic    (int notify = 1, int userRequest = 0);
  /**
  * @nodoc
  */
  void SetParent        (CATCmdAccess *);

	
    /*---------------------------------*/
    //  FOR INTERNAL USE
    /*---------------------------------*/
  
  /**
  * @nodoc
  */
  int  HasTitle()   const;
  /**
  * @nodoc
  */
  int  HasCommand() const;
  /**
  * @nodoc
  */
  int  IsLocal()    const;

  /**
  * @nodoc
  */
  void MakeLocal();
  /**
  * @nodoc
  */
  int  IsLocal(LocalMode)    const;
  /**
  * @nodoc
  */
  void MakeLocal(LocalMode);

  /**
  * @nodoc
  */
  Persistence  GetPersistence() const;

  /**
  * @nodoc
  * Retrieves the internal name of the access just before this.
  * If you want retrieve the argument name of the @href #SetAnchorName method, use
  * the @href #GetOriginalAnchorName method.
  */
  CATString  * GetAnchorName () const;

  /**
  * @nodoc
  */
  void SetPersistence(Persistence);

  /**
  * @nodoc
  * @param iAnchorName
  * Name of the access which is just after this. iAnchorName can be an alias name. 
  * To retrieve the argument, iAnchorName, use the @href #GetOriginalAnchorName method.
  */
  void SetAnchorName (const CATString &amp; iAnchorName);

  /**
  * @nodoc
  */
  enum DumpMode { Simple, WithPersistence, Address, StdOut };
  /**
  * @nodoc
  */
  virtual void FlatDump(DumpMode = Simple, int noNext = 0) const;

  /**
  * @nodoc
  */
  virtual char *GenerateVariableName(const char *);
  
  /**
  * @nodoc
  * Sets the access&#x27;s type.
  * &lt;b&gt;Role&lt;/b&gt;: The type is necessary for the &lt;tt&gt;CATCmdContainer&lt;/tt&gt; access. 
  * &lt;b&gt;Legal values&lt;/b&gt;: Menubar,Toolbar,Workshop,Workbench,Starter,
  * Separator,IconBox, Submenu and Menu.
  */
  virtual void SetType (const CATString &amp; type);

  /**
  * @nodoc
  */
  virtual void ClearViews();

  /**
  * @nodoc
  * Add command headers.
  */
  virtual void CreateHeaders();

  /**
  * @nodoc
  */
  virtual void SetAddin (const CATString &amp; Addin, int FirstAddin);
  /**
  * @nodoc
  */
  virtual int GetAddin (CATString &amp; Addin);  
  /**
  * @nodoc
  */
  virtual int IsAddin ();   
  
    /*---------------------------------*/
    //  SAVE
    /*---------------------------------*/

  /**
  * @nodoc
  /* save a default configuration into a file.
  */
  virtual void SaveAsSource (FILE *fd, char **variableName,  int noNext=0);

  /**
  * @nodoc
  */
  virtual void FilterPersistence( Persistence, int keep,  int inDepth=1);

#ifdef AfrCAA2

  /**
  * @nodoc
  */
  virtual void SaveAsXml (CATAfrGen * Gen, int depth);
#endif


    /*---------------------------------*/
    //  EVENT 
    /*---------------------------------*/

  /**
  * @nodoc
  */
  void DispatchCallbacks(CATCallbackEvent  iPublishedEvent,
                         CATNotification  *iPublishedNotification=NULL,
                         void             *iEventPublisher=NULL);

  /**
  * @nodoc
  */
  CATDeclareCBEvent(DeleteEvent);
  /**
  * @nodoc
  */
  CATDeclareCBEvent(EditEvent);
  /**
  * @nodoc
  */
  CATDeclareCBEvent(SetIconEvent);
  /**
  * @nodoc
  */
  CATDeclareCBEvent(SetNextEvent);
  /**
  * @nodoc
  */
  CATDeclareCBEvent(SetMnemonicEvent);
  /**
  * @nodoc
  */
  CATDeclareCBEvent(SetTitleEvent);
  /**
  * @nodoc
  */
  CATDeclareCBEvent(UnsetChildEvent);
  /** 
  * @nodoc 
  */
  CATDeclareCBEvent(UnsetNextEvent);

   /*---------------------------------*/
   //  ALIAS 
   /*---------------------------------*/

  /**
  * Returns the alias&#x27;s name of the access. 
  * @nodoc
  */
  const CATString     GetAliasName()           const;
  /**
  * @nodoc
  * Returns the original&#x27;s name of the access. 
  * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;: The original name is the &lt;tt&gt;name&lt;/tt&gt; parameter 
  * of the constructor.  
  */
  const CATString   &amp; GetOriginalName()        const;
  /**
  * @nodoc
  * Returns the original anchor&#x27;s name.
  * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;: The original name is the &lt;tt&gt;anchorName&lt;/tt&gt; parameter 
  * of the @href SetAnchorName method.   
  */
  CATString         * GetOriginalAnchorName()  const;

	/**
	 * @nodoc
	 * Tells the access that a parent has changed
	 * in its parent hierarchy
	 */
	virtual void ParentChanged ();

	/**
	 * @nodoc
	 * Tells the access that a parent has changed
	 * in its parent hierarchy
	 */
	virtual void EditingContextChanged ();
	
protected:

	/**
  * @nodoc
  */ 
  CATCmdAccess (Persistence = Code);
  /**
  * @nodoc
  */ 
  void DumpName(DumpMode) const;
  
  CATCmdAccess * _next;
  CATCmdAccess * _father;
  CATString      _name;
  CATCmdRep    * _rep;         
  CATVisDialog * _visRep;
  CATString      _Type;
  CATString    * _icon;
  CATString    * _Addin;
  Persistence    _persistence;   /** @win64 fbq : 64-bit structure packing **/
  
  
private:
  
  int                _hasTitle;
  int                _local;  
  int                _local2Workshop;
  int                _local2Config;
  int                _FirstAddin;
  CATString        * _anchor;
  CATString        * _customerName;
  int                _titleResources;
  int                _mnemonicResources;
  CATUnicodeString   _title;
  CATUnicodeString   _unicodeName;
  char             * _titleForMarshalling;
  CATUnicodeChar     _mnemonic;
  char             * _mnemonicForMarshalling;

  // Alias managment 
  CATString           _OriginalName   ;
  CATString         * _OriginalAnchor ;

  void FindAlias(int iUpdateTable, const CATString &amp; iName, CATString &amp; oOriginName );

};

#endif
</div>
    
    <div class="navigation">
        <div><a href="CATCameraToolkit.html">‚Üê ‰∏ä‰∏ÄÈ°µ: CATCameraToolkit.h</a></div>
        <div><a href="CATCmdContainer.html">‰∏ã‰∏ÄÈ°µ: CATCmdContainer.h ‚Üí</a></div>
    </div>
</body>
</html>