<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AnalysisMeshingToolsItf/PublicInterfaces/CATMSHStudioObject.h</title>
    <style>
        body {
            font-family: 'Consolas', 'Monaco', monospace;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .header {
            background-color: #2c3e50;
            color: white;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .navigation {
            display: flex;
            justify-content: space-between;
            margin: 15px 0;
            padding: 10px;
            background-color: #ecf0f1;
            border-radius: 5px;
        }
        .navigation a {
            color: #2980b9;
            text-decoration: none;
            padding: 5px 10px;
            background-color: white;
            border-radius: 3px;
            border: 1px solid #bdc3c7;
        }
        .navigation a:hover {
            background-color: #3498db;
            color: white;
        }
        .content {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            border: 1px solid #bdc3c7;
            white-space: pre-wrap;
            font-size: 14px;
            line-height: 1.4;
            overflow-x: auto;
        }
        .back-to-index {
            text-align: center;
            margin: 15px 0;
        }
        .back-to-index a {
            color: #27ae60;
            text-decoration: none;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>AnalysisMeshingToolsItf/PublicInterfaces/CATMSHStudioObject.h</h1>
    </div>
    
    <div class="navigation">
        <div><a href="CATMSHStSpecManager.html">‚Üê ‰∏ä‰∏ÄÈ°µ: CATMSHStSpecManager.h</a></div>
        <div><a href="CATMSHStudioServices.html">‰∏ã‰∏ÄÈ°µ: CATMSHStudioServices.h ‚Üí</a></div>
    </div>
    
    <div class="back-to-index">
        <a href="index.html">üìÅ ËøîÂõûÁõÆÂΩï</a>
    </div>
    
    <div class="content">#ifndef CATMSHStudioObject_h
#define CATMSHStudioObject_h
// COPYRIGHT Dassault Systemes 2002

/**
 * @CAA2Level L0 
 * @CAA2Usage U1
 */

//=============================================================================
//
// CATMSHStudioObject :
//
// Objet dont derivent les objets de base ( vertexs,edges,..) composant le MSHStudio
//
//
//=============================================================================
// Octobre 1998  Cration                          Gerard Soubeyre
//=============================================================================
#include &quot;MSHStudio.h&quot;
#include &quot;CATMSHStudioStruct.h&quot;
#include &quot;IUnknown.h&quot;
#include &quot;CATDataType.h&quot;
#include &lt;stddef.h&gt;

class CATMSHStStack;
class CATMSHStudio;
class CATMSHStudioPartition;
class CATIMSHStPartition;
class CATMSHStPartitionTransaction;
class CATIMSHConnectivity;
class CATGeometry;
class CAT3DRep;
class CATUnicodeString;
class CATMSHPointOnSupport;
class CATMSHStListOfObjects;
class CATGraphicAttributeSet;

/**
 * Base object representing a node, an edge or a face in the studio.
 */

class ExportedByMSHStudio CATMSHStudioObject
{
  friend class CATMSHStStack;
  friend class CATMSHStudio;
  friend class CATMSHStudioPartition;
  friend class CATMSHStPartitionTransaction;

// Mthodes et donnes membres publiques

public:

/**
 * Read the dimension of the studio object.&lt;dd&gt;
 * If the dimension is 0, the object is an edge.&lt;dd&gt;
 * If the dimension is 1, the object is an edge.&lt;dd&gt;
 * If the dimension is 2, the object is a face.&lt;dd&gt;
 */
  virtual const int GetDimension() const =0 ;

/**
 * @nodoc
 * Suppression de l&#x27;entite avec impact
 */
  static HRESULT Remove(CATMSHStudioObject * Object);
/**
 * @nodoc
 * Lecture des compteurs
 */
  static void GetCounts(int &amp;NumberOfCreated , int &amp;NumberOfExisting);
/**
 * @nodoc
 * Renvoie l&#x27;indice de l&#x27;objet le plus proche de coor dans la liste
 */
  static int GetNearest ( const CATMSHStListOfObjects &amp;List, const double Coordinates[3] );
/**
 * @nodoc
 * Lecture du type
 */
  virtual const char * IsA() const =0 ;
/**
 * @nodoc
 * Lecture du type studio
 */
  virtual const CATMSHStTypeOfObject GetType() const =0 ;
/**
 * @nodoc
 * Lecture de la dimension du support de &#x27;lobjet
 */
  virtual const int GetSupportDimension() const;
/**
 * @nodoc
 * Export d&#x27;un objet dans le pere du studio
 */
  virtual void * Export ( int ExportSons = 0 );
/**
 * @nodoc
 * Lecture de la connectivite
 */
  virtual CATIMSHConnectivity * GetConnectivity () ;
/**
 * @nodoc
 * Lecture de la composition de l&#x27;objet en noeuds
 */
  virtual HRESULT GetComposition(  CATMSHStListOfObjects &amp;ListOfNodes ) =0;
/**
 * @nodoc
 * Lecture de la composition de l&#x27;objet en noeuds + noeuds intermediaires
 */
//  virtual HRESULT GetAllComposition(  CATMSHStListOfObjects &amp;ListOfNodes ) const =0;
/**
 * @nodoc
 * Lecture de la composition de l&#x27;objet en edges et noeuds
 */
  virtual HRESULT GetNodesAndEdges( CATMSHStListOfObjects &amp;ListOfNodes,
                                       CATMSHStListOfObjects &amp;ListOfEdges);
/**
 * @nodoc
 * Lecture des Edges d&#x27;un objet
 */
  virtual void GetEdges( CATMSHStListOfObjects &amp;ListOfEdges );
/**
 * @nodoc
 * Lecture de l&#x27;objet exporte
 */
  void * GetExported() const {return _ExportedEntity;};
/**
 * @nodoc
 * Lecture du nom
 */
  void GetName ( CATUnicodeString &amp;Name ) const;
/**
 * @nodoc
 * Calcul de la taille de l&#x27;objet StudioObject
 */
  virtual int SizeOf () const;
/**
 * @nodoc
 * Calcul du centre de l&#x27;objet en float
 */
  virtual void GetCenter ( float * Center ) const;
/**
 * @nodoc
 * Calcul du centre de l&#x27;objet en double
 */
  virtual void GetCenter ( double * Center ) const;
/**
 * @nodoc
 * Calcul de la boite d&#x27;encombrement
 */
  virtual void GetBox ( double PtMin[] , double PtMax[] );
/**
 * @nodoc
 * Dump listing
 */
  virtual void Dump ();
/**
 * @nodoc
 * Check
 */
  virtual int Check ();
/**
 * @nodoc
 * Acces a la Partition
 */
  CATIMSHStPartition * GetPartition () const {return (CATIMSHStPartition *)_Partition;};
/**
 * @nodoc
 * Acces au pointeur du precedent
 */
  CATMSHStudioObject * Previous () const {return _Previous;};
/**
 * @nodoc
 * Acces au pointeur du suivant
 */
  CATMSHStudioObject * Next () const {return _Next;};
/**
 * @nodoc
 * Acces au nombre d&#x27;objets de la famille
 */
  short GetNbOfObjects() const;
/**
 * @nodoc
 * Acces au pointeur sur la liste des fils
 */
  inline CATMSHStudioObject *const* GetSons (short &amp; NbOfSons) const;
/**
 * @nodoc
 * Acces au nombre de fils
 */
  short GetNbOfSons () const { return _NbOfSons;};
/**
 * @nodoc
 * Acces au nombre de peres
 */
  short GetNbOfFathers () const { return _NbOfFathers;};
/**
 * @nodoc
 * Acces a la liste des peres
 */
  inline CATMSHStudioObject *const* GetFathers (short &amp; NbOfFathers) const;
/**
 * @nodoc
 * Acces au pointeur sur la liste des peres
 */
  CATMSHStudioObject *const* GetFathers () const {return (CATMSHStudioObject *const*) _Family;};
/**
 * @nodoc
 * Recherche de tous les objets peres direct et indirect
 */
  HRESULT GetAllFathers ( CATMSHStListOfObjects &amp;ListOfFathers ) const ;
/**
 * @nodoc
 * Recherche de tous les objets fils direct et indirect
 */
  HRESULT GetAllSons ( CATMSHStListOfObjects &amp;ListOfSons ) const;
/**
 * @nodoc
 * Recherche de tous les elements lies (tous les fils representant un element) avec concatenation
 */
  HRESULT GetAllElements ( CATMSHStListOfObjects &amp;ListOfElements ) const;
/**
 * @nodoc
 * Recherche s l existe au moins un element li 
 */
  int HasLinkedElement () const;
/**
 * @nodoc
 * Ajout dans la pile de tous les elements de la descendance de l&#x27;objet
 * Retourne 0 Ajout dans la pile de tous les elements de la descendance de l&#x27;objet
 */
  int AddLinkedElements ( CATMSHStStack &amp;LinkedElements) const;
/**
 * @nodoc
 * L&#x27;objet est gele ?
 */
  virtual int IsFrozen () const {return _Attribut.extend.frozen;};
/**
 * @nodoc
 * Gele l&#x27;objet
 */
  void Freeze( int WithImpact=0 );
/**
 * @nodoc
 * Degele l&#x27;objet ( pour le printemps )
 */
  void UnFreeze() { _Attribut.extend.frozen = 0;};
/**
 * @nodoc
 * Lecture du champs active
 */
  int IsActive() const {return _Attribut.extend.active;} ;
/**
 * @nodoc
 * Lecture du champs isexported
 */
  int IsExported() const {return _Attribut.extend.isexported;};
/**
 * @nodoc
 * Lecture du champs external
 */
  int IsExternal() const {return _Attribut.extend.external;} ;
/**
 * @nodoc
 * Retrait de l&#x27;object de la transaction courante
 */
  void ResetFromTransaction ();
/**
 * @nodoc
 * L&#x27;object est-il cre dans la transaction courante
 */
  int IsCreatedInTransaction () const {return _Attribut.extend.createdin;};
/**
 * @nodoc
 * Marquage de l&#x27;object cre dans transaction courante
 */
  void CreatedInTransaction ( int Position );
/**
 * @nodoc
 * L&#x27;object est-il detruit dans la transaction courante
 */
  int IsDeletedInTransaction () const {return _Attribut.extend.deletedin;};
/**
 * @nodoc
 * Marquage de l&#x27;object detruit dans transaction courante
 */
  void DeletedInTransaction ( int Position );
/**
 * @nodoc
 * L&#x27;object est-il modifi dans la transaction courante
 */
  int IsModifiedInTransaction () const {return _Attribut.extend.modifiedin;};
/**
 * @nodoc
 * Marquage de l&#x27;object modifi dans transaction courante
 */
  void ModifiedInTransaction ( int Position );
/**
 * @nodoc
 * Ecriture du champs isexported
 */
  void Exportable (int IsExported);
/**
 * @nodoc
 * Acces au pointeur de l&#x27;entite intermediaire
 */
  CATMSHStudioObject * GetInter () const;
/**
 * @nodoc
 * Noeud intermediaire ?
 */
  int IsInter () const {return _Attribut.extend.isinter;} ;
/**
 * @nodoc
 * Recherche d&#x27;un fils
 */
  short IsASon( const CATMSHStudioObject * const Son ) const;
/**
 * @nodoc
 * Recherche d&#x27;un pere
 */
  short IsAFather( const CATMSHStudioObject * const Father ) const;
/**
 * @nodoc
 * Lecture du champs modify
 */
  int IsModified() const {return _Attribut.extend.modify;} ;
/**
 * @nodoc
 * Calcul de l&#x27;orientation par rapport d&#x27;un fils
 */
  virtual int GetOrientation( const CATMSHStudioObject * const Father );
/**
 * @nodoc
 * BuildRep (implmentation de CATI3DGeoVisu)
 */
  virtual CAT3DRep * BuildRep ( int Level=0, CATGraphicAttributeSet * Attribut=NULL ) =0;
/**
 * @nodoc
 * renvoie la CAT3DRep
 */
  CAT3DRep * GetRep();
/**
 * @nodoc
 * detruit le CAT3DCustomRep
 */
  void DeleteRep();
/**
 * @nodoc
 * Construction d&#x27;un point sur support
 */
  virtual int ComputePosition ( CATMSHPointOnSupport * Point )=0;  
/**
 * @nodoc
 * Calcul de la sag
 */
  virtual HRESULT ComputeSag ( double &amp;Sag , double * Lenght=NULL );  
/**
 * @nodoc
 * Positionnement
 */
  virtual void SetPosition ( const CATMSHPointOnSupport * Point );  
/**
 * @nodoc
 * Affiche le tag de l&#x27;element ou du noeud
 */
  unsigned int GetExternalTag() const ;
/**
 * @nodoc
 * Affiche le tag de l&#x27;element ou du noeud
 */
  unsigned int GetInternalTag() const ;
/**
 * @nodoc
 * Replace
 */
  virtual void Replace ( CATMSHStudioObject * StudioObject , int Export );
/**
 * @nodoc
 * Inverse Orientation
 */  
  void InverseOrientation ();
/**
 * @nodoc
 * Notification de modification de l&#x27;objet et propagation dans les fils
 */
  void Modified ( );
/**
 * @nodoc
 * Ecriture l&#x27;objet associe
 */
  void SetExported ( const void * const Object );
/**
 * @nodoc
 * Recherche des noeuds lies a l&#x27;objet sur N couches
 */
  HRESULT GetLayerNodes ( int NbLayer , CATMSHStListOfObjects &amp;ListOfNodes);
/**
 * @nodoc
 * Mise a On du flag user
 */
  void FlagOn (int NuFlag);
/**
 * @nodoc
 * Mise a Off du flag user
 */
  void FlagOff (int NuFlag);
/**
 * @nodoc
 * Lecture du flag user 0 Off 1 On
 */
  int Flag (int NuFlag) const;
/**
 * @nodoc
 * Lecture de la position de travail
 */
  inline CATINTPTR GetWorkAsInt () const;
/**
 * @nodoc
 * Lecture de la position de travail
 */
  inline void * GetWorkAsPtr () const;
/**
 * @nodoc
 * Ecriture de la position de travail
 */
  inline void SetWorkAsInt ( CATINTPTR Work );
/**
 * @nodoc
 * Ecriture de la position de travail
 */
  inline void SetWorkAsPtr ( void * Work );
/**
 * @nodoc
 * Acces au support
 */
  CATMSHStudioObject * const GetSupport() const { return (CATMSHStudioObject *) _Family; } ;


// Mthodes et donnes membres protected

protected:

/**
 * @nodoc
 * Constructeur
 */
  CATMSHStudioObject ( CATMSHStudioPartition * const Partition );
/**
 * @nodoc
 * Destructeur
 */
  virtual ~CATMSHStudioObject ();
/**
 * @nodoc
 * Remove
 */
  virtual void Remove ();
/**
 * @nodoc
 * Ecriture d&#x27;une entite intermediaire
 */
  HRESULT SetInter (CATMSHStudioObject *);
/**
 * @nodoc
 * Recherche d&#x27;un objet a partir de ses peres
 */
  static CATMSHStudioObject * FindSon( int NbOfFathers , const CATMSHStudioObject * const Fathers[] );

  // Donnes membres

  CATMSHStudioPartition  * _Partition;
  CAT3DRep *               _Rep;
  void *                   _ExportedEntity;

  union
  {
    int attribute;
    struct
    {
      unsigned short stacks      : CATMSHStNbStacks;
      unsigned short flags       : CATMSHStNbUFlags;
      unsigned short frozen      : 1;
      unsigned short external    : 1;
      unsigned short isexported  : 1;
      unsigned short modify      : 1;
      unsigned short ongeometry  : 1;
      unsigned short hasinter    : 1;
      unsigned short isinter     : 1;
      unsigned short createdin   : 1;
      unsigned short deletedin   : 1;
      unsigned short modifiedin  : 1;
      unsigned short active      : 1;
    } extend ;
  } _Attribut;

/**
 * @nodoc
 * Ajout d&#x27;un fils
 */
  void AddSon ( CATMSHStudioObject * Son , short Increment=2 );
/**
 * @nodoc
 * Ajout d&#x27;un objet intermediare pere ou fils
 */
  void AddInter ( CATMSHStudioObject * Inter );
/**
 * @nodoc
 * Suppression d&#x27;un fils
 */
  short RemoveSon( CATMSHStudioObject * Son );
/**
 * @nodoc
 * Determination des peres
 */
  void SetFathers ( int NbOfFathers , CATMSHStudioObject ** Fathers , short Increment=2 );
/**
 * @nodoc
 * Ecriture du support pour les objets intermdiaires ( noeuds )
 */
  HRESULT SetSupport ( CATMSHStudioObject * Support );
/**
 * @nodoc
 * Acces au pointeur sur la liste des fils
 */
  CATMSHStudioObject ** Sons () const
  { return _Family + _NbOfFathers + (short)_Attribut.extend.hasinter; };
/**
 * @nodoc
 * Acces au pointeur sur la liste des peres
 */
//  CATMSHStudioObject ** Fathers () const { return _Family;};


private:

/**
 * Constructeur par defaut
 */
  CATMSHStudioObject();
/**
 * Constructeur recopie
 */
  CATMSHStudioObject(const CATMSHStudioObject &amp; Source );
/**
 * Operateur d&#x27;affectation
 */
  CATMSHStudioObject&amp; operator=(const CATMSHStudioObject &amp; Source );
/**
 * Acces a la Partition
 */
  CATMSHStudioPartition * GetPartitionImpl () const {return _Partition;};
/**
 * Mise a vrai du flag active
 */
  void Active() {_Attribut.extend.active=1;};
/**
 * Mise a faux du flag active
 */
  void UnActive() {_Attribut.extend.active=0;};

  // Donnes membres

  static unsigned int     _NumberOfCreated;
  static unsigned int     _NumberOfExisting;
  static const int        StBits[CATMSHStNbUFlags];

  CATMSHStudioObject **   _Family;
  CATMSHStudioObject  *   _Next;
  CATMSHStudioObject  *   _Previous;
  union
  {
    void *                AsPtr;
    CATINTPTR             AsInt;
  }                       _Work;
  unsigned int            _Tag;
  int                     _PositionTransaction;
  short                   _NbOfFathers;
  short                   _NbOfSons;
  short                   _SizeOfFamily;
  static short            MaxNbOfFathers;
  static short            MaxNbOfSons;

};
//
// GetSons
//
inline CATMSHStudioObject *const* CATMSHStudioObject::GetSons (short &amp; NbOfSons) const
{
  NbOfSons = _NbOfSons;
  return (CATMSHStudioObject *const*) Sons();
}
//
// GetFathers
//
inline CATMSHStudioObject *const* CATMSHStudioObject::GetFathers (short &amp; NbOfFather) const
{
  NbOfFather = _NbOfFathers;
  return (CATMSHStudioObject *const*) _Family;
}

//
//==================================================
// SetWork: criture de la position de travail
//==================================================
//
inline void CATMSHStudioObject::SetWorkAsInt ( CATINTPTR Work )
{
  _Work.AsInt = Work;
}

//
//==================================================
// SetWork: criture de la position de travail (domaines de maillage)
//==================================================
//
inline void CATMSHStudioObject::SetWorkAsPtr ( void * Work )
{
  _Work.AsPtr = Work;
}

//
//==================================================
// GetWork: lecture du int Work
//==================================================
//
inline CATINTPTR CATMSHStudioObject::GetWorkAsInt () const
{
  return _Work.AsInt;
}

//
//==================================================
// GetWork: lecture du void * Work
//==================================================
//
inline void * CATMSHStudioObject::GetWorkAsPtr () const
{
  return _Work.AsPtr;
}
#endif

</div>
    
    <div class="navigation">
        <div><a href="CATMSHStSpecManager.html">‚Üê ‰∏ä‰∏ÄÈ°µ: CATMSHStSpecManager.h</a></div>
        <div><a href="CATMSHStudioServices.html">‰∏ã‰∏ÄÈ°µ: CATMSHStudioServices.h ‚Üí</a></div>
    </div>
</body>
</html>