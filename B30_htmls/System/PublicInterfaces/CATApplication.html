<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>System/PublicInterfaces/CATApplication.h</title>
    <style>
        body {
            font-family: 'Consolas', 'Monaco', monospace;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .header {
            background-color: #2c3e50;
            color: white;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .navigation {
            display: flex;
            justify-content: space-between;
            margin: 15px 0;
            padding: 10px;
            background-color: #ecf0f1;
            border-radius: 5px;
        }
        .navigation a {
            color: #2980b9;
            text-decoration: none;
            padding: 5px 10px;
            background-color: white;
            border-radius: 3px;
            border: 1px solid #bdc3c7;
        }
        .navigation a:hover {
            background-color: #3498db;
            color: white;
        }
        .content {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            border: 1px solid #bdc3c7;
            white-space: pre-wrap;
            font-size: 14px;
            line-height: 1.4;
            overflow-x: auto;
        }
        .back-to-index {
            text-align: center;
            margin: 15px 0;
        }
        .back-to-index a {
            color: #27ae60;
            text-decoration: none;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>System/PublicInterfaces/CATApplication.h</h1>
    </div>
    
    <div class="navigation">
        <div><a href="BigLittle.html">‚Üê ‰∏ä‰∏ÄÈ°µ: BigLittle.h</a></div>
        <div><a href="CATAssert.html">‰∏ã‰∏ÄÈ°µ: CATAssert.h ‚Üí</a></div>
    </div>
    
    <div class="back-to-index">
        <a href="index.html">üìÅ ËøîÂõûÁõÆÂΩï</a>
    </div>
    
    <div class="content">#ifndef CATAPPLICATION_H
#define CATAPPLICATION_H

// COPYRIGHT DASSAULT SYSTEMES 1999

/**
 * @CAA2Level L1
 * @CAA2Usage U2
 */

#include &quot;CATCommand.h&quot;

// Type of Subscribe method
// -----------------------------------------------------------------
/**
 * Command subscribing type.
 * &lt;b&gt;Role&lt;/b&gt;: The subscribing type , used as parameter of the methods Subscribe and
 * RemoveSubscribe.
 * @param CATSubscribeEndTransaction
 *   The subscribing command must be called when the transaction is completed
 * @param CATSubscribeIdle
 *   The subscribing command must be called when the process enters the main event loop 
 * @see CATApplication#Subscribe , CATApplication#RemoveSubscribe 
 */
enum { CATSubscribeEndTransaction=1, CATSubscribeIdle =2 };
/** @nodoc */
#define CATSubsribeIdle CATSubscribeIdle

class CATNotifier;
class CATMarshal;

/**
 * Base class for applications.
 * &lt;b&gt;Role&lt;/b&gt;:
 * An application is the main object in a process and includes
 * related objects, such as windows, as data members.
 */
class ExportedByJS0FM CATApplication : public CATCommand
{
   public :

/**
 * Constructs an application. 
 * @param iParent
 *   The parent command of the created application.
 *   &lt;br&gt;&lt;b&gt;Legal values&lt;/b&gt;:
 *   Set it to NULL, except if you have several application instances in
 *   the same process.
 * @param iMode
 *   A flag to indicate whether the application constructor supplies the main function
 *   &lt;br&gt;&lt;b&gt;Legal values&lt;/b&gt;:
 *   (&lt;tt&gt;iMode&lt;/tt&gt;=0) or if the application is instantiated from an
 *   existing main function.
 */
      CATApplication(CATCommand * iParent,
                     void *       iMode=0);
      virtual ~CATApplication ( ) ;

      // Time out  Subscription
      //-----------------------
/**
 * Adds a timeout subscription to a command.
 * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;:
 * Recalls the command on a given static method when the given time is elapsed. 
 * @param iTime
 *   The time, expressed in milliseconds, to leave elaspe from the moment &lt;tt&gt;AddTimeOut&lt;/tt&gt;
 *   is called, to the moment &lt;tt&gt;UserStaticMethod&lt;/tt&gt; is called
 * @param iToCLient 
 *   The command to call using its &lt;tt&gt;UserStaticMethod&lt;/tt&gt; method 
 * @param iClientData 
 *   Data to pass to &lt;tt&gt;UserStaticMethod&lt;/tt&gt;
 * @param UserStaticMethod 
 *   The method to call when &lt;tt&gt;iTime&lt;/tt&gt; is elapsed
 * @return 0 if the timeout subscription is successfully added and 1 otherwise.
 */
      int AddTimeOut(int          iTime,
                     CATCommand * iToClient,
                     void       * iClientData,
                     void (* UserStaticMethod)());

      // Remove Time out
      //----------------
/**
 * Removes a timeout subscription from a command.
 * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;:
 * To remove the subscription for a given command instance and a given time. 
 * @param iTime 
 *   The elapsed time
 * @param iToClient
 *   The command for which the subscription is to be removed
 * @return 0 if the timeout subscription is successfully removed and 1 otherwise.
 * @see #AddTimeOut
 */
      int RemoveTimeOut(int          iTime,
                        CATCommand * iToClient);

      // File Descriptor Subscription
      //------------------------------
/**
 * Adds a file descriptor subscription to a command.
 * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;:
 * This recalls the command on a given static method when the given file
 * descriptor is modified. This applies generally to any entity homogeneous
 * to a file, such as an input flow, a pipe, a socket, but not to disk files.
 * The term file descriptor applies to UNIX and corresponds to file handle
 * with Windows.
 * @param iFileDescriptor
 *   The file descriptor whose modification requests to call the method
 *   &lt;tt&gt;UserStaticMethod&lt;/tt&gt;
 * @param iToClient
 *   The command to call with its &lt;tt&gt;UserStaticMethod&lt;/tt&gt; 
 * @param iClientData
 *   Data useful to &lt;tt&gt;UserStaticMethod&lt;/tt&gt;
 * @param UserStaticMethod
 *   The method to call when &lt;tt&gt;iFileDescriptor&lt;/tt&gt; is modified.
 * @return 0 if the file descriptor subscription is successfully added and 0 otherwise.
 */
      int AddFileDescriptor(int          iFileDescriptor,
                            CATCommand * iToClient,
                            void       * iClientData,
                            void (* UserStaticMethod)());

      // Remove File Descriptor
      //-----------------------
/**
 * Removes a file descriptor subscription from a command.
 * @param iFileDescriptor
 *   The file descriptor.
 * @param iToClient
 *   The command for which the subscription is to be removed.
 * @return 0 if the file descriptor subscription is successfully removed and 0 otherwise.
 * @see #AddFileDescriptor
 */
      int RemoveFileDescriptor(int          iFileDescriptor,
                               CATCommand * iToClient);

      // Subscribe on Idle / End Transaction
      //------------------------------------
/**
 * Adds a transaction/idle subscription to a command. 
 * @param iSubscribingType 
 *   The subscribing type.
 *   &lt;br&gt;&lt;b&gt;Legal values&lt;/b&gt;: Can be set to &lt;tt&gt;CATSubscribeEndTransaction&lt;/tt&gt;
 *   (=1) or to &lt;tt&gt;CATSubscribeIdle&lt;/tt&gt; (=2) 
 * @param iToClient 
 *   The command to call with its &lt;tt&gt;UserStaticMethod&lt;/tt&gt; 
 * @param iClientData
 *   Data useful to &lt;tt&gt;UserStaticMethod&lt;/tt&gt;
 * @param UserStaticMethod 
 *   The method to call when the state defined by
 *   &lt;tt&gt;iSubscribingType&lt;/tt&gt; is reached.
 * @return 0 if the transaction/idle subscription is successfully added and 0 otherwise.
 */
      int Subscribe(int          iSubscribingType,
                    CATCommand * iToClient,
		    void       * iClientData,
                    void (* UserStaticMethod)());

      // Remove Subscribe
      //-----------------
/**
 * Removes a transaction/idle subscription from a command.
 * @param iSubscribedType 
 *   The subscribed type.
 *   &lt;br&gt;&lt;b&gt;Legal values&lt;/b&gt;: Can be set to &lt;tt&gt;CATSubscribeEndTransaction&lt;/tt&gt;
 *   (=1) or to &lt;tt&gt;CATSubscribeIdle&lt;/tt&gt; (=2) 
 *  @param  iToClient
 *   The command for which the subscription is to be removed.
 * @return 0 if the transaction/idle subscription is successfully removed and 0 otherwise.
 * @see #Subscribe
 */
      int RemoveSubscribe(int          iSubscribedType,
                          CATCommand * iToClient);

      // Objet du framework interne
      //---------------------------
/**
 * Returns a pointer to the application data member.
 * @return The application data member pointer, or the first application
 * created if several application instances exist.
 * Do never release this returned pointer.
 */
      static  CATApplication * MainApplication();

      // CATNotifier Instance
      // --------------------
	  /** @nodoc */
      CATNotifier * _ClientManagerPtr;

/**
 * @nodoc
 * Main function.
 * @param argc
 *   The &lt;tt&gt;argc&lt;/tt&gt; command line argument containing the number
 *   of arguments passed to the main function (argument count).
 * @param argv
 *   The &lt;tt&gt;argv&lt;/tt&gt; command line argument, pointer to a character
 *   string table containing the arguments (argument vector).
 * @param env
 *   The pointer to the environment list.
 */
  static int Main(int     argc,
                  char ** argv,
                  char ** env);

      // Application Starting
      //------------------------------
/**
 * Begins the application.
 * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;:
 * This method must be redefined to contain the main objects instantiation. 
 * It should contain the whole application code.
 */
      virtual void BeginApplication();

      // Application Termination 
      //------------------------------
/**
 * Ends the application.
 * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;:
 * This method should be redefined to include end application tasks,
 * such as closing files.
 * @return 
 *   The application return code.
 */
      virtual int EndApplication();

      // Application Building
      //------------------------------
/**
 * Builds the application environment.
 * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;:
 * This environment can be, for example, the different windows used by the
 * application.
 * @param argc
 *   The &lt;tt&gt;argc&lt;/tt&gt; command line argument containing the number
 *   of arguments passed to the main function (argument count).
 * @param argv
 *   The &lt;tt&gt;argv&lt;/tt&gt; command line argument, pointer to a character
 *   string table containing the arguments (argument vector).
 * @param env
 *   The pointer to the environment list.
 */
      virtual void BuildApplicationEnvironment(int     argc,
                                               char ** argv,
                                               char ** env);

      // Application Loop
      //---------------------
/**
 * Accommodates the event loop.
 * &lt;br&gt;&lt;b&gt;Warning&lt;/b&gt;: It cannot be used with Windows, since the event loop is
 * managed only by the operating system.
 */
      virtual void RunApplication();

      // CATCommand Data Management
      // --------------------------
/**
 * @nodoc
 * Redefinition of the SaveState method of the CATCommand class.
 * @see CATCommand#SaveState
 */
      virtual int SaveState(CATNotification * iNotification,
                            CATMarshal      &amp; iDataToSave);
/**
 * @nodoc
 * Redefinition of the RestoreState method of the CATCommand class.
 * @see CATCommand#RestoreState
 */
      virtual int RestoreState(CATNotification * iNotification,
                               CATMarshal      &amp; oDataToRestore);

/**
 * @nodoc
 * Requests the ClassName, IsA, and IsAKindOf methods to be created.
 */
      CATDeclareClass;
 

   private :

      //===================================================
      // Data
      //===================================================

      // CATApplication Instance
      //-------------------------
      static CATApplication* First;

      void BeginCB(CATCommand*, CATNotification *, CATCommandClientData);


};
#endif
</div>
    
    <div class="navigation">
        <div><a href="BigLittle.html">‚Üê ‰∏ä‰∏ÄÈ°µ: BigLittle.h</a></div>
        <div><a href="CATAssert.html">‰∏ã‰∏ÄÈ°µ: CATAssert.h ‚Üí</a></div>
    </div>
</body>
</html>