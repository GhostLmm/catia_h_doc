<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>System/PublicInterfaces/CATSysCAALM.h</title>
    <style>
        body {
            font-family: 'Consolas', 'Monaco', monospace;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .header {
            background-color: #2c3e50;
            color: white;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .navigation {
            display: flex;
            justify-content: space-between;
            margin: 15px 0;
            padding: 10px;
            background-color: #ecf0f1;
            border-radius: 5px;
        }
        .navigation a {
            color: #2980b9;
            text-decoration: none;
            padding: 5px 10px;
            background-color: white;
            border-radius: 3px;
            border: 1px solid #bdc3c7;
        }
        .navigation a:hover {
            background-color: #3498db;
            color: white;
        }
        .content {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            border: 1px solid #bdc3c7;
            white-space: pre-wrap;
            font-size: 14px;
            line-height: 1.4;
            overflow-x: auto;
        }
        .back-to-index {
            text-align: center;
            margin: 15px 0;
        }
        .back-to-index a {
            color: #27ae60;
            text-decoration: none;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>System/PublicInterfaces/CATSysCAALM.h</h1>
    </div>
    
    <div class="navigation">
        <div><a href="CATSysAutoSettingController.html">‚Üê ‰∏ä‰∏ÄÈ°µ: CATSysAutoSettingController.h</a></div>
        <div><a href="CATSysCommunication.html">‰∏ã‰∏ÄÈ°µ: CATSysCommunication.h ‚Üí</a></div>
    </div>
    
    <div class="back-to-index">
        <a href="index.html">üìÅ ËøîÂõûÁõÆÂΩï</a>
    </div>
    
    <div class="content">#ifndef CAALM_INCLUDE
#define CAALM_INCLUDE

// Copyright Dassault Systemes 2001
/**
 * @CAA2Level L1
 * @CAA2Usage U1
 */
#include &quot;JS0CATLM.h&quot;

/**
 * Class providing access to CATIA&#x27;s licensing subsystem. 
 */
class ExportedByJS0CATLM CATSysCAALM {

public:

    /**
      * Status code returned.
      * @param success
      *   The requested action has completed successfully.
      * @param error
      *   Catch-all error code.
      * @param notInitialized
      *   &lt;tt&gt;Initialize&lt;/tt&gt; has not been called.
      * @param alreadyInitialized
      *   The licensing subsystem is already initialized by way of Initialize
      *   or another CATIA&#x27;s function. CAALM might not function.
      * @param invalidPartner
      *   The specified CAA2 partner name and key are not recognized.
      * @param invavlidProduct
      *   The specified product is unknown or cannot be handled by the current
      *   CAA2 partner.
      * @param invalidICPath
      *   The specified directoty does not contain any product identity card.
      * @param invalidHandle
      *   The specified Handle variable does not contain valid data.
      */
    enum CATSysCAALMStatus {
        success = 0,
        error,
        notInitialized,
        alreadyInitialized,
        notRequested,
        invalidPartner,
        invalidProduct,
        invalidICPath,
        invalidHandle
    };

    /**
      * @nodoc
      */
    typedef int (*RequestCallback) (const char *iProductName,
                                    unsigned long iProductID,
                                    unsigned long ioData[2]);

    /**
      * Type that will contain the CAA2 partner data.
      */
    typedef void *Handle;

    /**
      * This is not a function member of the CATSysCAALM class but an entry 
      * point to be defined in a shared library.&lt;br&gt;
      * Partners must normally deliver a shared library with a name
      * of the form &lt;B&gt;&lt;EM&gt;ABC&lt;/EM&gt;_LM&lt;/B&gt; where &lt;B&gt;&lt;EM&gt;ABC&lt;/EM&gt;&lt;/B&gt; is the
      * partner name as defined in the product identification card.
      * The purpose of this entry point is to let the partner code perform all
      * required initializations and to call &lt;a href=&quot;#Initialize(char*,unsigned long,RequestCallback,Handle&amp;)&quot;&gt;Initialize&lt;/a&gt;.&lt;br&gt;
      * Please note that &lt;tt&gt;LM_Setup&lt;/tt&gt; should be declared as &lt;tt&gt;extern &quot;C&quot;&lt;/tt&gt;.
      * On Windows systems, it should also be declared as an exported symbol
      * with &lt;tt&gt;__declspec (export)&lt;/tt&gt;.
      */
    void LM_Setup ();

    /**
      * Initializes the licensing subsystem with the CAA2 partner data.
      * This call should only be made by the &lt;a href=&quot;#LM_Setup()&quot;&gt;LM_Setup&lt;/a&gt;
      * entry point.
      * @param iPartnerName
      *   The name of the CAA2 partner as specified by the SetPartner
      *   in the product identity card.
      * @param iPartnerKey
      *   The confidential 32-bit integer assigned specifically to the
      *   CAA2 partner by DS.
      * @param iRCB
      *   The pointer to a function implemented by the CAA2 partner that will
      *   be called for license operations. See &lt;a href=&quot;#callback(char*,unsigned long,unsigned long[2])&quot;&gt;RequestCallback&lt;/a&gt; for details.
      * @param ohandle
      *   A Handle variable that will contain the CAA2 partner data upon 
      *   return.
      * @return
      *   success&lt;br&gt;
      *   invalidPartner&lt;br&gt;
      */
    static int    Initialize (const char *iPartnerName,
                              unsigned long iPartnerKey,
                              RequestCallback iRCB,
                              Handle&amp; ohandle);

    /**
      * Initializes the licensing subsystem. This will call the  &lt;a href=&quot;#LM_Setup()&quot;&gt;LM_Setup&lt;/a&gt;
      * entry point. Use this method in non-interactive mode.
      * @return
      *   success&lt;br&gt;
      *   error&lt;br&gt;
      */
    static int    Start();


    /**
      * Releases licenses requested and resources used by the CAA2 partner.
      * @param iohandle
      *   The Handle variable that was passed to &lt;a href=&quot;#Initialize(char*,unsigned long,RequestCallback,Handle&amp;)&quot;&gt;Initialize&lt;/a&gt;. 
      * @return
      *   success&lt;br&gt;
      *   invalidHandle&lt;br&gt;
      */
    static int    Stop (Handle ihandle);

    /**
      * Requests a product for enabling.
      * @param ihandle
      *   The Handle variable that was passed to &lt;a href=&quot;#Initialize(char*,unsigned long,RequestCallback,Handle&amp;)&quot;&gt;Initialize&lt;/a&gt;.
      * @param iProductName
      *   The name of the product like ABC.prd
      * @return
      *   sucess&lt;br&gt;
      *   error - data returned by the callback is invalid.&lt;br&gt;
      *   notInilialized&lt;br&gt;
      *   invalidProduct&lt;br&gt;
      *   invalidHandle&lt;br&gt;
      */
    static int    RequestProduct (Handle ihandle, const char *iProductName);


    /**
      * Releases a product that is enabled.
      * @param ihandle
      *   The Handle variable that was passed to &lt;a href=&quot;#Initialize(char*,unsigned long,RequestCallback,Handle&amp;)&quot;&gt;Initialize&lt;/a&gt;.
      * @param iProductName
      *   The name of the product like ABC.prd
      * @return
      *   sucess&lt;br&gt;
      *   error - data returned by the callback is invalid.&lt;br&gt;
      *   notInilialized&lt;br&gt;
      *   invalidProduct&lt;br&gt;
      *   invalidHandle&lt;br&gt;
      */
    static int    ReleaseProduct (Handle ihandle, const char *iProductName);


    /**
      * Updates the workbenches, works only with a CATInteractiveApplication.
      * @return
      *   sucess&lt;br&gt;
      *   error - unable to update workbenches.&lt;br&gt;
      */
    static int    UpdateWorkbenches();


    /**
      * Checks whether a product is enabled or not.
      * @param iProductName
      *   The name of the product (ie &quot;ABC.prd&quot;)
      * @return
      *   0 - the product is not enabled.&lt;br&gt;
      *   non 0 - the product is enabled.
      */
    static int    IsProductAuthorized (const char *iproductName);

    /**
      * This is the function to be implemented by the CAA2 partner and passed
      * to &lt;a href=&quot;#Initialize(char*,unsigned long,RequestCallback,Handle&amp;)&quot;&gt;Initialize&lt;/a&gt;. It is not part of CATSysCAALM but included here only for
      * documentation purpose.
      * &lt;br&gt;
      * It is called when the licensing subsystem needs to probe, request,
      * check, release... a license. Data returned represents a boolean 
      * indicating whether the operation has succeeded or failed.
      * @param iProductName
      *   The name of the product of the form ABC.prd
      * @param iProductID
      *   The 32-bit integer specified by the SetLicense of the product
      *   identity card.
      * @param ioData
      *   Two 32-bit integers that are used for verification. If the operation
      *   succeeds then ioData[0] must be XORed with the partner key
      *   and ioData[1] must also by XORed the product ID (2nd parameter).
      *   Any other value implies that the operation has failed.&lt;br&gt;
      *   On input, bits 12-15 of the first word ((ioData[0] &gt;&gt; 12) &amp; 0xf)
      *   represents a value describing the operation to be performed:
      *   &lt;DIR&gt;
      *      &lt;LI&gt;0 - check that the license is present
      *      &lt;LI&gt;1 - request the license
      *      &lt;LI&gt;2 - check that the license (previously requested) is still granted
      *      &lt;LI&gt;3 - release the license (previously requested)
      *      &lt;LI&gt;4 - check if the product must be displayed in Tools/Options/Licensing tab (success -&gt; displayed)
      *   &lt;/DIR&gt;
      */
    // This entry is dummy and only serves to document the callback
    int callback (const char *iProductName,
                  unsigned long iProductID,
                  unsigned long ioData[2]);


    /**
      * Initializes the licensing subsystem with the CAA2 partner data.
      * This call should be made by the &lt;a href=&quot;#LM_Setup()&quot;&gt;LM_Setup&lt;/a&gt;
      * entry point.
      * There are two different behaviours of the licensing subsystem:
      * &lt;DIR&gt;
      * &lt;LI&gt;the interactive mode, where licenses are read from settings
      *   (no need to call &lt;a href=&quot;#RequestProduct(char*)&quot;&gt;RequestProduct&lt;/a&gt;) and checked every 20 minutes.
      * &lt;LI&gt;the non-interactive mode, where licenses must be requested with 
      *   &lt;a href=&quot;#RequestProduct(char*)&quot;&gt;RequestProduct&lt;/a&gt; and are not checked.
      * &lt;/DIR&gt;
      * This should be the first call made by the application.
      * @param iPartnerName
      *   The name of the CAA2 partner as specified by the SetPartner
      *   in the product identity card.
      * @param iPartnerKey
      *   The confidential 32-bit integer assigned specifically to the
      *   CAA2 partner by DS.
      * @param iICPath
      *   A directory path where all the product identity cards are located.
      *   &lt;br&gt;
      *   A NULL value indicates that the interactive mode will be activated.
      * @param iRCB
      *   The pointer to a function implemented by the CAA2 partner that will
      *   be called for license operations. See &lt;a href=&quot;#callback(char*,unsigned long,unsigned long[2])&quot;&gt;RequestCallback&lt;/a&gt; for details.
      * @param ohandle
      *   A Handle variable that will contain the CAA2 partner data upon 
      *   return.
      * @return
      *   success&lt;br&gt;
      *   invalidICPath&lt;br&gt;
      *   invalidPartner&lt;br&gt;
      * @deprecated V5R16
      */
    static int    Initialize (const char *iPartnerName,
                              unsigned long iPartnerKey,
                              const char *iICPath,
                              RequestCallback iRCB,
                              Handle&amp; ohandle);



};

#endif
</div>
    
    <div class="navigation">
        <div><a href="CATSysAutoSettingController.html">‚Üê ‰∏ä‰∏ÄÈ°µ: CATSysAutoSettingController.h</a></div>
        <div><a href="CATSysCommunication.html">‰∏ã‰∏ÄÈ°µ: CATSysCommunication.h ‚Üí</a></div>
    </div>
</body>
</html>