<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CAADoc/CAASystem.edu/CAASysCryptedILB.m/LocalInterfaces/CAASysCryptedILB.h</title>
    <style>
        body {
            font-family: 'Consolas', 'Monaco', monospace;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .header {
            background-color: #2c3e50;
            color: white;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .navigation {
            display: flex;
            justify-content: space-between;
            margin: 15px 0;
            padding: 10px;
            background-color: #ecf0f1;
            border-radius: 5px;
        }
        .navigation a {
            color: #2980b9;
            text-decoration: none;
            padding: 5px 10px;
            background-color: white;
            border-radius: 3px;
            border: 1px solid #bdc3c7;
        }
        .navigation a:hover {
            background-color: #3498db;
            color: white;
        }
        .content {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            border: 1px solid #bdc3c7;
            white-space: pre-wrap;
            font-size: 14px;
            line-height: 1.4;
            overflow-x: auto;
        }
        .back-to-index {
            text-align: center;
            margin: 15px 0;
        }
        .back-to-index a {
            color: #27ae60;
            text-decoration: none;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>CAADoc/CAASystem.edu/CAASysCryptedILB.m/LocalInterfaces/CAASysCryptedILB.h</h1>
    </div>
    
    <div class="navigation">
        <div><a href="../../CAASysComponentImpl.m/LocalInterfaces/CAASysComponentFactory.html">‚Üê ‰∏ä‰∏ÄÈ°µ: CAASysComponentFactory.h</a></div>
        <div><a href="CAASysFileFunctions.html">‰∏ã‰∏ÄÈ°µ: CAASysFileFunctions.h ‚Üí</a></div>
    </div>
    
    <div class="back-to-index">
        <a href="index.html">üìÅ ËøîÂõûÁõÆÂΩï</a>
    </div>
    
    <div class="content">// COPYRIGHT DASSAULT SYSTEMES 2004
#ifndef __CAAESysCryptedILB__
#define __CAAESysCryptedILB__
//===========================================================================
//  Abstract of the class:
//  ----------------------
//
//  Data extension of the CATUExitCryptedILockBytes component and implementing 
//  the CATIUExitCryptedILockBytes interface.
//
//  The component CATUExitCryptedILockBytes is defined in the System FW. 
//
//===========================================================================

// System Framework
#include &quot;CATBaseUnknown.h&quot;   //Needed to derive from CATBaseUnknown
#include &quot;CATIUExitCryptedILockBytes.h&quot;


class CAASysCryptedILB : public CATBaseUnknown
{
  // Used in conjunction with CATImplementClass in the .cpp file
  CATDeclareClass;

  public:

    CAASysCryptedILB();
    virtual ~CAASysCryptedILB();

/**
 * Reads and decrypts a block of datas.
 * &lt;b&gt;Role&lt;/b&gt;: Reads a block of datas in a crypted ILockBytes and returns the 
 * decrypted datas. This method is used for the manipulation of V5 documents.
 * The given offset and length are refering to the decrypted version of the 
 * file.
 * @param iOffset [in]
 *   Offset of the block in the decrypted file 
 * @param  iBuff [in]
 *  Buffer where the decrypted datas where will be writen.
 * @param iLengthToRead [i]
 *   the size of of the requested decrypted datas.
 * @param oLengthRead [out]
 *   the length of read datas.
 * @return
 *   &lt;b&gt;Legal values&lt;/b&gt;:
 *   &lt;br&gt;&lt;tt&gt; S_OK :&lt;/tt&gt;on Success.
 *   &lt;br&gt;&lt;tt&gt; CATSysCLB_E_SEEKERROR :&lt;/tt&gt; problem in setting the read offset.
 *   &lt;br&gt;&lt;tt&gt; CATSysCLB_E_READFAULT :&lt;/tt&gt; problem while reading.
 *   &lt;br&gt;&lt;tt&gt; CATSysCLB_E_INVALIDPARAMETER :&lt;/tt&gt; arguments incorrects.
 *   &lt;br&gt;&lt;tt&gt; CATSysCLB_E_DOCFILECORRUPT  :&lt;/tt&gt; document can not be decrypted.
 *   &lt;br&gt;&lt;tt&gt; CATSysCLB_E_UNKNOWN :&lt;/tt&gt; unexpected error.
 */    
    HRESULT ReadAt( ULARGE_INTEGER iOffset,
		    void  *iBuff,
		    ULONG iLengthToRead,
		    ULONG  *oLengthRead) ; 


/**
 * Writes and crypts  a block of datas.
 * &lt;b&gt;Role&lt;/b&gt;: Writes a block of datas. This method is used for the manipulation
 * of V5 documents.
 * The given offset and length are refering to the decrypted version of the file. 
 * @param iOffset [in]
 *   Offset of the block in the decrypted file 
 * @param  iDataSource [in]
 *  Buffer of uncrypted datas to write.
 * @param iLengthToWrite [i]
 *   the size of of the datas to write.
 * @param oLengthWriten [out]
 *   the length of read writen. Should be equal to iLengthToWrite if no 
 *   problem has occurred.
 * @return
 *   &lt;b&gt;Legal values&lt;/b&gt;:
 *   &lt;br&gt;&lt;tt&gt; S_OK :&lt;/tt&gt;on Success.
 *   &lt;br&gt;&lt;tt&gt; CATSysCLB_E_SEEKERROR :&lt;/tt&gt; problem in setting the read offset.
 *   &lt;br&gt;&lt;tt&gt; CATSysCLB_E_WRITEFAULT :&lt;/tt&gt; problem while writing.
 *   &lt;br&gt;&lt;tt&gt; CATSysCLB_E_MEDIUMFULL :&lt;/tt&gt; disk full error.
 *   &lt;br&gt;&lt;tt&gt; CATSysCLB_E_INVALIDPARAMETER :&lt;/tt&gt; arguments incorrects.
 *   &lt;br&gt;&lt;tt&gt; CATSysCLB_E_DISKISWRITEPROTECTED :&lt;/tt&gt; disk write protected.
 *   &lt;br&gt;&lt;tt&gt; CATSysCLB_E_UNKNOWN :&lt;/tt&gt; unexpected error.
*/          
  HRESULT WriteAt( ULARGE_INTEGER iOffset,
		   const void *iDataSource,
		   ULONG iLengthToWrite,
		   ULONG  *LengthWritten) ;
        
/**
 * Flush all the buffers.
 * &lt;b&gt;Role&lt;/b&gt;: Insures that the disk view of the file is coherent, and that all
 * the  buffers have been writen on disk.
 * @return
 *   &lt;b&gt;Legal values&lt;/b&gt;:
 *   &lt;br&gt;&lt;tt&gt; S_OK :&lt;/tt&gt;on Success.
 *   &lt;br&gt;&lt;tt&gt; CATSysCLB_E_WRITEFAULT :&lt;/tt&gt; problem while writing.
 *   &lt;br&gt;&lt;tt&gt; CATSysCLB_E_MEDIUMFULL :&lt;/tt&gt; disk full error.
 *   &lt;br&gt;&lt;tt&gt; CATSysCLB_E_DISKISWRITEPROTECTED :&lt;/tt&gt; disk write protected.
 *   &lt;br&gt;&lt;tt&gt; CATSysCLB_E_UNKNOWN :&lt;/tt&gt; unexpected error.
*/          
  HRESULT  Flush( void) ;



/**
 * Sets the size of the CATILockBytes.
 * &lt;b&gt;Role&lt;/b&gt;: Sets the size of the CATILockBytes.
 * @ param iLength.
 *      The new size of the CATILockBytes.
 * @return
 *   S_OK on Success.
 *   E_FAIL on error. ( We can discuss further for more precise errors codes)
*/                  
  HRESULT SetSize( ULARGE_INTEGER iLength);
        
 /**
 * Locks a region of the CATILockBytes.
 * &lt;b&gt;Role&lt;/b&gt;: Locks a region of the CATILockBytes. Not used.
 * The implementation can return CATSysCLB_E_UNIMPLEMENTEDFUNCTION
 * @param iOffset [in]
 *   Offset of the block in the decrypted file  
 * @param iLength [i] 
 *   the size of the region. 
 * @param dwLockType [in] 
 *        type of lock. 
 * @return 
 *   &lt;b&gt;Legal values&lt;/b&gt;: 
 *   &lt;br&gt;&lt;tt&gt; S_OK :&lt;/tt&gt;on Success. 
 *   &lt;br&gt;&lt;tt&gt; CATSysCLB_E_UNIMPLEMENTEDFUNCTION :&lt;/tt&gt; unimplemented       
*/               
  HRESULT LockRegion( ULARGE_INTEGER iOffset, 
		      ULARGE_INTEGER iLegnth,
		      DWORD dwLockType); 
 /**
 * Unocks a region of the CATILockBytes.
 * &lt;b&gt;Role&lt;/b&gt;: Unlocks a region of the CATILockBytes. Not used.
 * The implementation can return CATSysCLB_E_UNIMPLEMENTEDFUNCTION
 * @param iOffset [in]
 *   Offset of the block in the decrypted file 
 * @param iLength [i]
 *   the size of the region.
 * @param dwLockType [in]
 *        type of lock.
 * @return
 *   &lt;b&gt;Legal values&lt;/b&gt;:
 *   &lt;br&gt;&lt;tt&gt; S_OK :&lt;/tt&gt;on Success.
 *   &lt;br&gt;&lt;tt&gt; CATSysCLB_E_UNIMPLEMENTEDFUNCTION :&lt;/tt&gt; unimplemented
*/                
 HRESULT  UnlockRegion( ULARGE_INTEGER iOffset,
			ULARGE_INTEGER iLength,
			DWORD dwLockType) ;
/**
 * Returns informations for the given file.
 * &lt;b&gt;Role&lt;/b&gt;:  Returns informations for the given file. For the size, 
 * the uncrypted size must be returned.
 * @return
 *   S_OK on Success.
 *   E_FAIL on error. ( We can discuss further for more precise errors codes)
*/          
  HRESULT  Stat( STATSTG FAR *oStat, DWORD iStatFlag);


/**
 * Defines the way to open the CATILockbytes
 * &lt;b&gt;Role&lt;/b&gt;:Defines the way to open the CATILockBytes.
 * @param iMode
 *      The global opening mode used by the V5 document. This mode is not to
 *      be analysed, but should be stored in the STATSTG structure. 
 *      For non V5-document it will be 0 and never used.
 * @param iOpenMode 
 *      Opening mode 
 * @param iSharingMode
 *      Sharing mode
  * @param  iOpenFlag 
 *       flag for specifying the open processing 
 * @param  iSpecialFlag
 *       flag for specifying special behavior.
 *	&lt;b&gt;Legal values&lt;/b&gt;:
 *	&lt;br&gt;&lt;tt&gt;1 :&lt;/tt&gt; the file is deleted on close.
 *	 &lt;br&gt;&lt;tt&gt;0 :&lt;/tt&gt; Nothing
 * @return
 *   &lt;b&gt;Legal values&lt;/b&gt;:
 *   &lt;br&gt;&lt;tt&gt; S_OK :&lt;/tt&gt;on Success.
 *   &lt;br&gt;&lt;tt&gt; CATSysCLB_E_INVALIDNAME :&lt;/tt&gt; invalid name for the document.
 *   &lt;br&gt;&lt;tt&gt; CATSysCLB_E_ACCESSDENIED:&lt;/tt&gt; access to the document not granted.
 *   &lt;br&gt;&lt;tt&gt; CATSysCLB_E_LOCKVIOLATION :&lt;/tt&gt; document locked by another process.
 *   &lt;br&gt;&lt;tt&gt; CATSysCLB_E_NOMOREFILES :&lt;/tt&gt; too many opened files
 *   &lt;br&gt;&lt;tt&gt; CATSysCLB_E_INVALIDPARAMETER :&lt;/tt&gt; arguments incorrect.
 *   &lt;br&gt;&lt;tt&gt; CATSysCLB_E_DOCFILECORRUPT :&lt;/tt&gt; document can not be read.
 *   &lt;br&gt;&lt;tt&gt; CATSysCLB_E_FILENOTFOUND :&lt;/tt&gt; document can not be found.
 *   &lt;br&gt;&lt;tt&gt; CATSysCLB_E_PATHNOTFOUND :&lt;/tt&gt; The path of the document could 
 *                                            not be found.
 *   &lt;br&gt;&lt;tt&gt; CATSysCLB_E_UNKNOWN :&lt;/tt&gt; unexpected error.
*/
  HRESULT  Open( const CATUnicodeString * iPath, 
		 DWORD iMode,
		 CATSysOpenMode iOpenMode, 
		 CATSysSharing iSharingMode, 
		 CATSysCreateMode iOpenFlag, 
		 CATSysCloseMode iCloseFlag);

/**
 * Defines the way to open the CATILockbytes
 * &lt;b&gt;Role&lt;/b&gt;:Defines the way to open the CATILockBytes.
 * @param iMode
 *      The global opening mode used by the V5 document. This mode is not to
 *      be analysed, but should be stored in the STATSTG structure. 
 *      For non V5-document it will be 0 and never used.
 * @param iOpenMode 
 *      Opening mode 
 * @param iSharingMode
 *      Sharing mode
  * @param  iOpenFlag 
 *       flag for specifying the open processing 
 * @param  iSpecialFlag
 *       flag for specifying special behavior.
 *	&lt;b&gt;Legal values&lt;/b&gt;:
 *	&lt;br&gt;&lt;tt&gt;1 :&lt;/tt&gt; the file is deleted on close.
 *	 &lt;br&gt;&lt;tt&gt;0 :&lt;/tt&gt; Nothing
 * @return
 *   &lt;b&gt;Legal values&lt;/b&gt;:
 *   &lt;br&gt;&lt;tt&gt; S_OK :&lt;/tt&gt;on Success.
 *   &lt;br&gt;&lt;tt&gt; CATSysCLB_E_INVALIDNAME :&lt;/tt&gt; invalid name for the document.
 *   &lt;br&gt;&lt;tt&gt; CATSysCLB_E_ACCESSDENIED:&lt;/tt&gt; access to the document not granted.
 *   &lt;br&gt;&lt;tt&gt; CATSysCLB_E_LOCKVIOLATION :&lt;/tt&gt; document locked by another process.
 *   &lt;br&gt;&lt;tt&gt; CATSysCLB_E_NOMOREFILES :&lt;/tt&gt; too many opened files
 *   &lt;br&gt;&lt;tt&gt; CATSysCLB_E_INVALIDPARAMETER :&lt;/tt&gt; arguments incorrect.
 *   &lt;br&gt;&lt;tt&gt; CATSysCLB_E_DOCFILECORRUPT :&lt;/tt&gt; document can not be read.
 *   &lt;br&gt;&lt;tt&gt; CATSysCLB_E_FILENOTFOUND :&lt;/tt&gt; document can not be found.
 *   &lt;br&gt;&lt;tt&gt; CATSysCLB_E_PATHNOTFOUND :&lt;/tt&gt; The path of the document could 
 *                                            not be found.
 *   &lt;br&gt;&lt;tt&gt; CATSysCLB_E_UNKNOWN :&lt;/tt&gt; unexpected error.
*/
  HRESULT  OpenW( const CATUC2Bytes * iPath,  
		 DWORD iMode, 
		 CATSysOpenMode iOpenMode,  
		 CATSysSharing iSharingMode,  
		 CATSysCreateMode iOpenFlag,  
		 CATSysCloseMode iCloseFlag); 
/**
 * Closes the CATILockBytes.
 * &lt;b&gt;Role&lt;/b&gt;: Closes the CATILockBytes.
 * @return
 *	&lt;b&gt;Legal values&lt;/b&gt;:
 *	&lt;br&gt;&lt;tt&gt;S_OK :&lt;/tt&gt;   on Success
*/
  HRESULT Close();




/**
 * Reads and decrypts a block of datas.
 * &lt;b&gt;Role&lt;/b&gt;: Reads a block of datas in a crypted ILockBytes from the current 
 * offset in the file and returns the decrypted datas. This method will be only 
 * used for non V5 documents.
 * @param  iBuff [in]
 *  Buffer where the decrypted datas where will be writen.
 * @param iLengthToRead [i]
 *   the size of of the requested decrypted datas.
 * @param oLengthRead [out]
 *   the length of read datas.
 * @return
 *   &lt;br&gt;&lt;tt&gt; S_OK :&lt;/tt&gt;on Success.
 *   &lt;br&gt;&lt;tt&gt; CATSysCLB_E_READFAULT :&lt;/tt&gt; problem while reading.
 *   &lt;br&gt;&lt;tt&gt; CATSysCLB_E_INVALIDPARAMETER :&lt;/tt&gt; arguments incorrects.
 *   &lt;br&gt;&lt;tt&gt; CATSysCLB_E_DOCFILECORRUPT  :&lt;/tt&gt; document can not be decrypted.
 *   &lt;br&gt;&lt;tt&gt; CATSysCLB_E_UNKNOWN :&lt;/tt&gt; unexpected error.
*/    
  HRESULT Read(   void  *iBuff,
		  ULONG iLengthToRead,
		  ULONG *oLengthRead);


/**
 * Writes and crypts  a block of datas.
 * &lt;b&gt;Role&lt;/b&gt;: Writes a block of datas at the current offset. This method will 
 * be only used for non V5 documents.
 * @param  iDataSource [in]
 *  Buffer of uncrypted datas to write.
 * @param iLengthToWrite [i]
 *   the size of of the datas to write.
 * @param oLengthWriten [out]
 *   the length of read writen. Should be equal to iLengthToWrite if no 
 *   problem has occurred.
 * @return
 *   &lt;b&gt;Legal values&lt;/b&gt;:
 *   &lt;br&gt;&lt;tt&gt; S_OK :&lt;/tt&gt;on Success.
 *   &lt;br&gt;&lt;tt&gt; CATSysCLB_E_WRITEFAULT :&lt;/tt&gt; problem while writing.
 *   &lt;br&gt;&lt;tt&gt; CATSysCLB_E_MEDIUMFULL :&lt;/tt&gt; disk full error.
 *   &lt;br&gt;&lt;tt&gt; CATSysCLB_E_INVALIDPARAMETER :&lt;/tt&gt; arguments incorrects.
 *   &lt;br&gt;&lt;tt&gt; CATSysCLB_E_DISKISWRITEPROTECTED :&lt;/tt&gt; disk write protected.
 *   &lt;br&gt;&lt;tt&gt; CATSysCLB_E_UNKNOWN :&lt;/tt&gt; unexpected error.
*/          
  HRESULT Write( const void *iDataSource,
		 ULONG iLengthToWrite,
		 ULONG  *LengthWritten);



/**
 * Reads in the encrypted file and returns a line.
 * &lt;b&gt;Role&lt;/b&gt;: Reads in the encrypted file and return decrypted data up to
 * the number of bytes specified by iNb parameter minus 1, or until a new-line
 * character and transfers that character to the ioLine parameter, or until it
 * encounters an end-of-file condition. The method then terminates the data 
 * string with a null character.
 * This method will never be called for V5 documents. 
 * @param  ioLine [inout]
 *  line Buffer of at least iNb size.
 * @param iNb [i]
 *   max number of character to read.
 * @param oEof[o]
 *   to indicate if the end of the file as been reached.
 *   &lt;br&gt;&lt;tt&gt; 1 :&lt;/tt&gt; End of file has been reached. In this case the return
 *   is S_OK.
 *   &lt;br&gt;&lt;tt&gt; 0 :&lt;/tt&gt; End of file has not been reached
 * @return
 *   &lt;br&gt;&lt;tt&gt; S_OK :&lt;/tt&gt;on Success .
 *   &lt;br&gt;&lt;tt&gt; STG_E_READFAULT :&lt;/tt&gt; problem while reading.
 *   &lt;br&gt;&lt;tt&gt; STG_E_INVALIDPARAMETER :&lt;/tt&gt; arguments incorrects.
 *   &lt;br&gt;&lt;tt&gt; STG_E_DOCFILECORRUPT  :&lt;/tt&gt; document can not be decrypted.
 *   &lt;br&gt;&lt;tt&gt; STG_E_UNKNOWN :&lt;/tt&gt; unexpected error.
 */
  HRESULT ReadLine ( char * ioLine, ULONG iNb, int &amp;oEof);



/**
 * Crypts and write a line for crypted text files.
 * &lt;b&gt;Role&lt;/b&gt;: Crypts Writes the null-terminated string pointed to by the 
 * iBuff parameter. The method does not crypt and write the terminating null 
 * character.
 * This method  will be only used for non V5 documents.
 * @param  iBuff [in]
 *  uncrypted Line  to write.
 * @return
 *   &lt;b&gt;Legal values&lt;/b&gt;:
 *   &lt;br&gt;&lt;tt&gt; S_OK :&lt;/tt&gt;on Success.
 *   &lt;br&gt;&lt;tt&gt; STG_E_WRITEFAULT :&lt;/tt&gt; problem while writing.
 *   &lt;br&gt;&lt;tt&gt; STG_E_MEDIUMFULL :&lt;/tt&gt; disk full error.
 *   &lt;br&gt;&lt;tt&gt; STG_E_INVALIDPARAMETER :&lt;/tt&gt; arguments incorrects.
 *   &lt;br&gt;&lt;tt&gt; STG_E_DISKISWRITEPROTECTED :&lt;/tt&gt; disk write protected.
 *   &lt;br&gt;&lt;tt&gt; STG_E_UNKNOWN :&lt;/tt&gt; unexpected error.
*/          
  HRESULT WriteLine ( const char * iBuff);

/**
 * Reads in the encrypted file and returns a line of unicode characters
 * &lt;b&gt;Role&lt;/b&gt;: Reads in the encrypted file and return decrypted data up to
 * the number of bytes specified by iNb parameter minus 1, or until a new-line
 * character and transfers that character to the ioLine parameter, or until it
 * encounters an end-of-file condition. The method then terminates the data 
 * string with a null character.
 * This method will never be called for V5 documents. 
 * @param  ioLine [inout]
 *  line Buffer.
 * @param iNb [i]
 *   max number of character to read.
 * @param oEof[o]
 *   to indicate if the end of the file as been reached.
 *   &lt;br&gt;&lt;tt&gt; 1 :&lt;/tt&gt; End of file has been reached. In this case the return
 *   is S_OK.
 *   &lt;br&gt;&lt;tt&gt; 0 :&lt;/tt&gt; End of file has not been reached
 * @return
 *   &lt;br&gt;&lt;tt&gt; S_OK :&lt;/tt&gt;on Success .
 *   &lt;br&gt;&lt;tt&gt; STG_E_READFAULT :&lt;/tt&gt; problem while reading.
 *   &lt;br&gt;&lt;tt&gt; STG_E_INVALIDPARAMETER :&lt;/tt&gt; arguments incorrects.
 *   &lt;br&gt;&lt;tt&gt; STG_E_DOCFILECORRUPT  :&lt;/tt&gt; document can not be decrypted.
 *   &lt;br&gt;&lt;tt&gt; STG_E_UNKNOWN :&lt;/tt&gt; unexpected error.  
 */
  HRESULT ReadLineW ( CATUnicodeString *ioLine, ULONG iNb, int &amp;oEof);

/**
 * Reads in the encrypted file and returns a line of unicode characters
 * &lt;b&gt;Role&lt;/b&gt;: Reads in the encrypted file and return decrypted data up to
 * the number of bytes specified by iNb parameter minus 1, or until a new-line
 * character and transfers that character to the ioLine parameter, or until it
 * encounters an end-of-file condition. The method then terminates the data 
 * string with a null character.
 * This method will never be called for V5 documents. 
 * @param  ioLine [inout]
 *  line Buffer.
 * @param iNb [i]
 *   max number of character to read.
 * @param oEof[o]
 *   to indicate if the end of the file as been reached.
 *   &lt;br&gt;&lt;tt&gt; 1 :&lt;/tt&gt; End of file has been reached. In this case the return
 *   is S_OK.
 *   &lt;br&gt;&lt;tt&gt; 0 :&lt;/tt&gt; End of file has not been reached
 * @return
 *   &lt;br&gt;&lt;tt&gt; S_OK :&lt;/tt&gt;on Success .
 *   &lt;br&gt;&lt;tt&gt; STG_E_READFAULT :&lt;/tt&gt; problem while reading.
 *   &lt;br&gt;&lt;tt&gt; STG_E_INVALIDPARAMETER :&lt;/tt&gt; arguments incorrects.
 *   &lt;br&gt;&lt;tt&gt; STG_E_DOCFILECORRUPT  :&lt;/tt&gt; document can not be decrypted.
 *   &lt;br&gt;&lt;tt&gt; STG_E_UNKNOWN :&lt;/tt&gt; unexpected error.  
 */
  HRESULT ReadLineWchar ( CATUC2Bytes *ioLine, ULONG iNb, int &amp;oEof);



/**
 * Crypts and write a line for crypted text files.
 * &lt;b&gt;Role&lt;/b&gt;: Crypts Writes the null-terminated unicode  string pointed to
 * by the iBuff parameter. The method does not crypt and write the terminating
 * null character.
 * This method  will be only used for non V5 documents.
 * @param  iBuff [in]
 *  uncrypted Line  to write.
 * @return
 *   &lt;b&gt;Legal values&lt;/b&gt;:
 *   &lt;br&gt;&lt;tt&gt; S_OK :&lt;/tt&gt;on Success.
 *   &lt;br&gt;&lt;tt&gt; STG_E_WRITEFAULT :&lt;/tt&gt; problem while writing.
 *   &lt;br&gt;&lt;tt&gt; STG_E_MEDIUMFULL :&lt;/tt&gt; disk full error.
 *   &lt;br&gt;&lt;tt&gt; STG_E_INVALIDPARAMETER :&lt;/tt&gt; arguments incorrects.
 *   &lt;br&gt;&lt;tt&gt; STG_E_DISKISWRITEPROTECTED :&lt;/tt&gt; disk write protected.
 *   &lt;br&gt;&lt;tt&gt; STG_E_UNKNOWN :&lt;/tt&gt; unexpected error.
*/          
  HRESULT WriteLineW ( const CATUnicodeString * iBuff);


/**
 * Crypts and write a line for crypted text files.
 * &lt;b&gt;Role&lt;/b&gt;: Crypts Writes the null-terminated unicode  string pointed to
 * by the iBuff parameter. The method does not crypt and write the terminating
 * null character.
 * This method  will be only used for non V5 documents.
 * @param  iBuff [in]
 *  uncrypted Line  to write.
 * @return
 *   &lt;b&gt;Legal values&lt;/b&gt;:
 *   &lt;br&gt;&lt;tt&gt; S_OK :&lt;/tt&gt;on Success.
 *   &lt;br&gt;&lt;tt&gt; STG_E_WRITEFAULT :&lt;/tt&gt; problem while writing.
 *   &lt;br&gt;&lt;tt&gt; STG_E_MEDIUMFULL :&lt;/tt&gt; disk full error.
 *   &lt;br&gt;&lt;tt&gt; STG_E_INVALIDPARAMETER :&lt;/tt&gt; arguments incorrects.
 *   &lt;br&gt;&lt;tt&gt; STG_E_DISKISWRITEPROTECTED :&lt;/tt&gt; disk write protected.
 *   &lt;br&gt;&lt;tt&gt; STG_E_UNKNOWN :&lt;/tt&gt; unexpected error.
*/
  HRESULT WriteLineWchar ( const  CATUC2Bytes* iBuff);


  private:
  
  // Copy constructor, not implemented
  // Set as private to prevent from compiler automatic creation as public.
  CAASysCryptedILB(const CAASysCryptedILB &amp;iObjectToCopy);
  
  // Assignment operator, not implemented
  // Set as private to prevent from compiler automatic creation as public.
  CAASysCryptedILB &amp; operator = (const CAASysCryptedILB &amp;iObjectToCopy);

  // To flush the current memory block
  HRESULT FlushCurBck();
  // To load into memory a disk block
  HRESULT ReadCurBck(size_t &amp;oRead);

#ifdef _WINDOWS_SOURCE
  HANDLE _fd;
#else
  int _fd;
#endif
  
  // Block Size for the encryption algorithm
  static size_t _Size;
  // Statistics of the file
  STATSTG _Stat;
  // memory buffer
  char * _Buff;
  // Space really used in the buffer ( usefull for the last block of the file)
  size_t _Used;
  // Current position in the memory buffer
  size_t  _CurPos;
  // Offset of the begining of the Buffer in the file 
  ULARGE_INTEGER _Offset;
  // Physical file offset needed for avoiding too many seeks
  ULARGE_INTEGER _FileOffset;
  //File Size
  ULARGE_INTEGER _FileSize;
  // flags
  int _State;
  // Encrypted or not
  int _Encrypted;
  
};
#endif
</div>
    
    <div class="navigation">
        <div><a href="../../CAASysComponentImpl.m/LocalInterfaces/CAASysComponentFactory.html">‚Üê ‰∏ä‰∏ÄÈ°µ: CAASysComponentFactory.h</a></div>
        <div><a href="CAASysFileFunctions.html">‰∏ã‰∏ÄÈ°µ: CAASysFileFunctions.h ‚Üí</a></div>
    </div>
</body>
</html>