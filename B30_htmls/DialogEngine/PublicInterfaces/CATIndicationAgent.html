<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DialogEngine/PublicInterfaces/CATIndicationAgent.h</title>
    <style>
        body {
            font-family: 'Consolas', 'Monaco', monospace;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .header {
            background-color: #2c3e50;
            color: white;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .navigation {
            display: flex;
            justify-content: space-between;
            margin: 15px 0;
            padding: 10px;
            background-color: #ecf0f1;
            border-radius: 5px;
        }
        .navigation a {
            color: #2980b9;
            text-decoration: none;
            padding: 5px 10px;
            background-color: white;
            border-radius: 3px;
            border: 1px solid #bdc3c7;
        }
        .navigation a:hover {
            background-color: #3498db;
            color: white;
        }
        .content {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            border: 1px solid #bdc3c7;
            white-space: pre-wrap;
            font-size: 14px;
            line-height: 1.4;
            overflow-x: auto;
        }
        .back-to-index {
            text-align: center;
            margin: 15px 0;
        }
        .back-to-index a {
            color: #27ae60;
            text-decoration: none;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>DialogEngine/PublicInterfaces/CATIndicationAgent.h</h1>
    </div>
    
    <div class="navigation">
        <div><a href="CATICmdSwitchAgent.html">‚Üê ‰∏ä‰∏ÄÈ°µ: CATICmdSwitchAgent.h</a></div>
        <div><a href="CATListOfCATDiaAction.html">‰∏ã‰∏ÄÈ°µ: CATListOfCATDiaAction.h ‚Üí</a></div>
    </div>
    
    <div class="back-to-index">
        <a href="index.html">üìÅ ËøîÂõûÁõÆÂΩï</a>
    </div>
    
    <div class="content">#ifndef CATIndicationAgent_H_
#define CATIndicationAgent_H_
#include &quot;CATDialogEngine.h&quot;

// COPYRIGHT DASSAULT SYSTEMES 1999
// protected DI0STATE.m

/**
 * @CAA2Level L1
 * @CAA2Usage U1
 */

#include &quot;CATAcquisitionAgent.h&quot;

#include &quot;CATCommand.h&quot;
#include &quot;CATMathPlane.h&quot;
#include &quot;CATMathPoint2D.h&quot;
#include &quot;DI0STATE.h&quot;

class CATDialog;
class CATString;
class CATListPtrCATMathPoint2D;

/**
 * Class representing an agent dedicated to indication.
 * &lt;b&gt;Role&lt;/b&gt;: An Indication agent is a specific acquisition agent which
 * retrieves a 2D point from a mouse left click.
 * @see CATMathPoint2D
 */

class ExportedByCATDialogEngine CATIndicationAgent : public CATAcquisitionAgent
{
  
  /** @nodoc */
  CATDeclareClass;
  
public:
  
  /**
  * Constructs an indication agent.
  * @param iId
  *   The agent identifier. It is used to retrieve the undo/redo titles in 
  *   the command resource file.
  */
  CATIndicationAgent (const CATString &amp; iId);
  
  virtual ~CATIndicationAgent ();
  
  
  /*---------------------------------*/
  //     PROJECTION PLANE 
  /*---------------------------------*/
  
 /**
  * Sets the plane on which to project a point selected in a 3D viewer.
  * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;: An indication agent directly retrieves 2D point
  * coordinates from a click in a 2D viewer. But, with a 3D viewer,
  * the click is undetermined.
  * To determine it, this method specifies a plane on which the point
  * clicked on the screen plane will be projected according to the
  * @href CATIndicationSegment direction. This direction corresponds
  * to the line going from the viewpoint eye to the mouse position on screen.
  * If no projection plane is defined, a plane perpendicular to the
  * @href CATIndicationSegment and containing the visualization origin point 
  * will be used for projection.
  * @param iPlane
  *   The plane.
  *   &lt;br&gt;&lt;b&gt;Legal values&lt;/b&gt;: it mustn&#x27;t be perpendicular to the near
  *   or far planes, that is to the screen plane, in order to get a point.
  */
  void SetMathPlane (const CATMathPlane &amp; iPlane);
  
  /**
  * Returns the plane on which a point selected in a 3D viewer is projected.
  * @return
  *   The plane.
  *   &lt;br&gt;&lt;b&gt;Lifecycle rules deviation&lt;/b&gt;: This method doesn&#x27;t AddRef the 
  *   returned value.
  */
  virtual CATMathPlane &amp; GetMathPlane ();
  
  /*---------------------------------*/
  //     VALUE 
  /*---------------------------------*/
  
  /**
  * Returns the agent value.
  * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;: The value is a 2D point.
  * The returned value depends on the @href CATAcquisitionAgent#ValuationState.
  * Indeed, if the agent valuation state is &lt;tt&gt;Valuated&lt;/tt&gt;, the 
  * &lt;tt&gt;GetValue&lt;/tt&gt; method returns the real value; but if the agent 
  * valuation state is &lt;tt&gt;PreValuated&lt;/tt&gt;, the &lt;tt&gt;GetValue&lt;/tt&gt; method 
  * returns the prevalue even if the agent has got a value. 
  * @return
  *   The value.
  *   &lt;br&gt;&lt;b&gt;Lifecycle rules deviation&lt;/b&gt;: This method doesn&#x27;t AddRef the 
  *   returned value.
  */
  virtual CATMathPoint2D &amp; GetValue ();
  
  /** @nodoc */
  virtual CATMathPoint2D * GetSpecifiedValue (CATAcquisitionAgent::ValuationState);
  
  /**
  * Sets the agent value.
  * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;: The value is a 2D point.
  * This method does not register an undo step.
  * &lt;br&gt;&lt;b&gt;Postcondition&lt;/b&gt;: Use the @href CATAcquisitionAgent#SetValuation
  * method to make the agent accept the value, otherwise this value is not
  * taken into account.
  * @param iValue
  *   The value.
  */
  virtual void SetValue (const CATMathPoint2D &amp; iValue);
  
  /**
  * Returns whether the shift and control keys have been pushed during 
  * the indication.
  * @return
  *   The key use.
  *   &lt;br&gt;&lt;b&gt;Legal values&lt;/b&gt;: Use the defined values to decode the returned
  *   integer:
  *   &lt;ul&gt;
  *   &lt;li&gt;&lt;tt&gt;ShiftModifierOn&lt;/tt&gt;&lt;/li&gt;
  *   &lt;li&gt;&lt;tt&gt;ControlModifierOn&lt;/tt&gt;&lt;/li&gt;
  *   &lt;/ul&gt;
  *   e.g: &lt;code&gt;if (Agent-&gt;GetModifier() &amp; ControlModifierOn)&lt;/code&gt;
  */
  virtual int GetModifier ();
  
  
  /*---------------------------------*/
  //     INTERNAL METHODS 
  /*---------------------------------*/
  
  /*---------------------------------*/
  /*    Dialog                       */
  /*---------------------------------*/
  /**
  * @nodoc
  * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;: Point coordinates will appear in a window
  * only if you use the method SetDialogObject
  * Using the method SetDialogObject means you must also use
  * UnsetDialogObject at the end for cleanup.
  * For proper screen positionning, this window must be placed
  * as a parallel dialog agent 
  * and displayed at the same time as the acquisition method;
  * Position validation through this window is not part of this mechanism
  * (in other words, you must take care of the OK pushbutton)
  * 
  * Example:
  *  FirstPoint = new CATIndicationAcquisitionAgent (&quot;firstPoint&quot;);
  *  FirstPoint -&gt; SetMathPlane (plane);
  *  FirstPoint -&gt; SetBehavior (CATDlgEngWithPrevaluation);
  *
  *  CATApplicationFrame * AppFrame=CATApplicationFrame::GetApplicationFrame();
  *  dialog = new CATDlgDialog (AppFrame -&gt; GetMainWindow(), &quot;LineCoord&quot;);
  *  frame1 = new CATDlgFrame (dialog,&quot;Name&quot;,CATDlgFraNoFrame|CATDlgFraNoTitle);
  *  dialog-&gt;Attach4Sides (frame1);
  *  FirstPoint -&gt; SetDialogObject (frame1);
  *
  *  AddCB (dialog, dialog-&gt;GetDiaOKNotification(),
  *         (CATCommandMethod)&amp;class::OKPoint, NULL);
  *
  *  FirstState -&gt; AddDialogAgent (FirstPoint);
  *  FirstState -&gt; AddDialogAgent (dialog);
  *
  * Somewhere later, you will need to do:
  *  FirstPoint -&gt; UnsetDialogObject ();
  *  delete FirstPoint;
  *  delete dialog;
  */
  void SetDialogObject (CATDialog *);
  /** @nodoc */
  void UnsetDialogObject ();
  
  
  /*---------------------------------*/
  /*    Life cycle                   */
  /*---------------------------------*/
  
  /** @nodoc */
  virtual CATStatusChangeRC Activate (CATCommand * fromClient, CATNotification * );
  /** @nodoc */
  virtual CATStatusChangeRC Desactivate (CATCommand * fromClient, CATNotification *);
  /** @nodoc */
  virtual CATStatusChangeRC Cancel (CATCommand * fromClient, CATNotification *);
  
  
  /*---------------------------------*/
  /*    Decode management            */
  /*---------------------------------*/
  
  /** @nodoc */
  virtual void * DecodeNotification (CATCommand * from, CATNotification * notif); 
  
  
  /*---------------------------------*/
  /* Undo and Redo management        */
  /*---------------------------------*/
  
  /** @nodoc */
  virtual void * UndoValue ();
  /** @nodoc */
  virtual void * RedoValue ();
  /** @nodoc */
  virtual void StoreValue ();
  /** @nodoc */
  virtual void InitializeValue ();
  /** @nodoc */
  virtual void ResetValue ();
  
  
  /*---------------------------------*/
  /* forbidden constructor           */
  /*---------------------------------*/
  /** @nodoc */
  CATIndicationAgent ();
  
private:
    
  CATMathPlane   _mPlane; // The working plane
  int            _IsmPlaneSet;
  CATMathPoint2D _tempValue; 
  CATMathPoint2D _value;    
  
  CATDialog * _Panel;
  int _modifier;
  int _tempModifier;
  
  int _currentValueInd;
  CATListPtrCATMathPoint2D * _valueStack;

  // NOT implemented, only declared to prevent unexpected call to default ctors created by the compiler
  CATIndicationAgent (const CATIndicationAgent &amp;);
  CATIndicationAgent &amp; operator= (const CATIndicationAgent &amp;);
  
};

#endif
</div>
    
    <div class="navigation">
        <div><a href="CATICmdSwitchAgent.html">‚Üê ‰∏ä‰∏ÄÈ°µ: CATICmdSwitchAgent.h</a></div>
        <div><a href="CATListOfCATDiaAction.html">‰∏ã‰∏ÄÈ°µ: CATListOfCATDiaAction.h ‚Üí</a></div>
    </div>
</body>
</html>