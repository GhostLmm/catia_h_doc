<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DialogEngine/PublicInterfaces/CATPathElementAgent.h</title>
    <style>
        body {
            font-family: 'Consolas', 'Monaco', monospace;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .header {
            background-color: #2c3e50;
            color: white;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .navigation {
            display: flex;
            justify-content: space-between;
            margin: 15px 0;
            padding: 10px;
            background-color: #ecf0f1;
            border-radius: 5px;
        }
        .navigation a {
            color: #2980b9;
            text-decoration: none;
            padding: 5px 10px;
            background-color: white;
            border-radius: 3px;
            border: 1px solid #bdc3c7;
        }
        .navigation a:hover {
            background-color: #3498db;
            color: white;
        }
        .content {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            border: 1px solid #bdc3c7;
            white-space: pre-wrap;
            font-size: 14px;
            line-height: 1.4;
            overflow-x: auto;
        }
        .back-to-index {
            text-align: center;
            margin: 15px 0;
        }
        .back-to-index a {
            color: #27ae60;
            text-decoration: none;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>DialogEngine/PublicInterfaces/CATPathElementAgent.h</h1>
    </div>
    
    <div class="navigation">
        <div><a href="CATPanelState.html">‚Üê ‰∏ä‰∏ÄÈ°µ: CATPanelState.h</a></div>
        <div><a href="CATStateActivateNotification.html">‰∏ã‰∏ÄÈ°µ: CATStateActivateNotification.h ‚Üí</a></div>
    </div>
    
    <div class="back-to-index">
        <a href="index.html">üìÅ ËøîÂõûÁõÆÂΩï</a>
    </div>
    
    <div class="content">#ifndef CATPathElementAgent_H
#define CATPathElementAgent_H
#include &quot;CATDialogEngine.h&quot;

// COPYRIGHT DASSAULT SYSTEMES 1999
// protected CATCmdDialogAgents.m

/**
 * @CAA2Level L1
 * @CAA2Usage U1
 */

#include &quot;CATAcquisitionAgent.h&quot;

#include &quot;CATListOfCATBaseUnknown.h&quot;
#include &quot;CATListOfCATString.h&quot;
#include &quot;CATListOfInt.h&quot;
#include &quot;CATDialog.h&quot;
#include &quot;CATString.h&quot;
#include &quot;CATUnicodeString.h&quot;
#include &quot;CATDlgEngUtility.h&quot;
#include &quot;CATEventSubscriberTypedefs.h&quot;
#include &quot;CATBooleanDef.h&quot;

// Compatibility VC7 - _SO is a #define
#if defined(_WINDOWS_SOURCE) &amp;&amp; defined(_SO)
#undef _SO
#endif

/** @nodoc */
#define STOP_LOOKING_FOR_TRUNCATED_PATH &amp;CATPathElementAgent::_emptyPathElement

class CATFrmEditor;
class CATFrmLayout;
class CATPathElement;
class CATSO;
class CATClassFilter;
class CATBaseUnknown;
class CATCommand;
class CATNotification;
class CATMultiSelectionAgentUI;
class CATRepShortHelp;

/**
 * Class representing an agent dedicated to selection.
 * &lt;b&gt;Role&lt;/b&gt;: &lt;p&gt;A Path element agent is a specific acquisition agent which
 * retrieves the path of the object under the mouse and stores it
 * as its value. The selection can be done in 3D/2D viewers or in  
 * specification trees.&lt;/p&gt;
 * &lt;p&gt;The required object can be directly under the mouse or can be in the path of the
 * object under the mouse. Here is an example to understand the path truncation:
 *  &lt;pre&gt;
 *   Suppose a Point aggregated by an Open_Body inside a Part document included in a
 *   Product document. The path of the Point is as follows:
 *
 *   Product.1/Part.1/Open_body.2/Point.3
 *   
 *   In the specification tree or in 3D you select Point.3; the object under the mouse
 *   is Point.3 but you can require an object of its path: Open_body.2 for example. 
 *   Point.3 is the selected object whenever Open_body.2 is the required object.
 *  &lt;/pre&gt;
 * &lt;/p&gt;
 * &lt;p&gt;The object filtering is based on interface implementation. There are two kinds of filtering:
 *  &lt;ol&gt;
 *   &lt;li&gt;With an ordered list, thanks to the @href #SetOrderedTypeList method &lt;/li&gt;
 *    &lt;br&gt;The interface&#x27;s order is more important than the object&#x27;s position in the selected path.
 *     For each interface of the list, a &lt;tt&gt;QI&lt;/tt&gt; is done for all objects of the selected path 
 *     (from the leaf to the root), if one object implements the current interface, the process is 
 *     ended. The required path is from the root to this object.
 *   &lt;li&gt;With a non ordered list, thanks to the @href #AddElementType method&lt;/li&gt;
 *    &lt;br&gt;The object&#x27;s position in the selected path is more important than the interface&#x27;s 
 *    order. 
 *    For each object of the selected path (from leaf to root), a &lt;tt&gt;QI&lt;/tt&gt; of all 
 *    interfaces is done, if the current object implements one of them, the process is ended.
 *    The required path is from the root to this current object.
 * &lt;/ol&gt;
 *  &lt;pre&gt;
 *   In the previous sample, suppose that Point implements the Itf1 interface and Open_body
 *   implements the itf2 interface.
 *   case 1: An ordered list with itf2 then itf1.
 *           The path of the agent is = Product.1/Part.1/Open_body.2/
 *
 *   case 2: A non ordered list with itf2 and itf1.
 *           The path of the agent is = Product.1/Part.1/Open_body.2/Point.3
 *  &lt;/pre&gt;
 * &lt;/p&gt;
 * &lt;p&gt;The @href #GetValue method returns the path of the required object, in case of mono-selection,
 * whenever the @href #GetListOfValues method returns the list of required objects in case of
 * multi-selection. 
 * &lt;/p&gt;
 * @see CATPathElement
 */
class ExportedByCATDialogEngine CATPathElementAgent : public CATAcquisitionAgent
{
  
  /** @nodoc */
  CATDeclareClass;
  
public:
  
  /**
  * Constructs a path element agent.
  * @param iId
  *   The agent identifier. It is used to retrieve the undo/redo titles in 
  *   the command resource file.
  * @param iType
  *   The type of the expected objects.
  *   The type corresponds to an interface implemented by the object. 
  *   &lt;br&gt;&lt;b&gt;&lt;Legal values&gt;&lt;/b&gt;If it is NULL, all the objects
  *   are accepted.
  *   &lt;br&gt;You can add interfaces with @href #AddElementType or you can specified later
  *   an ordered list thanks to the @href #SetOrderedTypeType method.
  * @param iBehavior
  *   The behavior of the agent.
  *   &lt;br&gt;&lt;b&gt;Legal values&lt;/b&gt;: The behavior is given in the form of a
  *   concatenation of the facet values using the | character.
  *   &lt;br&gt;e.g.: &lt;code&gt;CATDlgEngRepeat|CATDlgEngActive&lt;/code&gt;
  *   &lt;br&gt;If it is NULL, the agent has the default behavior value for each
  *   facet.
  *   &lt;br&gt;The facets specific to this agent are :
  *   &lt;ul&gt;
  *   &lt;li&gt;&lt;b&gt;Highlight&lt;/b&gt;: &lt;tt&gt;CATDlgEngWithoutSO (default)&lt;/tt&gt;,
  *   &lt;tt&gt;CATDlgEngWithPSO&lt;/tt&gt;,
  *   &lt;tt&gt;CATDlgEngWithHSO&lt;/tt&gt;,
  *   or &lt;tt&gt;CATDlgEngWithPSOHSO&lt;/tt&gt;.&lt;/li&gt;
  *   &lt;li&gt;&lt;b&gt;HSO manager&lt;/b&gt;: &lt;tt&gt;CATDlgEngOldHSOManager (default)&lt;/tt&gt;,
  *   or &lt;tt&gt;CATDlgEngNewHSOManager&lt;/tt&gt;.&lt;/li&gt;
  *   &lt;li&gt;&lt;b&gt;Multi acquisition&lt;/b&gt;: &lt;tt&gt;CATDlgEngMonoAcquisition (default)&lt;/tt&gt;,
  *   &lt;tt&gt;CATDlgEngMultiAcquisition&lt;/tt&gt;,
  *   &lt;tt&gt;CATDlgEngMultiAcquisitionCtrl&lt;/tt&gt;,
  *   &lt;tt&gt;CATDlgEngMultiAcquisitionUserCtrl&lt;/tt&gt;,
  *   &lt;tt&gt;CATDlgEngMultiAcquisitionSelModes&lt;/tt&gt; or
  *   &lt;tt&gt;CATDlgEngMultiAcquisitionCtrlNoFeedback&lt;/tt&gt;. &lt;/li&gt;
  *   &lt;li&gt;&lt;b&gt;Deep acquisition&lt;/b&gt;: &lt;tt&gt;CATDlgEngWithoutDeepSel (default)&lt;/tt&gt;,
  *   &lt;tt&gt;CATDlgEngWithDeepSel&lt;/tt&gt;,
  *   or &lt;tt&gt;CATDlgEngWithDeepFirstSel&lt;/tt&gt;.&lt;/li&gt;
  *   &lt;li&gt;&lt;b&gt;Truncation&lt;/b&gt;: &lt;tt&gt;NULL (default)&lt;/tt&gt;,
  *   or &lt;tt&gt;CATDlgEngNoSubPath&lt;/tt&gt;.&lt;/li&gt;
  *   &lt;li&gt;&lt;b&gt;Valuation from CSO&lt;/b&gt;: &lt;tt&gt;CATDlgEngNotValuedFromCSO (default)&lt;/tt&gt;,
  *   or &lt;tt&gt;CATDlgEngValuedFromCSO&lt;/tt&gt;.&lt;/li&gt;
  *   &lt;li&gt;Valuation mode&lt;/b&gt;: &lt;tt&gt;CATDlgEngSimpleValuation (default)&lt;/tt&gt;,
  *   &lt;tt&gt;CATDlgEngWithPrevaluation&lt;/tt&gt;,
  *   &lt;tt&gt;CATDlgEngWithManipulation&lt;/tt&gt;,
  *   &lt;tt&gt;CATDlgEngWithEdit&lt;/tt&gt;,
  *   &lt;tt&gt;CATDlgEngWithContext&lt;/tt&gt;,
  *   or &lt;tt&gt;CATDlgEngWithDrag&lt;/tt&gt;.&lt;/li&gt;
  *   &lt;li&gt;&lt;b&gt;Tooltip&lt;/b&gt;: &lt;tt&gt;CATDlgEngWithoutTooltip (default)&lt;/tt&gt;,
  *   or &lt;tt&gt;CATDlgEngWithTooltip&lt;/tt&gt;.&lt;/li&gt;
  *   &lt;li&gt;&lt;b&gt;User Selection Filter&lt;/b&gt;: &lt;tt&gt;CATDlgEngWithoutUserSelectionFilter (default)&lt;/tt&gt;,
  *   or &lt;tt&gt;CATDlgEngWithUserSelectionFilter&lt;/tt&gt;.&lt;/li&gt;
  *   &lt;/ul&gt;
  *   The behavior may be specified later with the @href CATDialogAgent#SetBehavior 
  *   method.
  */
  CATPathElementAgent (const CATString &amp;iId, 
                       CATClassId iType=NULL, 
                       CATDlgEngBehavior iBehavior=NULL);
  
  virtual ~CATPathElementAgent ();
    /**
  * Requests the CATPathElementAgent delayed destruction.
  * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;: The CATPathElementAgent will be destroyed as soon as this will be possible
  */  
  void RequestDelayedDestruction();

  
  /*---------------------------------*/
  //     TYPE FILTERING 
  /*---------------------------------*/
  
  /**
  * Sets an object type expected by the agent.
  * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;: The type corresponds to an interface implemented by the 
  * object. 
  * &lt;br&gt;This method may be used several times: then the expected objects must
  * implement one of the given interfaces.
  * &lt;br&gt;However this method cancels any previous use of @href 
  * #SetOrderedTypeList which is an incompatible method.
  * &lt;br&gt;By using a non-ordered type list, for each object in the selection path
  * the agent checks whether it adheres to one of the types until it founds one.
  * @param iTypeIID
  *   It is the identifier of an interface that the expected objects
  *   must implement.
  * @see #SetOrderedTypeList
  */
  void AddElementType (const IID &amp; iTypeIID);

  /** @nodoc */
  void AddElementType (CATClassId iTypeClassId);
  /** @nodoc */
  void SetElementType (const IID &amp; iTypeIID);
  /** @nodoc */
  void SetElementType (CATClassId iTypeClassId);
  
  /**
  * Sets an ordered list of object types expected by the agent.
  * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;: A type corresponds to an interface implemented by the 
  * object. 
  * &lt;br&gt;This method may give several types: then the expected objects must implement
  * one of the given interfaces.
  * &lt;br&gt;Since an agent has only one ordered type list,
  * successive calls to &lt;tt&gt;SetOrderedTypeList&lt;/tt&gt; for the same agent
  * successively overwrite the list.
  * Moreover this method cancels any previous use of @href #AddElementType 
  * which is an incompatible method.
  * &lt;br&gt;By using an ordered type list, for each type in the list
  * the agent checks whether an object in the selection path adheres to it
  * until it founds one.
  * @param iOrderedTypeList
  *   The ordered type list.
  * @see #AddElementType
  */
  void SetOrderedTypeList (const CATListOfCATString &amp; iOrderedTypeList);
  
  /** 
  * @nodoc 
  * Adds a type in the ordered type list
  */
  void AddOrderedElementType (CATClassId iTypeClassId);
  /** 
  * @nodoc 
  * Resets list + AddOrderedElementType
  */
  void SetOrderedElementType (CATClassId iTypeClassId); 
  
  /**
  * Returns the ordered list of object types expected by the agent.
  * @return
  *   The ordered type list.
  * @see #SetOrderedTypeList
  */
  CATListOfCATString &amp; GetOrderedTypeList () const;

  /**
  * Returns the count of object types expected by the agent.
  * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;: The count of element types ranges from 1 to n
  * if one or more (ordered or not) types are expected, 0 otherwise.
  */
  int GetElementTypeSize ();
  
  /**
  * Returns an object type from those expected by the agent
  * by using the object type index.
  * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;: This method returns the &lt;tt&gt;iIndex&lt;/tt&gt;th object type
  * from those (ordered or not) expected by the dialog agent,
  * that is set using the @href #AddElementType or @href #SetOrderedTypeList methods.
  * @param iIndex
  *   The index of the object type .
  *   &lt;br&gt;&lt;b&gt;Legal values&lt;/b&gt;: &lt;tt&gt;iIndex&lt;/tt&gt; range starts with 1, which 
  *   is the default.
  *   Use @href #GetElementTypeSize to get the object type count.
  */
  CATClassId GetElementType (int iIndex=1);
  
  /*---------------------------------*/
  //     VALUE 
  /*---------------------------------*/
  
  /**
  * Returns the agent value.
  * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;: The value is the path of the selected object. 
  * &lt;br&gt;If no type has been specified, the returned path contains all the 
  * objects from the the root object to the selected object. Otherwise, with 
  * a type query, if the selected object is a child of the required object, 
  * the returned path is a subpath, that is a path that begins with the root
  * object and truncated with the first object matching the requested type.
  * &lt;br&gt;Moreover, the returned value depends on the @href 
  * CATAcquisitionAgent#ValuationState.
  * Indeed, if the agent valuation state is &lt;tt&gt;Valuated&lt;/tt&gt;, the 
  * &lt;tt&gt;GetValue&lt;/tt&gt; method returns the real value; but if the agent 
  * valuation state is &lt;tt&gt;PreValuated&lt;/tt&gt;, the &lt;tt&gt;GetValue&lt;/tt&gt; method 
  * returns the prevalue even if the agent has got a value. 
  * @see #AddElementType, #SetOrderedTypeList
  * @return
  *   The value.
  *   &lt;br&gt;&lt;b&gt;Lifecycle rules deviation&lt;/b&gt;: This method doesn&#x27;t AddRef the 
  *   returned value.
  */
  virtual CATPathElement * GetValue ();
  
  /**
  * Sets the agent value.
  * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;: The value is a path object.
  * &lt;br&gt;This method does not register an undo step.
  * &lt;br&gt;&lt;b&gt;Postcondition&lt;/b&gt;: Use the @href CATAcquisitionAgent#SetValuation
  * method to make the agent accept the value, otherwise this value is not
  * taken into account.
  * @param iValue
  *   The value.
  *   &lt;br&gt;&lt;b&gt;Cyclic reference&lt;/b&gt;: A copy of &lt;tt&gt;iValue&lt;/tt&gt; is kept and  
  *   AddRef&#x27;ed. It is Released in the agent destructor.
  */
  virtual void SetValue (CATPathElement * iValue );
  
  /**
  * Returns the agent list of values.
  * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;: This method is usable only on MultiAcquisition objects, 
  * otherwise use the @href #GetValue method.
  * &lt;br&gt;Moreover, the returned list depends on the @href 
  * CATAcquisitionAgent#ValuationState.
  * Indeed, if the agent valuation state is &lt;tt&gt;Valuated&lt;/tt&gt;, the 
  * &lt;tt&gt;GetListofValues&lt;/tt&gt; method returns the real list of values; but if
  * the agent valuation state is &lt;tt&gt;PreValuated&lt;/tt&gt;, the 
  * &lt;tt&gt;GetListOfValues&lt;/tt&gt; method returns the list of prevalues even if
  * the agent has got values. 
  * @return
  *   The list of values.
  *   &lt;br&gt;&lt;b&gt;Lifecycle rules deviation&lt;/b&gt;: This method doesn&#x27;t AddRef the 
  *   returned list.
  */
  virtual CATSO * GetListOfValues ();
  
  /**
  * Sets the agent list of values.
  * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;: This method is usable only on MultiAcquisition objects,
  * otherwise use the @href #SetValue method.
  * &lt;br&gt;This method does not register an undo step.
  * &lt;br&gt;&lt;b&gt;Postcondition&lt;/b&gt;: Use the @href CATAcquisitionAgent#SetValuation
  * method to make the agent accept the value list, otherwise this list is not
  * taken into account.
  * @param iList
  *   The list of values.
  *   &lt;br&gt;&lt;b&gt;Cyclic reference&lt;/b&gt;: A copy of &lt;tt&gt;iList&lt;/tt&gt; is kept and 
  *   AddRef&#x27;ed. It is Released in the agent destructor.
  */
  virtual void SetListOfValues (CATSO * iList);
  
  /**
  * Returns the selected object.
  * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;: The returned value is the required object that is the first  
  * matching the requested type. In otherwords, it is the leaf of the path 
  * returned by the @href #GetValue method. 
  * &lt;br&gt;Moreover, the returned value depends on the @href 
  * CATAcquisitionAgent#ValuationState.
  * Indeed, if the agent valuation state is &lt;tt&gt;Valuated&lt;/tt&gt;, the 
  * &lt;tt&gt;GetElementValue&lt;/tt&gt; method returns the real value; but if the agent 
  * valuation state is &lt;tt&gt;PreValuated&lt;/tt&gt;, the &lt;tt&gt;GetElementValue&lt;/tt&gt; method 
  * returns the prevalue even if the agent has got a value.  
  * @return
  *   The selected object.
  *   &lt;br&gt;If the behavior of the agent 
  * ( @href CATDlgEngBehavior ) is not &lt;tt&gt;CATDlgEngMonoAcquisition&lt;/tt&gt;, in 
  * other words in case of multi-selection, the 
  *   returned value is NULL.
  *   &lt;br&gt;&lt;b&gt;Lifecycle rules deviation&lt;/b&gt;: This method doesn&#x27;t AddRef the 
  *   returned value.
  */
  virtual CATBaseUnknown * GetElementValue ();
  
  /** @nodoc */
  virtual CATClassId GetValueType();
  
  /**
  * Returns whether the shift and control keys have been pushed during 
  * the selection.
  * @return
  *   The key use.
  *   &lt;br&gt;&lt;b&gt;Legal values&lt;/b&gt;: Use the defined values to decode the returned
  *   integer:
  *   &lt;ul&gt;
  *   &lt;li&gt;&lt;tt&gt;ShiftModifierOn&lt;/tt&gt;&lt;/li&gt;
  *   &lt;li&gt;&lt;tt&gt;ControlModifierOn&lt;/tt&gt;&lt;/li&gt;
  *   &lt;/ul&gt;
  *   &lt;pre&gt;
  *   e.g.
  *   #include &quot;CATDeviceEvent.h&quot;
  *   ...
  *   if (Agent-&gt;GetModifier() &amp; ControlModifierOn)
  *   ...
  *   &lt;/pre&gt;
  */
  virtual int GetModifier ();
  
  /*---------------------------------*/
  //     TOOLTIP MESSAGE
  /*---------------------------------*/
  
  /**
  * Adds a message to the tooltip displayed over the selected object.
  * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;: This method enables to add a specific message
  * to the tooltip in addition to the path of the selected object. However, this
  * method is useless if the behavior of the agent ( @href CATDlgEngBehavior ) 
  * is &lt;tt&gt;CATDlgEngWithoutTooltip&lt;/tt&gt;. 
  * @param iMsg
  *   The message to display
  * @param iPath
  *   The path object to display.
  *   This is to be used only if the preselection contains several objects.
  *   &lt;br&gt;If it is NULL, the current path under the mouse is displayed.
  */
  virtual void SetMessage (const CATUnicodeString iMsg,
                           const CATPathElement * iPath=NULL);
  
  /*---------------------------------*/
  //     CURSOR
  /*---------------------------------*/
  
  /**
  * Sets a customized &quot;No Selection&quot; cursor.
  * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;: This method enables to display a cursor different
  * from the standard &quot;No Selection&quot; one.
  * @param iCursor
  *   The cursor.
  *   Use @href CATDialog#DefineCursor to define the new cursor.
  */
  void SetNoSelectionCursor (CATDialog::CATDlgHCursor iCursor);

  /**
  * Resets the customized &quot;No Selection&quot; cursor.
  * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;: This method cancels previous uses of @href #SetNoSelectionCursor.
  */
  void ResetNoSelectionCursor ();
  
  /**
  * Sets a customized &quot;Preselection&quot; cursor.
  * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;: This method enables to display a cursor different
  * from the standard &quot;Preselection&quot; one.
  * @param iCursor
  *   The cursor.
  *   Use @href CATDialog#DefineCursor to define the new cursor.
  */
  void SetPreselectionCursor (CATDialog::CATDlgHCursor iCursor);

  /**
  * Resets the customized &quot;Preselection&quot; cursor.
  * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;: This method cancels previous uses of @href #SetPreselectionCursor.
  */
  void ResetPreselectionCursor ();
  
  
  /*---------------------------------*/
  //     INTERNAL METHODS 
  /*---------------------------------*/
  
  /*---------------------------------*/
  /* Decode management               */
  /*---------------------------------*/
  
  /** 
  * @nodoc 
  * Override this method to check the path(es) consistency in decode process
  * BEFORE GetSubPath (path troncature).
  */
  virtual CATPathElement * PrecheckPath (CATPathElement *PathToCheck);
  
  /** 
  * @nodoc 
  * Override this method to check the path(es) consistency in decode process
  * AFTER GetSubPath (path troncature).
  */
  virtual CATPathElement * CheckPath (CATPathElement *PathToCheck, int ElementTypeListPosition);
  
  /** 
  * @nodoc 
  * Do not override DecodeNotification, use PrecheckPath and/or CheckPath.
  */
  virtual void * DecodeNotification (CATCommand* from, CATNotification * notif);

  /** 
  * @nodoc 
  * Internal use only.
  */
  void NoSoDuplication ();
  
  /*---------------------------------*/
  /* Undo and Redo management        */
  /*---------------------------------*/
  
  /** @nodoc */
  virtual void * UndoValue ();
  /** @nodoc */
  virtual void * RedoValue ();

  /** @nodoc */
  virtual void InitializeValue();
  /** 
  * @nodoc 
  * Override this method to process the path(es) in StoreValue step
  */
  virtual CATPathElement * ProcessPath (CATPathElement *PathToProcess, int ElementTypeListPosition);
  
  /** 
  * @nodoc 
  * Do not override StoreValue, use ProcessPath.
  */
  virtual void  StoreValue ();
  /** @nodoc */
  virtual void  ResetValue ();
  
  /*---------------------------------*/
  /* CSO Management                  */
  /*---------------------------------*/
  
  /** @nodoc */
  virtual void PutIntoPSO ();
  /** @nodoc */
  virtual CATBoolean UpdatePSO ();
  /** @nodoc */
  virtual void RemoveFromPSO ();
  /** @nodoc */
  virtual void PutIntoHSO ();
  /** @nodoc */
  virtual void RemoveFromHSO ();
  
  /** @nodoc */
  virtual CATStatusChangeRC Activate (CATCommand * FromClient,
                                      CATNotification * EvtDat);
  /** @nodoc */
  virtual CATStatusChangeRC Desactivate (CATCommand * FromClient,
                                         CATNotification * EvtDat);
  /** @nodoc */
  virtual CATStatusChangeRC Cancel (CATCommand * FromClient,
                                    CATNotification * EvtDat);
  /** @nodoc */
  friend class CATEDegCmdDbgAgent;
  
protected:
  
  /*------------------*/
  // internal methods 
  /*------------------*/
  // internal parts of decoding. These 2 methods are used by
  // DecodeNotification and by derived classes.
  // Decoding a multi result selection (some paths are removed)
  virtual CATSO * DecodeSO (CATSO *so);
  // Decoding a single selection
  virtual CATPathElement * DecodePath (CATPathElement *result, CATString &amp; EltType, int *TypePos = NULL);
  // CTRL key management for multi-selection
  void CtrlManagement (CATBaseUnknown *);

  void DisplayMessage (CATPathElement * iPath);
  CATUnicodeString DisplayName (const CATPathElement * iPath,
                                const int iNbElem=3);
  
  /*---------------------------------*/
  /* Class Filter                    */
  /*---------------------------------*/
  
  /** @nodoc */
  void GiveAgentClassesCB (CATCallbackEvent  iEvt,
                           void             *from,
                           CATNotification  *iNotif,
                           CATSubscriberData iDonnees, 
                           CATCallback       iIdCbk);
  /** @nodoc */
  void ChangeFilteredClassesCB (CATCallbackEvent  iEvt,
                                void             *from,
                                CATNotification  *iNotif,
                                CATSubscriberData iDonnees, 
                                CATCallback       iIdCbk);

  /** @nodoc */
  int GetFilteredElementTypeSize ();
  
  /** @nodoc */
  CATClassId GetFilteredElementType (int iIndex=1);
  
  /** @nodoc */
  CATBoolean IsFirstInProcessGroup() const;

  /** @nodoc */
  CATBoolean IsLastInProcessGroup() const;

  /** @nodoc */
  unsigned int GetNbPathsInProcessGroup() const;

  /** @nodoc */
  void SetNbPathsInProcessGroup(int iNbPaths);

  /** @nodoc */
  void SetPathIndexInProcessGroup(int iPathIndex);

  /** @nodoc */
  void UnsetProcessGroup();

  /*------------------*/
  // internal data 
  /*------------------*/
  CATListOfCATString * _TypeList;
  CATListOfCATString * _FilteredTypeList;
  CATListOfCATString * _OrderedTypeList;
  CATListOfCATString * _FilteredOrderedTypeList;
  int                  _HasCustomFilter;
  CATPathElement     * _value;    
  CATPathElement     * _preValue;  
  CATPathElement     * _tempValue;    
  CATBaseUnknown     * _ElementValue;    
  CATSO              * _SO;
  CATSO              * _preSO;
  CATSO              * _tempSO;
  int                  _modifier;
  int                  _tempModifier;
  CATString            _Type;
  CATString            _tempType;
  int                  _IncompatibleFilter;
  CATClassFilter  *    _classFilter;
  
  int                  _currentValueInd;
  CATLISTP (CATBaseUnknown) _valueStack;
  CATListOfInt         _modifierStack;
  CATListOfInt         _ListPos;
  CATListOfCATString   _TypeStack;

  static CATLISTP (CATBaseUnknown) _agentList;
  static int _goodCursorAlreadySet;
  CATDialog::CATDlgHCursor _noSelectionCursor;
  CATDialog::CATDlgHCursor _preselectionCursor;
  
  int _NoSoDuplication;
  int _ctrl;
  CATSO *_ctrlSO;

  CATUnicodeString  _Message;
  int               _ShortHelpOn;
  CATRepShortHelp * _ShortHelp;

  unsigned int      _NbPathsInProcessGroup;
  unsigned int      _PathIndexInProcessGroup;  // 0 or &gt;=1 and &lt;=_NbPathsInProcessGroup


  /** @nodoc */
  static const CATPathElement _emptyPathElement;

private:

  //Reset the cursor for the current viewer
  void ResetCurrentViewerCursor();

  // &quot;Control&quot; mode
  void UICB (CATCommand * iFrom, CATNotification * iNotif,
             CATCommandClientData iData);
  CATMultiSelectionAgentUI * _agentUI;
  CATBoolean _waitingForEnd;
  CATSO * _valuatedSO;

  // User Selection Filter
  void DispatchActivity (CATFrmLayout * iLayout,
                         int            iActivity);
  void UpdateTypeList (CATCallbackEvent   iPublishedEvent,
                       void             * iPublishingObject,
                       CATNotification  * iNotification,
                       CATSubscriberData  iClientData,
                       CATCallback        iCallback);
  void UpdateType (int                  iActivity,
                   CATListOfCATString * iTypeList,
                   CATListOfCATString * iChangeList,
                   CATListOfCATString * iFilteredList);
  CATCallback _TypeCB;


  // NOT implemented, only declared to prevent unexpected call to default ctors created by the compiler
  CATPathElementAgent ();

};

#endif
</div>
    
    <div class="navigation">
        <div><a href="CATPanelState.html">‚Üê ‰∏ä‰∏ÄÈ°µ: CATPanelState.h</a></div>
        <div><a href="CATStateActivateNotification.html">‰∏ã‰∏ÄÈ°µ: CATStateActivateNotification.h ‚Üí</a></div>
    </div>
</body>
</html>