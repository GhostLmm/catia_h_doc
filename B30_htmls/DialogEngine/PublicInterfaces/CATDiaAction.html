<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DialogEngine/PublicInterfaces/CATDiaAction.h</title>
    <style>
        body {
            font-family: 'Consolas', 'Monaco', monospace;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .header {
            background-color: #2c3e50;
            color: white;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .navigation {
            display: flex;
            justify-content: space-between;
            margin: 15px 0;
            padding: 10px;
            background-color: #ecf0f1;
            border-radius: 5px;
        }
        .navigation a {
            color: #2980b9;
            text-decoration: none;
            padding: 5px 10px;
            background-color: white;
            border-radius: 3px;
            border: 1px solid #bdc3c7;
        }
        .navigation a:hover {
            background-color: #3498db;
            color: white;
        }
        .content {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            border: 1px solid #bdc3c7;
            white-space: pre-wrap;
            font-size: 14px;
            line-height: 1.4;
            overflow-x: auto;
        }
        .back-to-index {
            text-align: center;
            margin: 15px 0;
        }
        .back-to-index a {
            color: #27ae60;
            text-decoration: none;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>DialogEngine/PublicInterfaces/CATDiaAction.h</h1>
    </div>
    
    <div class="navigation">
        <div><a href="CATCustomizableTransition.html">‚Üê ‰∏ä‰∏ÄÈ°µ: CATCustomizableTransition.h</a></div>
        <div><a href="CATDiaError.html">‰∏ã‰∏ÄÈ°µ: CATDiaError.h ‚Üí</a></div>
    </div>
    
    <div class="back-to-index">
        <a href="index.html">üìÅ ËøîÂõûÁõÆÂΩï</a>
    </div>
    
    <div class="content">#ifndef CATDiaAction_h
#define CATDiaAction_h
#include &quot;CATDialogEngine.h&quot;

// COPYRIGHT DASSAULT SYSTEMES 1999
// protected DI0STATE.m

/**
 * @CAA2Level L1
 * @CAA2Usage U2
 */

#include &quot;CATBaseUnknown.h&quot;
#include &quot;CATString.h&quot;
#include &quot;CATDialogAgent.h&quot;
#include &quot;CATBooleanDef.h&quot;

class CATDiaActionEngine;
class CATICmdAction;
class CATCommand;

 /**
  * Prototype of the action methods.
  * &lt;b&gt;Role&lt;/b&gt;: These methods are passed as parameters of the @href 
  * CATDiaAction class methods.
  * @param iData
  *   The data specified by the @href CATDiaAction#SetData method.
  * @return 
  *   The CATBoolean value used to combine actions.
  *   In an OrAction, the second action is executed only if the first
  *   action returns TRUE.
  */
typedef CATBoolean (CATCommand::*ActionMethod)(void * iData);

/**
 * Base class to create a command action.
 * &lt;b&gt;Role&lt;/b&gt;: An action is a task without interaction with the end user.
 * An action may be
 * &lt;ul&gt;
 * &lt;li&gt;linked to a transition. In this case, the action is executed when the
 *  transition fires. &lt;/li&gt;
 * &lt;li&gt;a state entry action. In this case, the action is executed when 
 * entering the state. &lt;/li&gt;
 * &lt;li&gt;a state exit action. In this case, the action is executed when 
 * leaving the state. &lt;/li&gt;
 * &lt;/ul&gt;
 * Moreover, a &lt;tt&gt;CATDiaAction&lt;/tt&gt; object manages the action undo/redo. 
 * But, it must only undo/redo not transactional objects, that is to say 
 * the objects which don&#x27;t belong to a model which implements the 
 * CATIUndoTransaction interface, because such a model undoes and redoes 
 * its objects itself.
 * &lt;br&gt;To create an action, you can derive this class and override the methods:
 * &lt;ul&gt;
 * &lt;li&gt;@href #Do &lt;/li&gt;
 * &lt;li&gt;@href #BeforeUndo &lt;/li&gt;
 * &lt;li&gt;@href #AfterUndo &lt;/li&gt;
 * &lt;li&gt;@href #BeforeRedo &lt;/li&gt;
 * &lt;li&gt;@href #AfterRedo &lt;/li&gt;
 * &lt;/ul&gt;
 * or use the @href CATStateCommand#Action method and give as arguments 
 * the addresses of methods to execute the action.  
 * &lt;br&gt;Actions must be created in the @href CATStateCommand#BuildGraph method.
 * @see CATDialogState, CATDialogTransition
 */

class ExportedByCATDialogEngine CATDiaAction : public CATBaseUnknown
{
  
  /** @nodoc  */
  CATDeclareClass;
  
public:
  
  /** @nodoc  */
  enum ActionType { ACTION, METHOD, AND, OR, DegMETH, INTERFACE};
  
  /**
  * Constructs an action.
  * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;: Use it only when deriving the &lt;tt&gt;CATDiaAction&lt;/tt&gt; 
  * class, otherwise use the @href CATStateCommand#Action method to create an
  * action.
  * @param iName
  *   The name of the action. May be useful for debug.
  */
  CATDiaAction (const CATString &amp;iName);
  
  virtual ~CATDiaAction ();
  
  /*--------------------------------------------*/
  //  methods to give data and method addresses
  /*--------------------------------------------*/
  
  /**
  * Sets the method to undo the action before the transactional undo.
  * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;: This method must be a method of the CATStateCommand 
  * object which defines the statechart.
  * &lt;br&gt;Do not use &lt;tt&gt;SetBeforeUndoMethod&lt;/tt&gt; if you derive the 
  * &lt;tt&gt;CATDiaAction&lt;/tt&gt; class.
  * @param iMeth
  *   The method which undoes the action.
  */
  virtual void SetBeforeUndoMethod (ActionMethod iMeth);
  
  /**
  * Sets the method to redo the action before the transactional redo.
  * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;: This method must be a method of the CATStateCommand 
  * object which defines the statechart.
  * &lt;br&gt;Do not use &lt;tt&gt;SetBeforeRedoMethod&lt;/tt&gt; if you derive the 
  * &lt;tt&gt;CATDiaAction&lt;/tt&gt; class.
  * @param iMeth
  *   The method which redoes the action.
  */
  virtual void SetBeforeRedoMethod (ActionMethod iMeth);
  
  /**
  * Sets the method to undo the action after the transactional undo.
  * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;: This method must be a method of the CATStateCommand 
  * object which defines the statechart.
  * &lt;br&gt;Do not use &lt;tt&gt;SetAfterUndoMethod&lt;/tt&gt; if you derive the 
  * &lt;tt&gt;CATDiaAction&lt;/tt&gt; class.
  * @param iMeth
  *   The method which undoes the action.
  */
  virtual void SetAfterUndoMethod (ActionMethod iMeth);
  
  /**
  * Sets the method to redo the action after the transactional redo.
  * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;: This method must be a method of the CATStateCommand 
  * object which defines the statechart.
  * &lt;br&gt;Do not use &lt;tt&gt;SetAfterRedoMethod&lt;/tt&gt; if you derive the 
  * &lt;tt&gt;CATDiaAction&lt;/tt&gt; class.
  * @param iMeth
  *   The method which redoes the action.
  */
  virtual void SetAfterRedoMethod (ActionMethod iMeth);
  
  /**
  * Sets the method to execute the action.
  * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;: This method must be a method of the CATStateCommand 
  * object which defines the statechart.
  * &lt;br&gt;Do not use &lt;tt&gt;SetExecuteMethod&lt;/tt&gt; if you derive the 
  * &lt;tt&gt;CATDiaAction&lt;/tt&gt; class.
  * @param iMeth
  *   The method which does the action.
  */
  virtual void SetExecuteMethod (ActionMethod iMeth);
  
  /**
  * Sets data which may be useful to execute or undo/redo the action.
  * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;: This data will be given as the argument of the 
  * &lt;tt&gt;ActionMethod&lt;/tt&gt; methods.
  * @param iData
  *   An object that can be useful for the action.
  *   &lt;br&gt;&lt;b&gt;Warning&lt;/b&gt;: A copy of &lt;tt&gt;iData&lt;/tt&gt; is kept. 
  *   Deallocate this object only at the end of the command.
  */
  virtual void SetData (void * iData);
  
  /*------------------------------------------------------*/
  // methods to be derived to program the action behavior 
  /*------------------------------------------------------*/
  
  /**
  * Executes the action.
  * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;: Redefine this method when deriving &lt;tt&gt;CATDiaAction&lt;/tt&gt;.
  * @param iData
  *   The data specified by the @href #SetData method.
  * @return 
  *   The CATBoolean value used to combine actions.
  *   In an OrAction, the second action is executed only if the first
  *   action returns TRUE.
  */
  virtual CATBoolean Do (void * iData=NULL);
  
  /**
  * Undoes the action effects before the transactional undo.
  * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;: Redefine this method when deriving &lt;tt&gt;CATDiaAction&lt;/tt&gt;.
  * @param iData
  *   The data specified by the @href #SetData method.
  * @return 
  *   The CATBoolean value used to combine actions.
  *   In an OrAction, if the second action is executed only if the first
  *   action returns TRUE.
  */
  virtual CATBoolean BeforeUndo (void * iData=NULL);
  
  /**
  * Redoes the action effects before the transactional redo.
  * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;: Redefine this method when deriving &lt;tt&gt;CATDiaAction&lt;/tt&gt;.
  * @param iData
  *   The data specified by the @href #SetData method.
  * @return 
  *   The CATBoolean value used to combine actions.
  *   In an OrAction, the second action is executed only if the first
  *   action returns TRUE.
  */
  virtual CATBoolean BeforeRedo (void * iData=NULL);
  
  /**
  * Undoes the action effects after the transactional undo.
  * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;: Redefine this method when deriving &lt;tt&gt;CATDiaAction&lt;/tt&gt;.
  * @param iData
  *   The data specified by the @href #SetData method.
  * @return 
  *   The CATBoolean value used to combine actions.
  *   In an OrAction, the second action is executed only if the first
  *   action returns TRUE.
  */
  virtual CATBoolean AfterUndo (void * iData=NULL);
  
  /**
  * Redoes the action effects after the transactional redo.
  * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;: Redefine this method when deriving &lt;tt&gt;CATDiaAction&lt;/tt&gt;.
  * @param iData
  *   The data specified by the @href #SetData method.
  * @return 
  *   The CATBoolean value used to combine actions.
  *   In an OrAction, the second action is executed only if the first
  *   action returns TRUE.
  */
  virtual CATBoolean AfterRedo (void * iData=NULL);
  
  /*---------------------------------*/
  //  constructors FOR INTERNAL USE  
  /*---------------------------------*/
  
  /** @nodoc */
  CATDiaAction (int impl);
  /** @nodoc */
  CATDiaAction (CATDiaAction &amp;);
  /** @nodoc */
  CATDiaAction (ActionType, CATDiaAction * act1, CATDiaAction * act2);
  /** @nodoc */
  CATDiaAction (CATICmdAction * interfac);
  /** @nodoc */
  CATDiaAction (CATCommand *, ActionMethod execute=NULL, ActionMethod undo=NULL,
                              ActionMethod reset=NULL, void * data=NULL);
  
  /*---------------------------------*/
  //  methods FOR INTERNAL USE  
  /*---------------------------------*/
  
  /** @nodoc */
  CATString &amp; GetName ();
  /** @nodoc */
  void SetName (const CATString &amp; name);
  
  /** @nodoc */
  CATDiaActionEngine * GetLetterObject ();
  /** @nodoc */
  HRESULT QueryCATICmdAction (CATICmdAction ** oAction);
  
  /** @nodoc */
  void ReleaseComponents (); 
  
  /*---------------------------------------------*/
  //  obsolete methods. Do not use it any more 
  /*---------------------------------------------*/
  
  /**
  * @nodoc 
  *  for perfos, declares when an action has no undo but it&#x27;s obsolete.
  */
  void DeclareNoUndo ();
  
  /** @nodoc */
  virtual CATBoolean Execute ();
  /** @nodoc */
  virtual CATBoolean Undo ();
  /** @nodoc */
  virtual CATBoolean Redo ();
  
protected:
  
  /*------------------*/
  // internal data 
  /*------------------*/
  
  /** @nodoc */
  CATDiaActionEngine * _Implement;

private:

  // NOT implemented, only declared to prevent unexpected call to default ctors created by the compiler
  CATDiaAction &amp; operator= (const CATDiaAction &amp;);

};

#endif
</div>
    
    <div class="navigation">
        <div><a href="CATCustomizableTransition.html">‚Üê ‰∏ä‰∏ÄÈ°µ: CATCustomizableTransition.h</a></div>
        <div><a href="CATDiaError.html">‰∏ã‰∏ÄÈ°µ: CATDiaError.h ‚Üí</a></div>
    </div>
</body>
</html>