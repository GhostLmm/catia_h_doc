<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DialogEngine/PublicInterfaces/CATDialogState.h</title>
    <style>
        body {
            font-family: 'Consolas', 'Monaco', monospace;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .header {
            background-color: #2c3e50;
            color: white;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .navigation {
            display: flex;
            justify-content: space-between;
            margin: 15px 0;
            padding: 10px;
            background-color: #ecf0f1;
            border-radius: 5px;
        }
        .navigation a {
            color: #2980b9;
            text-decoration: none;
            padding: 5px 10px;
            background-color: white;
            border-radius: 3px;
            border: 1px solid #bdc3c7;
        }
        .navigation a:hover {
            background-color: #3498db;
            color: white;
        }
        .content {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            border: 1px solid #bdc3c7;
            white-space: pre-wrap;
            font-size: 14px;
            line-height: 1.4;
            overflow-x: auto;
        }
        .back-to-index {
            text-align: center;
            margin: 15px 0;
        }
        .back-to-index a {
            color: #27ae60;
            text-decoration: none;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>DialogEngine/PublicInterfaces/CATDialogState.h</h1>
    </div>
    
    <div class="navigation">
        <div><a href="CATDialogEngine.html">‚Üê ‰∏ä‰∏ÄÈ°µ: CATDialogEngine.h</a></div>
        <div><a href="CATDialogTransition.html">‰∏ã‰∏ÄÈ°µ: CATDialogTransition.h ‚Üí</a></div>
    </div>
    
    <div class="back-to-index">
        <a href="index.html">üìÅ ËøîÂõûÁõÆÂΩï</a>
    </div>
    
    <div class="content">#ifndef CATDialogState_H
#define CATDialogState_H
#include &quot;CATDialogEngine.h&quot;

// COPYRIGHT DASSAULT SYSTEMES 1999
// protected DI0STATE.m

/**
 * @CAA2Level L1
 * @CAA2Usage U1
 */

#include &quot;CATBaseUnknown.h&quot;
#include &quot;CATListOfCATCommand.h&quot;
#include &quot;CATUnicodeString.h&quot;
#include &quot;CATString.h&quot;
#include &quot;CATStateCondition.h&quot;

class CATCommand;
class CATDiaAction;

/**
 * Class to create a command state.
 * &lt;b&gt;Role&lt;/b&gt;: A state is one of the main elements of a state dialog command
 * which is a state machine that uses states to let the end user input the
 * requested parameters, and transitions between states to process these input
 * parameters and progress in the statechart.
 * &lt;br&gt;Do not use the &lt;tt&gt;CATDialogState&lt;/tt&gt; constructor to create a state 
 * but the @href CATStateCommand#GetInitialState and @href 
 * CATStateCommand#AddDialogState methods.
 * &lt;br&gt;A state can contain several dialog agents and may be associated with an 
 * exit condition, an entry action and an exit action.
 * &lt;br&gt;States must be created in the @href CATStateCommand#BuildGraph method.
 * @see CATStateCondition, CATDiaAction, CATDialogAgent
 */

class ExportedByCATDialogEngine CATDialogState:public CATBaseUnknown
{
  
  /** @nodoc */
  CATDeclareClass;
  
public:
  
  /** @nodoc */
  CATDialogState ();
  
  virtual ~CATDialogState ();
  
  /*-------------------------*/
  //     AGENTS
  /*-------------------------*/     
  
  /**
  * Adds a dialog agent in the state.
  * @param iAgent
  *   The agent to add.
  *   &lt;br&gt;&lt;b&gt;Cyclic reference&lt;/b&gt;: A copy of &lt;tt&gt;iAgent&lt;/tt&gt; is kept and
  *   AddRef&#x27;ed. It is Released at the end of the command before the command
  *   destructor call or when the agent is removed.
  */
  virtual void AddDialogAgent (CATCommand * iAgent);
  
  /**
  * Removes a dialog agent in the state.
  * @param iAgent
  *   The agent to remove.
  */
  void RemoveDialogAgent (CATCommand * iAgent);
  
  /**
  * Returns the count of agents in the state.
  * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;: The count of agents ranges from 1 to n.
  * @return
  *   The agent count.
  */
  int GetDialogAgentSize () const;
  
  /**
  * Returns an state agent using the agent index.
  * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;: This method returns the &lt;tt&gt;iIndex&lt;/tt&gt;th agent.
  * @param iIndex
  *   The agent index.
  *   &lt;br&gt;&lt;b&gt;Legal values&lt;/b&gt;: &lt;tt&gt;iIndex&lt;/tt&gt; range starts with 1, which is 
  *   the default.
  *   Use @href #GetDialogAgentSize to get the state agent count.
  * @return
  *   The agent.
  *   &lt;br&gt;&lt;b&gt;Lifecycle rules deviation&lt;/b&gt;: This method doesn&#x27;t AddRef the 
  *   returned value.
  */
  CATCommand * GetDialogAgent (int iIndex) const;
  
  
  /*-------------------------*/
  //     CONDITIONS
  /*-------------------------*/     
  
  /**
  * Sets the exit condition.
  * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;: This condition must evaluate TRUE to trigger a 
  * transition. 
  * &lt;br&gt;Since a state has only one exit condition, successive calls to 
  * &lt;tt&gt;SetLeaveCondition&lt;/tt&gt; for the same state successively overwrite the 
  * condition.
  * @param iCond
  *   The exit condition.
  *   &lt;br&gt;&lt;b&gt;Cyclic reference&lt;/b&gt;: A copy of &lt;tt&gt;iCond&lt;/tt&gt; is kept and
  *   AddRef&#x27;ed. It is Released at the end of the command before the command
  *   destructor call.
  *   &lt;br&gt;&lt;b&gt;Legal values&lt;/b&gt;: &lt;tt&gt;iCond&lt;/tt&gt; may be set to NULL to cancel 
  *   a condition inherited from the command base class. 
  */
  virtual void SetLeaveCondition (CATStateCondition * iCond);
  
  /**
  * Returns the exit condition.
  * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;: This condition must evaluate TRUE to trigger a
  * transition. 
  * @return 
  *   The exit condition.
  *   &lt;br&gt;&lt;b&gt;Lifecycle rules deviation&lt;/b&gt;: This method doesn&#x27;t AddRef the 
  *   returned value.
  */
  virtual CATStateCondition * GetLeaveCondition () const;
  
  
  /*-------------------------*/
  //     ACTIONS
  /*-------------------------*/     
  
  /**
  * Sets the exit action.
  * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;: This action is executed when a transition leaves the
  * state if it is not a self-transition.
  * &lt;br&gt;Since a state has only one exit action, successive calls to 
  * &lt;tt&gt;SetLeaveAction&lt;/tt&gt; for the same state successively overwrite the 
  * action.
  * @param iAction
  *   The exit action.
  *   &lt;br&gt;&lt;b&gt;Cyclic reference&lt;/b&gt;: A copy of &lt;tt&gt;iAction&lt;/tt&gt; is kept and 
  *   AddRef&#x27;ed. It is Released at the end of the command before the command
  *   destructor call.
  *   &lt;br&gt;&lt;b&gt;Legal values&lt;/b&gt;: &lt;tt&gt;iAction&lt;/tt&gt; may be set to NULL to cancel 
  *   an action inherited from the command base class. 
  */
  virtual void SetLeaveAction (CATDiaAction * iAction);
  
  /**
  * Returns the exit action.
  * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;: This action is executed when a transition leaves the 
  * state if it is not a self-transition.
  * @return
  *   The exit action.
  *   &lt;br&gt;&lt;b&gt;Lifecycle rules deviation&lt;/b&gt;: This method doesn&#x27;t AddRef the 
  *   returned value.
  */
  virtual CATDiaAction * GetLeaveAction () const; 
  
  /**
  * Sets the entry action.
  * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;: This action is executed when entering the state without 
  * using a self-transition.
  * &lt;br&gt;Since a state has only one entry action, successive calls to 
  * &lt;tt&gt;SetEnterAction&lt;/tt&gt; for the same state successively overwrite the 
  * action.
  * @param iAction
  *   The entry action.
  *   &lt;br&gt;&lt;b&gt;Cyclic reference&lt;/b&gt;: A copy of &lt;tt&gt;iAction&lt;/tt&gt; is kept and 
  *   AddRef&#x27;ed. It is Released at the end of the command before the command
  *   destructor call.
  *   &lt;br&gt;&lt;b&gt;Legal values&lt;/b&gt;: &lt;tt&gt;iAction&lt;/tt&gt; may be set to NULL to cancel 
  *   an action inherited from the command base class. 
  */
  virtual void SetEnterAction (CATDiaAction * iAction);
  
  /**
  * Returns the entry action.
  * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;: This action is executed when entering the state without 
  * using a self-transition.
  * @return
  *   The entry action.
  *   &lt;br&gt;&lt;b&gt;Lifecycle rules deviation&lt;/b&gt;: This method doesn&#x27;t AddRef the 
  *   returned value.
  */
  virtual CATDiaAction * GetEnterAction () const;
  
  
  /*-------------------------*/
  //     RESOURCE ID
  /*-------------------------*/     
  
  /**
  * Sets the resource identifier.
  * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;: This identifier is used to retrieve the state prompt in 
  * the command message file.
  * &lt;br&gt;Since a state has only one identifier, successive calls to 
  * &lt;tt&gt;SetResourceId&lt;/tt&gt; for the same state successively overwrite the 
  * identifier. It may be useful to change the state prompt dynamically.
  * @param iId
  *   The resource identifier.
  */
  void SetResourceID (const CATString &amp; iId);
  
  /**
  * Returns the resource identifier.
  * &lt;br&gt;&lt;b&gt;Role&lt;/b&gt;: This identifier is used to retrieve the state prompt in 
  * the command message file.
  * @return
  *   The resource identifier.
  */
  CATString &amp; GetResourceID ();


  /*-------------------------*/
  //     FOR INTERNAL USE 
  /*-------------------------*/     
  
  /* useless methods. They do not work */
  /** @nodoc  */
  void SetHelp (const CATUnicodeString &amp; Help);
  /** @nodoc  */
  CATUnicodeString &amp; GetHelp ();
  
  /*  Manage the message associated with a state */
  /** @nodoc  */
  void SetMessage (const CATUnicodeString &amp; Message);
  /** @nodoc  */
  CATUnicodeString &amp; GetMsg ();
  
  /** @nodoc  */
  void ReleaseComponents ();
  
  /** @nodoc  */
  int IsActivated () const;
  /** @nodoc  */
  void SetActivated (int);
  
  /** @nodoc  */
  void SetCallingCommand (CATCommand *);
  /** @nodoc  */
  CATCommand * GetCallingCommand ();
  
  /** @nodoc  */
  void Dump (int offTraces=0);  
  
  /** @nodoc  */
  CATCommand * GetNextAgent ();
  /** @nodoc  */
  void InitAgentList ();
  
  /** @nodoc  */
  CATDialogState (CATDialogState &amp;);
  
protected:
  
  /*------------------*/
  // internal data 
  /*------------------*/
  
  CATUnicodeString      _Message;
  CATUnicodeString      _Help;
  CATString             _ressourceID;
  CATLISTP (CATCommand) _DialogAgentTable;
  CATCommand *          _callingCommand;
  CATStateCondition *   _condition;
  CATDiaAction *        _leaveAction;
  CATDiaAction *        _enterAction;
  int                   _HasBeenInitialized;
  int                   _activated;
  int                   _AgentListIndice;
  int                   _offTraces;

private:

  // NOT implemented, only declared to prevent unexpected call to default ctors created by the compiler
  CATDialogState &amp; operator= (const CATDialogState &amp;);
    
};

#endif 
</div>
    
    <div class="navigation">
        <div><a href="CATDialogEngine.html">‚Üê ‰∏ä‰∏ÄÈ°µ: CATDialogEngine.h</a></div>
        <div><a href="CATDialogTransition.html">‰∏ã‰∏ÄÈ°µ: CATDialogTransition.h ‚Üí</a></div>
    </div>
</body>
</html>